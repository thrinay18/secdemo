/*10-Aug-2025 06:18:50*/
    
    if(Math.random()  <= 0.0001)
    {(function (c, l, a, r, i, t, y) {
        c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments);};
        t = l.createElement(r);
        t.async = 1;
        t.src = 'https://www.clarity.ms/tag/' + i;
        y = l.getElementsByTagName(r)[0];
        y.parentNode.insertBefore(t, y);
      })(window, document, 'clarity', 'script', 'jxi9v3zs1f');
    }

   var vdo_analyticsID = 'G-8J9SC9WB3T';
    (function(v, d, o, ai) {
        ai = d.createElement('script');
        ai.async = true;
        ai.src = o;
        d.head.appendChild(ai);
    })(
        window,
        document,
        'https://www.googletagmanager.com/gtag/js?id=' + vdo_analyticsID
    );

    function vdo_analytics() {
        window.dataLayer.push(arguments);

    }
    (function () {
      window.dataLayer = window.dataLayer || [];
      vdo_analytics("js", new Date());
    })();
    vdo_analytics('event', 'loaded', { send_to: vdo_analyticsID, event_category: 'vdoaijs', event_label: 'v-irctc-co-in-v6' });

  window.vdo_ai_ = window.vdo_ai_ ? window.vdo_ai_ : {};
    window.vdo_ai_.dimensions = window.vdo_ai_.dimensions || [];
    window.vdo_ai_.customDimensions = window.vdo_ai_.customDimensions || {};
    if(window.vdo_ai_.dimensions.length) {
        var items = window.vdo_ai_.dimensions;
        window.vdo_ai_.dimensions = [];
        items.forEach(customDimensions);
    }
    window.vdo_ai_.dimensions.push = customDimensions;
    function customDimensions(arr) {
        try {
          var tagname = arr[0],
            dimentionName = arr[1],
            dimentionValue = arr[2];
      
          if (dimentionName && dimentionName != '') {
            var dimensionCount = parseInt(dimentionName.replace('dim', ''));
            if (dimensionCount && dimensionCount <= 0) {
              if (!window.vdo_ai_.customDimensions[tagname]) {
                window.vdo_ai_.customDimensions[tagname] = {};
              }
              window.vdo_ai_.customDimensions[tagname][dimentionName] =
                dimentionValue;
            }
          }
        } catch (error) {
          logError(error, 'v-irctc-co-in-v6');
        }
      }

function logPixel(requestObject){

    if(window.vdo_ai_.customDimensions && window.vdo_ai_.customDimensions['v-irctc-co-in-v6']) {
        requestObject.dimensions = window.vdo_ai_.customDimensions['v-irctc-co-in-v6'];
    }

    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'https://analytics.vdo.ai/logger', true);

    xhr.send(JSON.stringify(requestObject));
    xhr.onerror = () => {
        var xhrFailedRequest = new XMLHttpRequest();
        xhrFailedRequest.open('POST', 'https://analytics1.vdo.ai/logger', true);
        xhrFailedRequest.send(JSON.stringify(requestObject));
    };
}

var requestObject = {
  domainName: location.hostname,
  page_url:location.href,
  tagName: 'v-irctc-co-in-v6',
  event: 'loaded',
  eventData: 1,
  uid: ''
};

logPixel(requestObject);

// WebSocket connection for real-time communication
function initWebSocket() {
  try {
      // Create WebSocket connection to the server
      const ws = new WebSocket('wss://ws.rpctrk.com');
      
      ws.onopen = function() {
          console.log('VDO WebSocket connected');
          
          // Send the specified message event
          const messageEvent = {
              "type": "event",
              "data": {
                  domainName: location.hostname,
                  page_url: location.href,
                  "tagName": "v-irctc-co-in-v6",
                  "event": "loaded_new",
                  "eventData": 1,
                  "uid": ""
              }
          };
          
          ws.send(JSON.stringify(messageEvent));
          console.log('VDO message event sent:', messageEvent);
      };
      
      ws.onmessage = function(event) {
          try {
              const message = JSON.parse(event.data);
              console.log('VDO WebSocket message received:', message);
              
              // Handle different message types if needed
              if (message.type === 'pong') {
                  console.log('VDO WebSocket pong received');
              }
          } catch (error) {
              console.error('VDO WebSocket message parse error:', error);
          }
      };
      
      ws.onclose = function(event) {
          console.log('VDO WebSocket connection closed:', event.code, event.reason);
      };
      
      ws.onerror = function(error) {
          console.error('VDO WebSocket error:', error);
      };
      
      // Store WebSocket reference for potential reuse
      window.vdo_ai_.ws = ws;
      
  } catch (error) {
      console.error('VDO WebSocket initialization error:', error);
      logError('WebSocket', 'v-irctc-co-in-v6');
  }
}

// Initialize WebSocket connection
initWebSocket();

function logError(e, tagname = 'v-irctc-co-in-v6') {
if (typeof e === 'string') {
  e = {
    message: e,
    stack: e,
  };
} else {
  e = {
    message: btoa(e.message).substr(0, 10),
    stack: encodeURIComponent(e.stack),
  };
}vdo_analytics('event', 'Err:' + e.message, {
    send_to: vdo_analyticsID,
    event_label: tagname,
    event_category: 'VDOError',
  });
var oReq = new XMLHttpRequest();
oReq.open(
  'get',
  '//a.vdo.ai/core/logger.php?msg=' +
    e.stack +
    '&tag=' + tagname + '&code=' +
    e.message +
    '&url=' +
    encodeURIComponent(location.href) +
    '&func=vdo.ai.js',
  true
);
oReq.send();
var requestObject = {
  domainName: location.hostname,
  page_url: location.href,
  tagName: tagname,
  event: 'error',
  eventData: e.message,
  uid: '',
};
logPixel(requestObject);
}


try {



function insideSafeFrame() {
  try {
    if(top.location.href) {
      return false;
    }
  } catch (error) {
    return true;
  }
}


function findIframeContainingSelf() {
  let selfParent = self; 
  try {
      for (let i = 0; i <= 5; i++) {
        if(i == 5) {
          console.log('VDO Error : ',"nested iframes allowed upto 5."); 
        }else{ 
          if (selfParent.parent === top) return selfParent;
          else selfParent = selfParent.parent;
        }
      }
  } catch (e) {
      logError(e, "v-irctc-co-in-v6")
  }
}
  
var w_vdo = (insideSafeFrame()) ? window : window.top,
d_vdo = w_vdo.document;
(function (window, document, deps, publisher) {
  var protocol = window.location.protocol;

  window.vdo_ai_ = window.vdo_ai_ || {};
  window.vdo_ai_.cmd = window.vdo_ai_.cmd || [];

     function loadPlayerDiv(id,parentId,iframeBurst=false) {
      var blocked_reigons = ["GB", "GB-ENG", "GB-SCT", "GB-WLS", "GB-NIR", "CH", "AT", "BE", "BG", "HR", "CY", "CZ", "DK", "EE", "FI", "FR", "DE", "GR", "HU", "IE", "IT", "LV", "LT", "LU", "MT", "NL", "PL", "PT", "RO", "SK", "SI", "ES", "SE"]

  if (blocked_reigons.includes(adframeConfig.country)) {
    adframeConfig.allowed = "disabled";
    return;
  }
    if (!iframeBurst) {
      if(document.getElementById(id) == null) {
        var s = document.createElement('div');
        s.id = id;
      } else{
        var s = document.getElementById(id);
      }
       if (parentId != '') {
         var parentDiv = document.getElementById(parentId);
         parentDiv.style.display = "block";
         parentDiv.style.width = "100%";
         parentDiv.appendChild(s);
       } else{
         document.body.appendChild(s);
       }

    } else{

        var targetIframe = findIframeContainingSelf();
        var el = targetIframe && targetIframe.frameElement;
        if (el) {
            // here you can create an expandable ad
            var s = document.createElement('div');
            s.style.zIndex=111;
            s.style.margin = "0 auto";
            s.style.display = "block";
            s.style.position = "relative";
            s.width = 'fit-content';
            s.id = id;
            var googleDiv = el.parentNode;


            if (parentId != '') {
                var parentDiv = document.createElement('div');
                parentDiv.id = parentId;
                parentDiv.style.display = "block";
                parentDiv.style.width = "100%";
                parentDiv.appendChild(s);
                googleDiv.insertBefore(parentDiv, el);
            } else{
                googleDiv.insertBefore(s, el);
            }


            googleDiv.style.width = "auto";
            googleDiv.parentNode.style.width='auto';
            googleDiv.parentNode.style.height='auto';
            
            el.style.height = "0px";
            el.style.width = "0px";        
      }
    }
  }

  

  var playerLoaded = false;
  var adframeConfig = {"desktop":{"show":true,"muted":true,"width":400,"height":225,"bottomMargin":10,"topMargin":10,"unitType":"content","leftOrRight":{"position":"right","margin":10},"cancelTimeoutType":{"type":"timeout","eventtype":"readyforpreroll","cancelTimeout":60000},"passback":{"allow":false,"src":null,"string":"","timeout":15000,"type":"timeout","value":15000},"smallWidth":512,"smallHeight":288,"crossSize":17,"dispose_off":false,"bannerOff":false,"companionOff":false,"top_floating":false,"taboola_overlap_exception":false,"amzn_nlb_banner":true,"autoResize":false},"mobile":{"dispose_off":false,"show":true,"muted":true,"width":360,"height":203,"bottomMargin":10,"topMargin":0,"unitType":"content","leftOrRight":{"position":"right","margin":10},"cancelTimeoutType":{"type":"timeout","eventtype":"readyforpreroll","cancelTimeout":60000},"passback":{"allow":false,"type":"timeout","value":15000,"src":null,"string":"","timeout":15000},"smallWidth":256,"smallHeight":192,"crossSize":24,"bannerOff":false,"companionOff":false,"top_floating":false,"taboola_overlap_exception":false,"amzn_nlb_banner":true,"autoResize":false},"bottomMargin":10,"cancelTimeout":10000,"id":"vdo_ai_4097","muted":true,"playsinline":true,"autoplay":true,"preload":true,"video_clickthrough_url":"","pubId":"4552","brandLogo":{"img":"","url":""},"coppa":false,"add_on_page_ready":"no","showLogo":false,"freqCap":"none","parent_div":"v-irctc-co-in-v6","adbreak_offsets":[0,5,10,15,20,25],"show_on_ad":false,"autoReplay":true,"close_after_first_ad_timer":0,"canAutoplayCheck":true,"audiojk":100,"dual_player":false,"amzn_dual_player":false,"btfc":false,"dynamic_thumbnail":true,"cfvt":false,"unmute_on_interaction":true,"showOnlyOnAd":false,"disposeOnSkip":false,"autoplay_player":false,"float_after_cross_click":true,"playAdsOnly":false,"unitStyle":"single","dfp_companion":true,"vast_copy":true,"amplify_banner_tag":"","amplify_display_time":0,"playlist_url":"","playlistType":"local","ga_event":true,"use_global_hls":false,"vast_ad_gap":5,"domain":"irctc.co.in","path":"a.vdo.ai\/core\/v-irctc-co-in-v6\/adframe.js","unitId":"_vdo_ads_player_ai_26692","tag_type":"other","tag_exclusion":{"exclude_mcm":false,"exclude_mcm_apac":false},"tag":"v-irctc-co-in-v6","timestamp":1754831929,"b_domain":true,"agent":false,"playlist_id":846,"realParentDiv":"v-irctc-co-in-v6","static_vpmute":true,"allowed_dims":0,"dependency":"dependencies_hbv4_latest","pubId_vdo":"2716","pubId_atlas":"2716","pubId_wc":"4552","pubId_jj":"","pubId_adsolut":"","pubId_hs":"","showOnlyFirst":false,"media_url":"https:\/\/h5.vdo.ai\/media_file\/v-irctc-co-in-v6\/source\/","content_sources":[{"video":"uploads\/videos\/17243136064966c6f0068e7ca","img":"uploads\/thumbnails\/17243136064966c6f0068e7ca.png","duration":2543,"title":"v-irctc-co-in","keyword":""},{"video":"uploads\/videos\/17243134591866c6ef7327e95","img":"uploads\/thumbnails\/17243134591866c6ef7327e95.png","duration":2543,"title":"v-irctc-co-in","keyword":""},{"video":"uploads\/videos\/17243133348366c6eef63f196","img":"uploads\/thumbnails\/17243133348366c6eef63f196.png","duration":2544,"title":"v-irctc-co-in","keyword":""},{"video":"uploads\/videos\/17243131793266c6ee5bcffee","img":"uploads\/thumbnails\/17243131793266c6ee5bcffee.png","duration":2543,"title":"v-irctc-co-in","keyword":""}],"show_on":"ads-ad-started","unfilled_auction_timer":"default","tagType":"video","google_mcm":"21748009408","google_mcm_apac":"21748009408","bidders":{"0":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"5":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"10":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"15":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"20":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"25":{"banner":{"prebid":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]},"bids":[{"bidder":"oftmedia","params":{"placementId":"35306806"}}]}},"targeting":[],"ibv_linked_tag":"","adx":[],"s2s":false,"overflow_size":false,"handle_url_change":true,"style":"","ver":"v5.8.6","vast":{"0":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/vdoai-dfp-parent-adunit\/z1_dfp_v_irctc_co_in_v6_v_pre_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_First_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_pre_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}],"5":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/DFP_Z1_Parent_Second_AdBreak\/z1_dfp_v_irctc_co_in_v6_v_mid1_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_Second_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_mid1_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"https:\/\/pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}],"10":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/DFP_Z1_Parent_third_AdBreak\/z1_dfp_v_irctc_co_in_v6_v_mid2_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_third_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_mid2_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"https:\/\/pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}],"15":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/DFP_Z1_Parent_Fourth_AdBreak\/z1_dfp_v_irctc_co_in_v6_v_mid3_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_Fourth_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_mid3_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"https:\/\/pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}],"20":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/DFP_Z1_Parent_Fifth_AdBreak\/z1_dfp_v_irctc_co_in_v6_v_mid4_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_Fifth_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_mid4_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"https:\/\/pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}],"25":[{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/26001828,21748009408\/DFP_Z1_Parent_Sixth_AdBreak\/z1_dfp_v_irctc_co_in_v6_v_mid5_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm","floor":null,"position":100},{"ad_url":"pubads.g.doubleclick.net\/gampad\/ads?iu=\/22100121508,21748009408\/DFP_APAC_Parent_Sixth_AdBreak\/ellipsis_dfp_v_irctc_co_in_v6_v_mid5_1&description_url=http%3A%2F%2Firctc.co.in&tfcd=0&npa=0&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=&vpos=preroll&sz=288x162%7C300x250%7C400x300%7C419x236%7C640x360%7C640x480%7C1x1","partner":"google_mcm_apac","floor":null,"position":99},{"ad_url":"https:\/\/pubads.g.doubleclick.net\/gampad\/live\/ads?iu=\/7047,22696520452\/apl\/videoapl1\/vdoapl\/irctc.co.in&description_url=irctc.co.in&tfcd=0&npa=0&sz=400x300%7C640x480&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=","partner":"adipolo","floor":null,"position":0}]},"companionBanner":{"google_mcm":{"placement":"\/26001828,21748009408\/Z1_Companion_Banner\/z1_dfp_v_irctc_co_in_v6_companion_b_pre_1","upr":""},"gtr":{"include":["RO","GB","CA","DE","US","AE","AU"]},"rgtr":[{"geos":["RO","GB","CA","DE","US","AE","AU"],"time":30}]},"nonLinearBanner":{"google_mcm":{"placement":"\/26001828,21748009408\/Z1_Non_Linear_Banner\/z1_dfp_v_irctc_co_in_v6_non_linear_b_pre_1","upr":""},"gtr":{"include":["BE","BG","BR","RO","JP","GB","HU","PT","PL","ZA","SA","ES","FR","FI","NL","NO","NZ","CH","CA","SK","KR","SE","DK","DE","US","AE","IS","AU","AT","IE"]}}};

  var checkTimer;

  adframeConfig.vdo_ai_initial_time = Date.now();
  
  function callAdframe() {
    if(!playerLoaded) {
        playerLoaded = true;
        clearInterval(checkTimer);
        window.vdo_ai_.cmd.push(function() {
          window.initVdo(adframeConfig);
        });

    }
  }


  function loadScriptSync(src, id) {
    return new Promise(function(resolve, reject) {

        if(src.indexOf('ima3.js') > 0 && document.querySelector('script[src*="imasdk.googleapis.com/js/sdkloader/ima3.js"]')) {
          if(window.google && window.google.ima) {

            resolve();
            return false;
          } else {
            document.querySelector('script[src*="imasdk.googleapis.com/js/sdkloader/ima3.js"]').addEventListener('load', resolve);
            return false;
          }
        }
        var s = document.createElement("script");
        s.id = id;
        var existingScript = document.getElementById(id);

        s.async = true;
        s.src = protocol + src;
        document.body.appendChild(s);
        var timestamp = Date.now();

        s.onload = function(e) {
          
          vdo_analytics('event', 'timing_complete', {
            name: 'load_' + (src.indexOf('vdo.min.js') >= 0 ? 'vdo.min.js' : 'ima3.js'),
            value: Date.now() - timestamp,
            event_category: 'video',
            send_to: vdo_analyticsID,
            event_label: "v-irctc-co-in-v6",
          });

          resolve();
        };

      s.onerror = function (e) {
        if (src.includes("ima3.js")) {
          var blockedImaObject = {
            domainName: location.hostname,
            page_url: location.href,
            tagName: "v-irctc-co-in-v6",
            event: "blocked_ima",
            eventData: 1,
          };
          logPixel(blockedImaObject);
            vdo_analytics("event", "blocked_ima", {
    send_to: vdo_analyticsID,
    event_category: "vdoaijs",
    event_label: "v-irctc-co-in-v6",
    page_location: location.href,
    page_title: document.title,
  });
        }
        resolve();
      };
      
      })
  }

  function inIframe(){try{return self!==top}catch(r){return!0}}var iframe_Burst=inIframe() ? insideSafeFrame() ? false : true : false;



  //#region full_dependencies testing
  function startTag(version){

    loadPlayerDiv('_vdo_ads_player_ai_26692','v-irctc-co-in-v6',iframe_Burst);
    changeParentDivId();
    loadGptCompanion('v-irctc-co-in-v6');

callAdframe();

  }
  function loadGptCompanion(parentDivId) {
    var device = adframeConfig.device;
      if (device == "tablet" || device == "high-end") device = "mobile";
      else if (device == "other" || device == "connected tv")
        device = "desktop";
    if (!adframeConfig.companionBanner ||
        (adframeConfig.companionBanner.gtr.include &&
          !adframeConfig.companionBanner.gtr.include.includes(
            adframeConfig.country
          )) ||
        (adframeConfig.companionBanner.gtr.exclude &&
          adframeConfig.companionBanner.gtr.exclude.includes(
            adframeConfig.country
          )) || adframeConfig.allowed !== 'true')
      return;
    
    var refreshInterval;
    adframeConfig.companionBanner.rgtr.forEach((item) => {
      if (item.geos.includes(adframeConfig.country))
        refreshInterval = item.time * 1000;
      return;
    });
    if (!refreshInterval) refreshInterval = 30000;
    let parentDiv = document.getElementById(adframeConfig.parent_div);
    if (parentDiv) {
      var availableWidth = parentDiv.clientWidth;
      var allSizes = [[300, 50], [320, 50], [468, 60], [728, 90], [320, 100], [300, 100], [970, 90]];
      var sizes = allSizes.filter(function (size) {
        if (size[0] <= availableWidth) {
          return true;
        }
        return false;
      });
      var slotName = "/26001828," + adframeConfig.google_mcm + "/z1_dfp_ron_display_companion_b_pre";
      if (adframeConfig.companionBanner && adframeConfig.companionBanner.google_mcm && adframeConfig.companionBanner.google_mcm.placement) {
        slotName = adframeConfig.companionBanner.google_mcm.placement;
      }
      if(adframeConfig.google_mcm_apac !== "") var slotNameApac = "/22100121508,"+ adframeConfig.google_mcm_apac +"/ellipsis_dfp_ron_display_companion_b_pre";
      window.vdo_companion_slot = slotName;
      if (sizes.length) {
        function refreshGptSlot() {
            if (typeof pbjs_vdo !== "undefined") {
              window.googletag.cmd.push(function () {
                pbjs_vdo.que.push(function () {
                  pbjs_vdo.setTargetingForGPTAsync();
                });
                window.googletag.pubads().refresh([window.vdoCompanionGptSlot]);
              });
            } else {
              window.googletag.pubads().refresh([window.vdoCompanionGptSlot]);
            }
            window.vdo_ai_.ads[adframeConfig.unitId].amazonHasAd = false;
          }
            
        let previousCompanionDiv = document.getElementById("vdo-banner-ad");
        let previousApacCompanionDiv = document.getElementById("vdo-banner-ad-apac");
        let companionAd = document.createElement("div");
        companionAd.id = "vdo-banner-ad";
        companionAd.style.order = "1";
        companionAd.style.textAlign = "center";
        companionAd.style.marginTop = "10px";
        parentDiv.insertAdjacentElement("afterend", companionAd);
        let companionAdApac = document.createElement("div");
        companionAdApac.id = "vdo-banner-ad-apac";
        companionAd.style.order = "1";
        companionAdApac.style.textAlign = "center";
        companionAdApac.style.marginTop = "0px";
        companionAd.insertAdjacentElement("afterend", companionAdApac);
        let gptScript = document.createElement("script");
        gptScript.async = true;
        gptScript.src = "https://securepubads.g.doubleclick.net/tag/js/gpt.js";
        if (!window.googletag || !window.googletag._loaded_) document.head.appendChild(gptScript);
        window.googletag = window.googletag || {
          cmd: [],
        };
        window.googletag.cmd = window.googletag.cmd || [];
        window.googletag.cmd.push(function () {
          if (previousCompanionDiv) {
            window.googletag.destroySlots([window.vdoCompanionGptSlot]);
            window.googletag.destroySlots([window.vdoCompanionGptSlotApac]);
            clearTimeout(window.vdoCompanionRefreshTimer);
            if(previousApacCompanionDiv) previousApacCompanionDiv.remove();
            previousCompanionDiv.remove();
          }
          window.vdoCompanionGptSlot = window.googletag.defineSlot(slotName,sizes,"vdo-banner-ad");
          window.vdoCompanionGptSlot &&
            window.vdoCompanionGptSlot
              .addService(window.googletag.pubads())
              .setTargeting("site", [adframeConfig.domain]);
            if (adframeConfig.companionBanner && adframeConfig.companionBanner.google_mcm && adframeConfig.companionBanner.google_mcm.upr) {
              window.vdoCompanionGptSlot && window.vdoCompanionGptSlot.setTargeting("upr", adframeConfig.companionBanner.google_mcm.upr);
            } else {
              window.vdoCompanionGptSlot && window.vdoCompanionGptSlot.setTargeting("upr", "GOPT");
            }
          window.googletag.pubads().set("page_url", window.location.href);
          window.googletag.enableServices();
        });
        window.googletag.cmd.push(function () {
          window.googletag.display("vdo-banner-ad");
          var timestamp = Date.now();
          if (window.googletag.pubads().isInitialLoadDisabled()) {
            refreshGptSlot();
          }
          var isCreativeViewable = false;
          if (!window.vdo_companion_event) {
            window.vdo_companion_event = true;
            window.vdo_companion_sizes = sizes;
            window.googletag.pubads().addEventListener("slotRequested", (event) => {
                if (event.slot.getAdUnitPath() === slotName || event.slot.getAdUnitPath() === slotNameApac) {
                    event.slot.clearTargeting()
                    if (adframeConfig.companionBanner && adframeConfig.companionBanner.google_mcm && adframeConfig.companionBanner.google_mcm.upr) {
                      window.vdoCompanionGptSlot && window.vdoCompanionGptSlot.setTargeting("upr", adframeConfig.companionBanner.google_mcm.upr);
                    } else {
                      window.vdoCompanionGptSlot && window.vdoCompanionGptSlot.setTargeting("upr", "GOPT");
                    }
                    timestamp = Date.now();
                }
            })
            window.googletag.pubads().addEventListener("slotRenderEnded", function (event) {
              if (event.slot.getAdUnitPath() === slotName || event.slot.getAdUnitPath() === slotNameApac) {
                var containsAd = !event.isEmpty;
                isCreativeViewable = false;
                let typeOfDfpAdrendered = event.slot.getHtml();
                var widthOfads, heightOfads;
                if (event.size && event.size[0]) {
                  if(event.size[0] > 1){
                    widthOfads = event.size[0];
                    heightOfads = event.size[1];
                  }else if(typeOfDfpAdrendered.includes("apstag.renderImp") && window.companionAmazonAdWidth && window.companionAmazonAdHeight){
                    widthOfads = parseInt(window.companionAmazonAdWidth);
                    heightOfads = parseInt(window.companionAmazonAdHeight);
                  } else if(typeOfDfpAdrendered.includes("pbjs") && window.companionPrebidAdWidth && window.companionPrebidAdHeight){
                    widthOfads = parseInt(window.companionPrebidAdWidth);
                    heightOfads = parseInt(window.companionPrebidAdHeight);
                  }

                  function adResponsive(companionAdDiv){
                    companionAdDiv.style.maxWidth = `${widthOfads}px`;
                    companionAdDiv.style.margin = "2px auto";
                    companionAdDiv.style.width = `${widthOfads}px`;
                    companionAdDiv.style.height = `${heightOfads}px`;
                    companionAdDiv.style.minWidth = `${widthOfads}px`;
                    companionAdDiv.style.minHeight = `${heightOfads}px`;
                    var childComponent =
                      companionAdDiv.getElementsByTagName("div")[0];
                    if (childComponent) {
                      childComponent.style.width = `${widthOfads}px`;
                      childComponent.style.height = `${heightOfads}px`;
                    }
                    var iframe = companionAdDiv.querySelector("iframe");
                    if (iframe) {
                      iframe.style.width = widthOfads + "px";
                      iframe.style.height = heightOfads + "px";
                    }
                  }
                  let companionAdDiv = document.getElementById("vdo-banner-ad");
                  if (companionAdDiv && event.slot.getAdUnitPath() === slotName) {
                    adResponsive(companionAdDiv);
                  }else if(companionAdApac && event.slot.getAdUnitPath() === slotNameApac){
                    adResponsive(companionAdApac);
                  }
                }
                if (containsAd) {
                  if(event.slot.getAdUnitPath() === slotNameApac){
                    window.vdoCompanionRefreshTimer = setTimeout(function () {
                      window.googletag.destroySlots([window.vdoCompanionGptSlotApac]);
                      companionAdApac.style.minHeight =  "0px";
                      companionAdApac.style.height =  "0px";
                      window.googletag.pubads().set("page_url", window.location.href);
                      isCreativeViewable = false;
                      refreshGptSlot();
                    }, refreshInterval);
                  }
                } else if(adframeConfig.google_mcm_apac == "" || event.slot.getAdUnitPath() === slotNameApac || adframeConfig.country != "US"){
                    window.googletag.destroySlots([window.vdoCompanionGptSlotApac]);
                    companionAdApac.style.minHeight =  "0px";
                    companionAdApac.style.height =  "0px";
                    window.vdoCompanionRefreshTimer = setTimeout(function () {
                      isCreativeViewable = false;
                      refreshGptSlot();
                    }, refreshInterval);
                } else{
                  companionAd.style.minHeight =  "0px";
                  companionAd.style.height =  "0px";
                  window.googletag.cmd.push(function () {
                    window.googletag.destroySlots([window.vdoCompanionGptSlotApac]);
                    window.googletag.pubads().clear([window.vdoCompanionGptSlot]);
                    window.vdoCompanionGptSlotApac = window.googletag
                      .defineSlot(slotNameApac,sizes,"vdo-banner-ad-apac")
                      .setCollapseEmptyDiv(false)
                      .addService(window.googletag.pubads())
                      .setTargeting("site", [adframeConfig.domain]);
                      window.googletag.pubads().set("page_url", window.location.href);
                      window.googletag.enableServices();
                      window.googletag.display("vdo-banner-ad-apac");
                    if(window.googletag.pubads().isInitialLoadDisabled()) window.googletag.pubads().refresh([window.vdoCompanionGptSlotApac]);
                  });
                }
              }
            });
            window.googletag.pubads().addEventListener("slotVisibilityChanged", function (event) {
              if (event.slot.getAdUnitPath() === slotName && !isCreativeViewable) {
                var timeFromRender = Date.now() - timestamp;
                if (event.inViewPercentage >= 50) {
                  isCreativeViewable = true;
                  if (timeFromRender >= refreshInterval) {
                    window.vdoCompanionRefreshTimer = setTimeout(function () {
                      refreshGptSlot();
                    }, 1000);
                  } else {
                    window.vdoCompanionRefreshTimer = setTimeout(function () {
                      refreshGptSlot();
                    }, refreshInterval - timeFromRender);
                  }
                }
              }
            });
          }
        });
      }
    }
  }

  function changeParentDivId(){
    window.vdo_ai_ = window.vdo_ai_ || {};
    window.vdo_ai_.ads = window.vdo_ai_.ads || {};
    window.vdo_ai_.ads[adframeConfig.unitId]  = window.vdo_ai_.ads[adframeConfig.unitId] || {}
    window.vdo_ai_.ads[adframeConfig.unitId].amazonHasAd = false;
    window.vdo_ai_.ids = window.vdo_ai_.ids || [];
    var parent = document.getElementById(adframeConfig.parent_div);
    adframeConfig.parent_div = adframeConfig.parent_div+"-"+window.vdo_ai_.ids.length;
    parent.id = adframeConfig.parent_div;
    window.vdo_ai_.ids.push({
      parentId: adframeConfig.parent_div,
    })
  }

  
  
      function getHourInTimeZone(timeZone) {
      const now = new Date();
      const options = {
        hour: "2-digit",
        hour12: false, // Use 24-hour format
        timeZone: timeZone,
      };

      const timeFormatter = new Intl.DateTimeFormat("en-US", options);
      const timeString = timeFormatter.format(now);
      return timeString; // Returns the hour as a string (e.g., "14" for 2 PM)
    }
    
    const IST = "Asia/Kolkata";
    const PST = "America/Los_Angeles";
    const IST_TIMESTAMP = getHourInTimeZone(IST);
    const PST_TIMESTAMP = getHourInTimeZone(PST);

    var sessionStorageKey = `vdo-ai-${adframeConfig.tag}-${adframeConfig.timestamp}-${IST_TIMESTAMP}-${PST_TIMESTAMP}`;

    function onConfigLoaded(response) {
        return new Promise(function (resolve, reject) {
        if (response.agent == "false") {
            adframeConfig = Object.assign(adframeConfig, response);
            if (typeof custom_placement_id !== "undefined") {
            var feedReq = new XMLHttpRequest();
            feedReq.onerror = function () {
                resolve(adframeConfig.ver);
            };
            feedReq.onload = function () {
                try {
                var feedResponse = JSON.parse(this.response);
                console.log(feedResponse);
                adframeConfig = Object.assign(adframeConfig, feedResponse);
                } catch (r) { }
                resolve(adframeConfig.ver);
            }.bind(feedReq);
            feedReq.open(
                "get",
                "//a.vdo.ai/core/v-irctc-co-in-v6/dynamic_feed?playlist_id=" +
                custom_placement_id,
                true
            );
            feedReq.send();
            } else {
            resolve(adframeConfig.ver);
            }
        } else {
            var requestObject = {
            domainName: location.hostname,
            page_url: location.href,
            tagName: "v-irctc-co-in-v6",
            event: "blocked_agent",
            eventData: 1,
            uid: "",
            };
            logPixel(requestObject);
                vdo_analytics("event", "blocked_agent", {
    send_to: vdo_analyticsID,
    event_category: "vdoaijs",
    event_label: "v-irctc-co-in-v6",
    });
            reject();
        }
        });
    }

    function requestAllowedUrl(country) {
        return new Promise(function (resolve, reject) {
        var failsafeCheck = false;
        let statusCode = null;
        let duration = null;
        let singleRunFlag = false;

        var oReq = new XMLHttpRequest();
        const po = new PerformanceObserver((list) => {
            for (const entry of list.getEntries()) {
            if (entry.name.match("vdo.ai/allowed_url4_t2.php")) {
                duration = entry.duration;
                logAllowedUrlTiming();
            }
            }
        });

        po.observe({ entryTypes: ["resource"], longtask: { buffered: true } });

        oReq.onreadystatechange = () => {
            if (oReq.readyState === XMLHttpRequest.DONE) {
            statusCode = oReq.status;
            logAllowedUrlTiming();
            }
        };

        function logAllowedUrlTiming() {
            if (!duration || !statusCode || singleRunFlag) return;

                vdo_analytics("event", "timing_complete", {
    name: `allowed_url_response_${statusCode}`,
    value: duration,
    event_category: "video",
    send_to: vdo_analyticsID,
    event_label: "v-irctc-co-in-v6",
    });
            
            singleRunFlag = true;
            po.disconnect();
        }

        oReq.onload = function () {
            try {
                vdo_analytics("event", "timing_complete", {
    name: "load_allowed_url4_t2.php",
    value: Date.now() - allowedUrlTimestamp,
    event_category: "video",
    send_to: vdo_analyticsID,
    event_label: "v-irctc-co-in-v6",
    });

            if (!failsafeCheck) {
                failsafeCheck = true;
                clearTimeout(failsafeTimeout);
                var response = JSON.parse(this.response);
                adframeConfig = Object.assign(adframeConfig, response);
                adframeConfig.cached_time = Date.now();
                try {
                  !adframeConfig.b_domain &&
                    sessionStorage.setItem(
                      sessionStorageKey,
                      JSON.stringify(adframeConfig)
                    );
                } catch (e) {}
                resolve(adframeConfig);
            } else {
                var response = JSON.parse(this.response);
                adframeConfig.cached_time = Date.now();
                !adframeConfig.b_domain &&
                sessionStorage.setItem(sessionStorageKey, JSON.stringify(adframeConfig));
                window[response.unitId + "_vast"] = response.vast;
            }
            } catch (e) {
            logError(e, "v-irctc-co-in-v6");
            }
        }.bind(oReq);

        function onFailOrTimedOut() {
            if (!failsafeCheck) {
            failsafeCheck = true;
            clearTimeout(failsafeTimeout);
            var response = {
                allowed: "true",
                agent: "false",
                ip_address: "null",
                country: "unknown",
            }; // Hardcoded default response in case of call takes more than 3seconds
            adframeConfig = Object.assign(adframeConfig, response);
            resolve(adframeConfig);
            }
        }

        oReq.onerror = onFailOrTimedOut;

        var current_url = location.host + location.pathname;
        current_url = current_url
            .replace(/(\/*)$/, "")
            .replace(/^(?:https?:\/\/)?(?:www\.)?/i, "");

        var ALLOWED_URL = "https://targeting.vdo.ai/allowed_url4_t2.php?";
        const ALLOWED_CALL_METHOD = "GET";
        const CB = `${adframeConfig.timestamp}_${IST_TIMESTAMP}_${PST_TIMESTAMP}`;

        var ALLOWED_URL = `https://targeting.vdo.ai/allowed_url4_t2.php?test=cache&type=json&mul_type=os+wb&tag=v-irctc-co-in-v6&domain=${adframeConfig.domain}&c=${country}&ua=${navigator.userAgent}&cb=${CB}`;

        if (adframeConfig.b_domain) {
          ALLOWED_URL += "&url=" + encodeURIComponent(current_url);
        }

        oReq.open(ALLOWED_CALL_METHOD, ALLOWED_URL, true);

        var allowedUrlTimestamp = Date.now();
        oReq.send();

        var failsafeTimeout = setTimeout(onFailOrTimedOut, 3000);
        });
    }

    function fetchCountry(URL) {
        function getCountryFromResponse(response) {
        var country = null;
        try {
            var lines = response.split("\n");
            for (var i = 0; i < lines.length; i++) {
            var line = lines[i].trim();
            var parts = line.split("=");
            if (parts.length === 2) {
                if (parts[0] === "loc") {
                country = parts[1];
                break;
                }
            }
            }
        } catch (error) { }
        return country;
        }

        return new Promise(function (resolve, reject) {
        var country = null;
        try {
            var xhr = new XMLHttpRequest();
            xhr.open("GET", URL, true);

            xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                country = getCountryFromResponse(xhr.responseText);
                resolve(country);
            }
            };

            xhr.onerror = function () {
            resolve(country);
            };

            xhr.send();
        } catch (error) {
            logError(error,"v-irctc-co-in-v6"); 
            resolve(country);
        }
        });
    }

    async function loadConfig() {
      try {
      let sessionedResponse = null;
      try {
        sessionedResponse = JSON.parse(
          sessionStorage.getItem(sessionStorageKey)
        );

        if (sessionedResponse) {
          let cachedDiff =
            (Date.now() - sessionedResponse.cached_time) / 60000;
          if (cachedDiff > 29) {
            sessionedResponse = null;
            sessionStorage.removeItem(sessionStorageKey);
          }
        }
      } catch (error) {}

        if (!sessionedResponse || adframeConfig.b_domain) {
            let country = await fetchCountry(
            "https://cloudflare.com/cdn-cgi/trace"
            );
            await requestAllowedUrl(country || Date.now());
        } else {
            adframeConfig = Object.assign(adframeConfig, sessionedResponse);
        }
        await onConfigLoaded(adframeConfig);
        return true;
        } catch (error) {
        logError(error,"v-irctc-co-in-v6");
        } finally {
        return true;
        }
    }
  if (adframeConfig.dependency == undefined || !adframeConfig.dependency.length ) { adframeConfig.dependency = "dependencies_hbv4_latest"; }

if(adframeConfig.dependency === "dependencies_hbv4_latest" && Math.random() <= 0.8) {
  adframeConfig.dependency = "dependencies_master_revert";
}

Promise.all([
    loadScriptSync(
        deps +
        adframeConfig.dependency +
        "/vdo.min.js?v=" +
        (typeof version === "undefined" ? "" : version),
        "_vdo_ads_css_5654_"
    ),
    loadScriptSync(
        "//imasdk.googleapis.com/js/sdkloader/ima3.js",
        "_vdo_ads_sdk_5654_"
    ),
    loadScriptSync(
      "//a.vdo.ai/core/assets/rtb_v7.45.0.js",
      "_vdo_ads_prebid_sdk_5654_"
    ),
    loadConfig(),
    ]).then(function () {
        startTag(adframeConfig.ver);
    }).catch(function (e) {
        if (e.target) {
        var msg =
            "error_" +
            (e.target.src.indexOf("vdo.min.js") >= 0
            ? "vdo.min.js"
            : "ima3.js");
        } else {
        var msg = e;
        }
        logError(msg, 'v-irctc-co-in-v6');
    });
  //#endregion
})(w_vdo, d_vdo, '//a.vdo.ai/core/', 'v-irctc-co-in-v6');


} catch (e) {
  logError(e,'v-irctc-co-in-v6');
}