(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},MCLT:function(e,t,n){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},a=/%[sdj%]/g;t.format=function(e){if(!f(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,s=i.length,r=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}})),o=i[n];n<s;o=i[++n])b(o)||!C(o)?r+=" "+o:r+=" "+l(o);return r},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var s,r={};function l(e,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),h(n)?i.showHidden=n:n&&t._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,e,i.depth)}function o(e,t){var n=l.styles[t];return n?"\x1b["+l.colors[n][0]+"m"+e+"\x1b["+l.colors[n][1]+"m":e}function c(e,t){return e}function u(e,n,i){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(i,e);return f(a)||(a=u(e,a,i)),a}var s=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(f(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}(e,n);if(s)return s;var r=Object.keys(n),l=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(n)),D(n)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return g(n);if(0===r.length){if(T(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(y(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(D(n))return g(n)}var o,c="",C=!1,k=["{","}"];return d(n)&&(C=!0,k=["[","]"]),T(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),y(n)&&(c=" "+RegExp.prototype.toString.call(n)),S(n)&&(c=" "+Date.prototype.toUTCString.call(n)),D(n)&&(c=" "+g(n)),0!==r.length||C&&0!=n.length?i<0?y(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),o=C?function(e,t,n,i,a){for(var s=[],r=0,l=t.length;r<l;++r)A(t,String(r))?s.push(p(e,t,n,i,String(r),!0)):s.push("");return a.forEach((function(a){a.match(/^\d+$/)||s.push(p(e,t,n,i,a,!0))})),s}(e,n,i,l,r):r.map((function(t){return p(e,n,i,l,t,C)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(o,c,k)):k[0]+c+k[1]}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,i,a,s){var r,l,o;if((o=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?l=e.stylize(o.set?"[Getter/Setter]":"[Getter]","special"):o.set&&(l=e.stylize("[Setter]","special")),A(i,a)||(r="["+a+"]"),l||(e.seen.indexOf(o.value)<0?(l=b(n)?u(e,o.value,null):u(e,o.value,n-1)).indexOf("\n")>-1&&(l=s?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n")):l=e.stylize("[Circular]","special")),v(r)){if(s&&a.match(/^\d+$/))return l;(r=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+l}function d(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function b(e){return null===e}function m(e){return"number"==typeof e}function f(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return C(e)&&"[object RegExp]"===k(e)}function C(e){return"object"==typeof e&&null!==e}function S(e){return C(e)&&"[object Date]"===k(e)}function D(e){return C(e)&&("[object Error]"===k(e)||e instanceof Error)}function T(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(s)&&(s=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!r[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var n=process.pid;r[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else r[e]=function(){};return r[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=h,t.isNull=b,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=f,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=y,t.isObject=C,t.isDate=S,t.isError=D,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=n("P7XM"),t._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function Z(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!=typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise((function(e,i){t=e,n=i})),a=[],s=0;s<arguments.length;s++)a.push(arguments[s]);a.push((function(e,i){e?n(e):t(i)}));try{e.apply(this,a)}catch(r){n(r)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=M,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var a=this,s=function(){return i.apply(a,arguments)};e.apply(this,t).then((function(e){process.nextTick(s,null,e)}),(function(e){process.nextTick(Z,e,s)}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},P7XM:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},qmMC:function(e,t,n){"use strict";n.r(t),n.d(t,"BookingModule",(function(){return Nl}));var i=n("tyNb"),a=n("PCNd"),s=n("PqYM"),r=n("/zH8"),l=n("61lg"),o=n("fXoL"),c=n("yVE3"),u=n("Ouoq"),g=n("kt0X"),p=n("ofXK"),d=n("7zfz"),h=n("dGra"),b=n("gsC4"),m=n("+uuo"),f=n("8cFx"),v=n("Gxio"),y=n("Nf9I"),C=n("jLSX"),S=n("3Pt+"),D=n("f2vS"),T=n("ghig"),k=n("myAP"),I=n("2hp+"),O=n("V5BG"),x=n("eO1q"),A=n("arFO");const M=["jdCalender"];function Z(e,t){if(1&e&&(o.ac(0,"span",48),o.Tc(1),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Uc(e)}}function w(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.ac(2,"strong"),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(2).$implicit;o.Cb(1),o.Wc(" \u27a8 ",e.snTo," - ",e.scTo," "),o.Cb(2),o.Uc(e.ctTo)}}function L(e,t){if(1&e&&(o.ac(0,"span",50),o.Vb(1,"br"),o.ac(2,"strong"),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(2).$implicit;o.Cb(3),o.Uc(e.state)}}function N(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.ac(2,"strong"),o.Tc(3),o.Zb(),o.Rc(4,w,4,3,"span",47),o.Rc(5,L,4,1,"span",49),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Wc(" ",e.sn," - ",e.sc," "),o.Cb(2),o.Uc(e.ct),o.Cb(1),o.tc("ngIf",e.fromTo),o.Cb(1),o.tc("ngIf",null!=e.state)}}function R(e,t){if(1&e&&(o.Rc(0,Z,2,1,"span",46),o.Rc(1,N,6,5,"span",47)),2&e){const e=t.$implicit;o.tc("ngIf",null==e.sc),o.Cb(1),o.tc("ngIf",null!=e.sc)}}function P(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Uc(e)}}function B(e,t){if(1&e&&(o.ac(0,"span",50),o.Vb(1,"br"),o.ac(2,"strong"),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(2).$implicit;o.Cb(3),o.Uc(e.state)}}function E(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.ac(2,"strong"),o.Tc(3),o.Zb(),o.Rc(4,B,4,1,"span",49),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Wc(" ",e.sn," - ",e.sc," "),o.Cb(2),o.Uc(e.ct),o.Cb(1),o.tc("ngIf",null!=e.state)}}function F(e,t){if(1&e&&(o.Rc(0,P,2,1,"span",47),o.Rc(1,E,5,4,"span",47)),2&e){const e=t.$implicit;o.tc("ngIf",null==e.sc),o.Cb(1),o.tc("ngIf",null!=e.sc)}}function j(e,t){if(1&e){const e=o.bc();o.ac(0,"span",38),o.ac(1,"input",51),o.ic("change",(function(){return o.Kc(e),o.mc().onClickConcession("D")})),o.Zb(),o.ac(2,"label",52),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.divyaangConcession)}}function V(e,t){if(1&e){const e=o.bc();o.ac(0,"span",38),o.ac(1,"input",53),o.ic("change",(function(){return o.Kc(e),o.mc().onClickConcession("J")})),o.Zb(),o.ac(2,"label",54),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.journalistConcession)}}function U(e,t){if(1&e){const e=o.bc();o.ac(0,"span",38),o.ac(1,"input",55),o.ic("change",(function(){return o.Kc(e),o.mc().onClickConcession("P")})),o.Zb(),o.ac(2,"label",56),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.railwayPassConc)}}const q=function(){return{width:"100%"}};let G=(()=>{class e{constructor(e,t,n,i,a,s,r,l,o,c,u){this.fb=e,this.store=t,this.langService=n,this.userService=i,this.rollesPipe=a,this.confirmationService=s,this.stationFilterService=r,this.stnNamePipe=l,this.classNamePipe=o,this.messageService=c,this.webService=u,this.userLogged=!1,this.userStatus=1,this.stnList=[],this.fromStn=null,this.toStn=null,this.d=null,this.day=null,this.month=null,this.date=null,this.jClass=null,this.jQuota=null,this.isConc=!0,this.returnJourny=!1,this.isLogedinReq=!1,this.PASS_BOOKING=!0,this.foreignUser=!1,this.calenderDay=124,this.lastSearchString="",this.loyaltyRedemptionAllowed=!1,this.tatkalQuota=!0,this.showConc=!0}ngOnInit(){this.initForm(),this.loginSub=this.store.select(r.r).subscribe(e=>{null==e||null==e||null==e.userDetail||null==e.userDetail||""==e.userDetail?(this.userLogged=!1,this.initQuotas()):(this.userLogged=!0,this.userStatus=e.userDetail.userEnableState,this.foreignUser="94"!==e.userDetail.countryId,void 0!==e.userDetail.userConfigurablesDTOs&&e.userDetail.userConfigurablesDTOs.forEach(e=>{this.loyaltyRedemptionAllowed=this.loyaltyRedemptionAllowed||"true"==e.softUser&&"true"===e.loyaltyRedemptionBookingAllowed}),this.initRoles(e),this.initQuotas())}),this.labelsSub=this.store.select(r.m).subscribe(e=>{if(null!=e&&null!=e){this.initQuotas(),this.iniClasses();let e=this.modifyInpForm.controls.origin.value,t=this.modifyInpForm.controls.destination.value;null!=e&&e.indexOf("-")>0&&this.modifyInpForm.controls.origin.setValue(this.stnNamePipe.transform(e.split("-")[1].trim(),this.langService.langChoice)+" - "+e.split("-")[1].trim()),null!=t&&t.indexOf("-")>0&&this.modifyInpForm.controls.destination.setValue(this.stnNamePipe.transform(t.split("-")[1].trim(),this.langService.langChoice)+" - "+t.split("-")[1].trim())}}),this.jpSub=this.store.select(r.k).subscribe(e=>{if(this.tatkalQuota=!0,this.showConc=!0,null!=e&&null!=e){this.modifyInpForm.patchValue(e);const t=this.modifyInpForm.controls.bookingType.value;"RTPO"!=t&&"RTPR"!=t||(this.returnTourPackage=!0,"RTPR"==t&&(this.inputsDisabled=!0,this.modifyInpForm.controls.origin.disable(),this.modifyInpForm.controls.destination.disable(),this.modifyInpForm.controls.journeyClass.disable()),this.tatkalQuota=!1,this.showConc=!1,this.rtpDateSub=this.userService.RTPJourneyDay.subscribe(e=>{this.rtpDate=e,this.rtpDatePatch()}))}}),window.scroll({top:0,left:0,behavior:"smooth"}),this.iniClasses()}ngAfterViewInit(){this.userService.noOfDaysInCalendar.subscribe(e=>{console.log("Calendar val changed to : "+e),this.calenderDay=e,this.returnTourPackage||this.initDate()}),this.onChangeJDate()}ngOnDestroy(){this.loginSub.unsubscribe(),this.labelsSub.unsubscribe(),this.jpSub.unsubscribe(),null!=this.rtpDateSub&&this.rtpDateSub.unsubscribe()}initForm(){this.modifyInpForm=this.fb.group({origin:["",[S.x.required,D.a,S.x.maxLength(25),S.x.minLength(1)]],destination:["",[S.x.required,D.a,S.x.maxLength(25),S.x.minLength(1)]],journeyClass:[""],journeyDate:[new Date],journeyQuota:["GN"],ticketType:["E"],concessionBooking:[!1],conBookingJournalist:[!1],passBooking:[!1],ftBooking:[!1],loyaltyRedemptionBooking:[!1],dateSpecific:[!0],availableBerth:[!1],txnId:[null],oneStop:[!1],trainNo:[null],returnJourny:[!1],bookingType:[null]})}initRoles(e){this.JOURNEY_LIST=1==e.userDetail.rolles[this.rollesPipe.transform("JOURNEY_LIST")-1],this.I_TICKET=1==e.userDetail.rolles[this.rollesPipe.transform("I_TICKET")-1],this.MP_USER=1==e.userDetail.rolles[this.rollesPipe.transform("MP_USER")-1],this.FT_BOOKING=1==e.userDetail.rolles[this.rollesPipe.transform("FT_BOOKING")-1],this.PASS_BOOKING=1==e.userDetail.rolles[this.rollesPipe.transform("PASS_BOOKING")-1]}initDate(){this.oldDate=new Date,this.nextday=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+this.calenderDay)}initQuotas(){if(this.quotas=[],null==this.langService.lang||null==this.langService.lang)return;this.quotas.push({label:this.langService.lang.general,value:"GN"}),this.quotas.push({label:this.langService.lang.ladies,value:"LD"}),this.quotas.push({label:this.langService.lang.lowerBerthsrCitizen,value:"SS"}),this.returnTourPackage||(this.quotas.push({label:this.langService.lang.PhysicalHandicap,value:"HP"}),this.quotas.push({label:this.langService.lang.dpQuota,value:"DP"})),this.MP_USER?(this.quotas=[],this.quotas.push({label:this.langService.lang.mpQuota,value:"PH"}),this.quotas.push({label:this.langService.lang.general,value:"GN"}),this.quotas.push({label:this.langService.lang.ladies,value:"LD"}),this.quotas.push({label:this.langService.lang.lowerBerthsrCitizen,value:"SS"}),this.quotas.push({label:this.langService.lang.PhysicalHandicap,value:"HP"}),this.quotas.push({label:this.langService.lang.tatkal,value:"TQ"}),this.quotas.push({label:this.langService.lang.premiumTatkal,value:"PT"})):this.modifyInpForm.controls.concessionBooking.value||this.modifyInpForm.controls.conBookingJournalist.value?(this.quotas=[],this.quotas.push({label:this.langService.lang.general,value:"GN"}),this.quotas.push({label:this.langService.lang.ladies,value:"LD"}),this.quotas.push({label:this.langService.lang.lowerBerthsrCitizen,value:"SS"}),this.quotas.push({label:this.langService.lang.PhysicalHandicap,value:"HP"})):this.modifyInpForm.controls.ftBooking.value?(this.quotas=[],this.quotas.push({label:this.langService.lang.ftQuota,value:"FT"})):this.tatkalQuota&&(this.quotas.push({label:this.langService.lang.tatkal,value:"TQ"}),this.quotas.push({label:this.langService.lang.premiumTatkal,value:"PT"})),!this.modifyInpForm.controls.ftBooking.value&&this.foreignUser&&this.FT_BOOKING&&this.quotas.push({label:this.langService.lang.ftQuota,value:"FT"});let e=!1;this.quotas.forEach(t=>{t.value==this.modifyInpForm.controls.journeyQuota.value&&(e=!0)}),e&&(this.modifyInpForm.controls.passBooking.value||"DP"!=this.modifyInpForm.controls.journeyQuota.value)||this.modifyInpForm.controls.journeyQuota.setValue(this.quotas[0].value),this.onChangeQuota()}iniClasses(){if(this.classList=[],"FT"===this.modifyInpForm.controls.journeyQuota.value)this.langService.classMap.FT.forEach(e=>{this.classList.push({label:this.classNamePipe.transform(e),value:e})});else if(this.modifyInpForm.controls.loyaltyRedemptionBooking.value&&null!=this.userService.userResponse&&null!=this.userService.userResponse&&null!=this.userService.userResponse.userConfigurablesDTOs){let e=this.userService.userResponse.userConfigurablesDTOs[0].accrualClassList;this.langService.classMap.NORMAL.forEach(t=>{(e.includes(t)||e.includes(""))&&this.classList.push({label:this.classNamePipe.transform(t),value:t})})}else this.langService.classMap.NORMAL.forEach(e=>{this.classList.push({label:this.classNamePipe.transform(e),value:e})})}exchangeToFrom(){if("RTPR"!=this.modifyInpForm.controls.bookingType.value){let e=this.modifyInpForm.controls.origin.value;this.modifyInpForm.controls.origin.setValue(this.modifyInpForm.controls.destination.value),this.modifyInpForm.controls.destination.setValue(e)}else this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.actionNotAllowed})}getTrainList(e=null){if(3==this.userStatus||15==this.userStatus||16==this.userStatus)return void this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.unauthorisedForActn});this.inputsDisabled&&this.enableForm();let t=Object.assign({},this.modifyInpForm.value),n=null;if(null!=e&&(t.journeyDate=e),""!=t.origin&&null!=t.origin&&null!=t.origin||""!=t.destination&&null!=t.destination&&null!=t.destination)if(""==t.origin||null==t.origin||null==t.origin)n=this.langService.errorMsg.originErr;else if(""==t.destination||null==t.destination||null==t.destination)n=this.langService.errorMsg.destinationErr;else if(null==t.journeyDate||t.journeyDate>this.nextday||t.journeyDate<new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()))this.modifyInpForm.controls.journeyDate.setValue(null),n=this.langService.errorMsg.jpInputErr11;else if(t.destination==t.origin)n=this.langService.errorMsg.jpInputErr12;else{let e=t.origin.split("(")[0].trim(),i=e.split("-"),a=t.destination.split("(")[0].trim(),s=a.split("-");this.stnNamePipe.transform(i[1].trim(),this.langService.langChoice)+" - "+i[1].trim()!=e?n=this.langService.errorMsg.jpInputErr9:this.stnNamePipe.transform(s[1].trim(),this.langService.langChoice)+" - "+s[1].trim()!=a&&(n=this.langService.errorMsg.jpInputErr10)}else n=this.langService.errorMsg.originAndDestErr;null!=n?this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:n}):(this.langService.loader=!0,this.isLogedinReq=!0,this.userLogged||(this.langService.loader=!1,this.isLogedinReq=this.userService.loginRequired(),this.isLogedinReq&&this.store.dispatch(new T.d)),(this.userLogged||!this.isLogedinReq)&&(this.langService.loader=!0,t.userLogged=this.userLogged,t.ftBooking=t.ftBooking||"FT"==t.journeyQuota,this.modifyInpForm.controls.ftBooking.setValue(t.ftBooking),this.returnTourPackage&&(t.journeyType="RTPO"==this.modifyInpForm.controls.bookingType.value?4:3),this.webService.tbisWithAvl(t).subscribe(e=>{this.langService.loader=!1,null!=e.errorMessage&&null!=e.errorMessage?"true"==e.oneStopJourny?this.confirmationService.confirm({key:"modifyForm",message:e.errorMessage,acceptLabel:this.langService.lang.yes,rejectLabel:this.langService.lang.no,acceptVisible:!0,rejectVisible:!0,accept:()=>{this.fetchIndirectTBIS(t)}}):this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.errorMessage}):(this.store.dispatch(new l.m(t)),this.store.dispatch(new l.A(e)))})))}enableForm(){this.modifyInpForm.controls.origin.enable(),this.modifyInpForm.controls.destination.enable(),this.modifyInpForm.controls.journeyClass.enable()}fetchIndirectTBIS(e){this.langService.loader=!0,this.webService.indirectTBISWithAvl(e).subscribe(t=>{this.langService.loader=!1,console.log("IndirectTBISWithAvl"+JSON.stringify(t)),null!=t.errorMessage&&null!=t.errorMessage?this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+t.errorMessage}):(this.store.dispatch(new l.m(e)),this.store.dispatch(new l.A(t)))})}processTrainData(e,t){let n,i;e.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses),e.avlClasses.reverse(),null!=e.classAvlDTO&&(e.classAvlDTO=Array.isArray(e.classAvlDTO)?e.classAvlDTO:Array.of(e.classAvlDTO),e.classAvlDTO.reverse(),e.classAvlDTO.forEach(e=>{e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList)})),n=e.departureTime.split(":"),i=e.duration.split(":");let a=new Date(t.getTime());a.setHours(+n[0],+n[1],0,0),e.journeyDate=new Date(a),a.setMinutes(a.getMinutes()+60*+i[0]+ +i[1]),e.arivalDate=a,e.bgColor=this.bgColor(e)}bgColor(e){return 1==e.trainOwner?"train-type-IRCTC":e.trainType.indexOf("SV")>=0?"train-type-SV":e.trainType.indexOf("ST")>=0?"train-type-ST":e.trainType.indexOf("SP")>=0?"train-type-SP":e.trainType.indexOf("S")>=0||e.trainType.indexOf("JS")>=0?"train-type-S":e.trainType.indexOf("R")>=0?"train-type-R":e.trainType.indexOf("G")>=0?"train-type-G":e.trainType.indexOf("D")>=0?"train-type-D":"train-type-O"}stationList(e,t){"from"==t&&(this.lastSearchString=this.modifyInpForm.controls.origin.value,e.query=this.lastSearchString),this.stationFilterService.filterStations(e.query,this.langService.langChoice,t).subscribe(e=>{this.stnList=e})}onClickETicket(){this.oldDate=new Date,this.modifyInpForm.controls.ticketType.setValue("E"),this.tatkalQuota=!0,this.initQuotas()}onClickITicket(){this.modifyInpForm.controls.ticketType.setValue("U"),this.tatkalQuota=!1,this.initQuotas(),this.oldDate=new Date,"PT"!=this.modifyInpForm.controls.journeyQuota.value&&"TQ"!=this.modifyInpForm.controls.journeyQuota.value||(this.modifyInpForm.controls.journeyQuota.setValue(""),this.nextday=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+this.calenderDay)),this.oldDate=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+6),this.modifyInpForm.controls.journeyDate.value<this.oldDate&&this.modifyInpForm.controls.journeyDate.setValue(null),this.modifyInpForm.controls.ftBooking.setValue(!1)}onClickConcession(e){if(this.userService.quota="GN","PT"===this.modifyInpForm.controls.journeyQuota.value||"TQ"===this.modifyInpForm.controls.journeyQuota.value||"FT"===this.modifyInpForm.controls.journeyQuota.value)return this.modifyInpForm.controls.concessionBooking.setValue(!1),void this.modifyInpForm.controls.conBookingJournalist.setValue(!1);this.modifyInpForm.controls.concessionBooking.value&&"D"==e?(this.ariaMsg=this.langService.ariaMsg.jpInputInfo3,this.confirmationService.confirm({key:"modifyForm",message:this.langService.errorMsg.jpInputInfo3,acceptLabel:this.langService.lang.ok,acceptVisible:!0,rejectVisible:!1,accept:()=>{this.modifyInpForm.controls.conBookingJournalist.setValue(!1),this.modifyInpForm.controls.passBooking.setValue(!1),this.initQuotas()},reject:()=>{this.modifyInpForm.controls.concessionBooking.setValue(!1),this.initQuotas()}})):this.modifyInpForm.controls.conBookingJournalist.value&&"J"==e?(this.ariaMsg=this.langService.ariaMsg.jpInputInfo4,this.confirmationService.confirm({key:"modifyForm",message:this.langService.errorMsg.jpInputInfo4,acceptLabel:this.langService.lang.ok,acceptVisible:!0,rejectVisible:!1,accept:()=>{this.modifyInpForm.controls.concessionBooking.setValue(!1),this.modifyInpForm.controls.passBooking.setValue(!1),this.initQuotas()},reject:()=>{this.modifyInpForm.controls.conBookingJournalist.setValue(!1),this.initQuotas()}})):"P"==e&&this.modifyInpForm.controls.passBooking.value?(this.ariaMsg=this.langService.ariaMsg.jpInputInfo5,this.confirmationService.confirm({key:"modifyForm",message:this.langService.errorMsg.jpInputInfo5,acceptLabel:this.langService.lang.ok,rejectLabel:this.langService.lang.cancel,accept:()=>{this.modifyInpForm.controls.concessionBooking.setValue(!1),this.modifyInpForm.controls.conBookingJournalist.setValue(!1),this.userService.quota="PB",this.initQuotas()},reject:()=>{this.modifyInpForm.controls.passBooking.setValue(!1),this.initQuotas()}})):this.initQuotas()}onClickLoyaltyRedemptionBooking(){this.iniClasses()}validateLogin(){this.store.select(r.a).subscribe(e=>{void 0===e&&this.store.dispatch(new T.d)})}onFocus(){this.store.select(r.a).subscribe(e=>{void 0===e&&(this.isLogedinReq=this.userService.loginRequired(),this.isLogedinReq&&this.store.dispatch(new T.d))})}selectStation(e,t){if(null==e.sc)return event.stopPropagation(),this.modifyInpForm.controls.origin.setValue(this.lastSearchString),!1;"to"==t?this.modifyInpForm.controls.destination.setValue(e.sn+" - "+e.sc+" "+e.ct):this.modifyInpForm.controls.origin.setValue(e.sn+" - "+e.sc+" "+e.ct),e.fromTo&&(this.modifyInpForm.controls.destination.setValue(e.snTo+" - "+e.scTo+" "+e.ctTo),Object(s.a)(400).subscribe(()=>{this.jdCalender.inputfieldViewChild.nativeElement.focus()}))}onChangeQuota(){var e,t,n;this.modifyInpForm.controls.passBooking||(this.userService.quota="GN"),"GN"!=this.modifyInpForm.controls.journeyQuota.value&&"DP"!=this.modifyInpForm.controls.journeyQuota.value&&"LD"!=this.modifyInpForm.controls.journeyQuota.value&&"SS"!=this.modifyInpForm.controls.journeyQuota.value?(this.modifyInpForm.controls.passBooking.setValue(!1),this.modifyInpForm.controls.passBooking.disable()):this.modifyInpForm.controls.passBooking.enable(),this.iniClasses(),"FT"===this.modifyInpForm.controls.journeyQuota.value?this.nextday=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+364):"PT"===this.modifyInpForm.controls.journeyQuota.value||"TQ"===this.modifyInpForm.controls.journeyQuota.value?(this.nextday=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+5),this.modifyInpForm.controls.journeyDate.value>this.nextday&&this.modifyInpForm.controls.journeyDate.setValue(null),this.modifyInpForm.controls.concessionBooking.setValue(!1),this.modifyInpForm.controls.conBookingJournalist.setValue(!1)):this.returnTourPackage?this.rtpDatePatch():(this.nextday=new Date(null===(e=this.oldDate)||void 0===e?void 0:e.getFullYear(),null===(t=this.oldDate)||void 0===t?void 0:t.getMonth(),(null===(n=this.oldDate)||void 0===n?void 0:n.getDate())+this.calenderDay),this.showConc=!this.MP_USER||"PH"!==this.modifyInpForm.controls.journeyQuota.value)}onChangeJDate(){var e=new Date(this.oldDate.getFullYear(),this.oldDate.getMonth(),this.oldDate.getDate()+5);this.tatkalQuota=!(this.modifyInpForm.controls.journeyDate.value>e||this.returnTourPackage),this.initQuotas()}confirmMsg(){"HP"===this.modifyInpForm.controls.journeyQuota.value&&(this.ariaMsg=this.langService.ariaMsg.jpInputInfo1,this.confirmationService.confirm({key:"modifyForm",message:this.langService.errorMsg.jpInputInfo1,acceptLabel:this.langService.lang.ok,acceptVisible:!0,rejectVisible:!1,accept:()=>{}})),"SS"===this.modifyInpForm.controls.journeyQuota.value&&(this.ariaMsg=this.langService.ariaMsg.jpInputInfo2,this.confirmationService.confirm({key:"modifyForm",message:this.langService.errorMsg.jpInputInfo2,acceptLabel:this.langService.lang.ok,acceptVisible:!0,rejectVisible:!1,accept:()=>{}})),"DP"===this.modifyInpForm.controls.journeyQuota.value&&this.confirmationService.confirm({message:this.langService.errorMsg.jpInputInfo5,acceptLabel:this.langService.lang.ok,rejectLabel:this.langService.lang.cancel,accept:()=>{this.userService.quota="PB",this.modifyInpForm.controls.passBooking.setValue(!0)},reject:()=>{this.modifyInpForm.controls.passBooking.setValue(!1),this.modifyInpForm.controls.journeyQuota.setValue("GN")}})}rtpDatePatch(){this.showConc=!1;let e=this.modifyInpForm.controls.bookingType.value;if(e=e.slice(3),"O"==e){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+this.calenderDay);this.oldDate=this.rtpDate[0],this.nextday=t<this.rtpDate[1]?t:this.rtpDate[1]}else this.oldDate=this.rtpDate[2],this.nextday=this.rtpDate[3]}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(S.d),o.Ub(g.b),o.Ub(c.a),o.Ub(u.a),o.Ub(b.a),o.Ub(d.a),o.Ub(h.a),o.Ub(k.a),o.Ub(I.a),o.Ub(d.d),o.Ub(m.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-modify-search"]],viewQuery:function(e,t){var n;1&e&&o.bd(M,!0),2&e&&o.Hc(n=o.jc())&&(t.jdCalender=n.first)},decls:67,vars:33,consts:[["key","modifyForm",3,"header","closable"],[1,"layer_2","col-sm-12","jp-form"],["novalidate","",3,"formGroup","ngSubmit"],["f","ngForm"],[1,"col-md-1"],[1,"col-md-9","col-sm-12",2,"padding","0px"],[1,"row","form-inline","modifyForm"],[1,"col-lg-2","col-md-3","col-sm-6","col-xs-12","iWidth","ui-float-label","fromMargin"],[1,"icn"],[1,"fa","fa-location-arrow",2,"margin","3px 0px 0px 8px"],["formControlName","origin","delay","100","placeholder","FROM *","id","origin",3,"autoHighlight","suggestions","completeMethod","onSelect","onFocus"],["autocompleteOrigin",""],["pTemplate","item","header","s == disable"],["for","origin",1,"hidden-lg","hidden-md","hidden-sm",2,"color","#fff !important","opacity","0.5"],[1,"col-sm-push-12","hidden-xs","modifyExchange",3,"click"],["aria-hidden","true",1,"fa","fa-exchange"],[1,"col-xs-push-12","hidden-lg","hidden-md","hidden-sm","modifyExchange",3,"click"],["aria-hidden","true",1,"fa","fa-exchange","rotate90"],[1,"col-lg-2","col-md-3","col-sm-6","col-xs-12","iWidth","ui-float-label"],[1,"fa","fa-map-marker",2,"margin","3px 0px 0px 8px"],["formControlName","destination","delay","100","placeholder","TO *","id","destination",3,"autoHighlight","suggestions","completeMethod","onFocus","onSelect"],["autocompleteDest",""],["pTemplate","item"],["for","destination",1,"hidden-lg","hidden-md","hidden-sm",2,"color","#fff !important","opacity","0.5"],[1,"fa","fa-calendar",2,"margin","3px 0px 0px 8px"],["id","journeyDate","formControlName","journeyDate","dateFormat","dd/mm/yy","placeholder","DD/MM/YYYY *",3,"minDate","maxDate","onSelect"],["jdCalender",""],["for","jDate",1,"hidden-lg","hidden-md","hidden-sm",2,"color","#fff !important","opacity","0.5"],[1,"fa","fa-briefcase",2,"margin","3px 0px 0px 8px"],["formControlName","journeyClass",3,"options"],["for","journeyClass",1,"hidden-lg","hidden-md","hidden-sm",2,"color","#fff !important","opacity","0.5"],[1,"col-lg-2","col-md-3","col-sm-6","col-xs-12","iWidth","ui-float-label","padQuota"],[1,"fa","fa-th-large",2,"margin","3px 0px 0px 8px"],["formControlName","journeyQuota","id","journeyQuota",3,"options","placeholder","onChange","onFocus"],["for","journeyQuota",1,"hidden-lg","hidden-md","hidden-sm",2,"color","#fff !important","opacity","0.5"],[1,"row","form-inline","modifyForm","mTop20"],["type","checkbox","name","dateSpecific","id","dateSpecific","formControlName","dateSpecific","aria-label","Check to fetch trains runs on other days than you are searching for.",1,"css-checkbox"],["for","dateSpecific",1,"css-label_c","t_c","modifyCheckBox"],[1,"mobile-pad",2,"padding-left","40px"],["type","checkbox","name","availableBerth","id","availableBerth","formControlName","availableBerth","aria-label","Check for Available Vacant Berth",1,"css-checkbox"],["for","availableBerth",1,"css-label_c","t_c","modifyCheckBox"],["class","mobile-pad","style","padding-left: 40px;",4,"ngIf"],[1,"col-md-2","text-center","pull-left","col-sm-offset-3","col-sm-6","col-xs-12","sBtn"],["type","submit",1,"hidden-xs","search_btn","btn"],[2,"font-size","18px"],["type","submit",1,"hidden-sm","hidden-md","hidden-lg","search_btn","btn"],["class","disable-selection",4,"ngIf"],[4,"ngIf"],[1,"disable-selection"],["style","font-size: 80%;",4,"ngIf"],[2,"font-size","80%"],["type","checkbox","name","concessionBooking","id","concessionBooking","formControlName","concessionBooking","aria-label","Check for DIVYAANG Concession Booking.",1,"css-checkbox",3,"change"],["for","concessionBooking",1,"css-label_c","t_c","modifyCheckBox"],["type","checkbox","name","conBookingJournalist","id","conBookingJournalist","formControlName","conBookingJournalist","aria-label","Check for Journalist Concession Booking.",1,"css-checkbox",3,"change"],["for","conBookingJournalist",1,"css-label_c","t_c","modifyCheckBox"],["type","checkbox","name","passBooking","id","passBooking","formControlName","passBooking","aria-label","Check for pass Booking",1,"css-checkbox",3,"change"],["for","passBooking",1,"css-label_c","t_c","modifyCheckBox"]],template:function(e,t){if(1&e){const e=o.bc();o.Vb(0,"p-confirmDialog",0),o.ac(1,"div",1),o.ac(2,"form",2,3),o.ic("ngSubmit",(function(){return t.getTrainList()})),o.Vb(4,"div",4),o.ac(5,"div",5),o.ac(6,"div",6),o.ac(7,"div",7),o.ac(8,"span",8),o.Vb(9,"i",9),o.Zb(),o.ac(10,"p-autoComplete",10,11),o.ic("completeMethod",(function(e){return t.stationList(e,"from")}))("onSelect",(function(e){return t.selectStation(e,"from")}))("onFocus",(function(t){return o.Kc(e),o.Ic(11).handleDropdownClick(t)})),o.Rc(12,R,2,2,"ng-template",12),o.Zb(),o.ac(13,"label",13),o.Tc(14),o.Zb(),o.ac(15,"span"),o.ac(16,"a",14),o.ic("click",(function(){return t.exchangeToFrom()})),o.Vb(17,"i",15),o.Zb(),o.ac(18,"a",16),o.ic("click",(function(){return t.exchangeToFrom()})),o.Vb(19,"i",17),o.Zb(),o.Zb(),o.Zb(),o.ac(20,"div",18),o.ac(21,"span",8),o.Vb(22,"i",19),o.Zb(),o.ac(23,"p-autoComplete",20,21),o.ic("completeMethod",(function(e){return t.stationList(e,"to")}))("onFocus",(function(t){return o.Kc(e),o.Ic(24).handleDropdownClick(t)}))("onSelect",(function(e){return t.selectStation(e,"to")})),o.Rc(25,F,2,2,"ng-template",22),o.Zb(),o.ac(26,"label",23),o.Tc(27),o.Zb(),o.Zb(),o.ac(28,"div",18),o.ac(29,"span",8),o.Vb(30,"i",24),o.Zb(),o.ac(31,"p-calendar",25,26),o.ic("onSelect",(function(){return t.onChangeJDate()})),o.Zb(),o.ac(33,"label",27),o.Tc(34),o.Zb(),o.Zb(),o.ac(35,"div",18),o.ac(36,"span",8),o.Vb(37,"i",28),o.Zb(),o.Vb(38,"p-dropdown",29),o.nc(39,"className"),o.ac(40,"label",30),o.Tc(41),o.Zb(),o.Zb(),o.ac(42,"div",31),o.ac(43,"span",8),o.Vb(44,"i",32),o.Zb(),o.ac(45,"p-dropdown",33),o.ic("onChange",(function(){return t.onChangeQuota(),t.confirmMsg()}))("onFocus",(function(){return t.onFocus()})),o.Zb(),o.ac(46,"label",34),o.Tc(47),o.Zb(),o.Zb(),o.Zb(),o.ac(48,"div",35),o.ac(49,"span"),o.Vb(50,"input",36),o.ac(51,"label",37),o.Tc(52),o.Zb(),o.Zb(),o.ac(53,"span",38),o.Vb(54,"input",39),o.ac(55,"label",40),o.Tc(56),o.Zb(),o.Zb(),o.Rc(57,j,4,1,"span",41),o.Rc(58,V,4,1,"span",41),o.Rc(59,U,4,1,"span",41),o.Zb(),o.Zb(),o.ac(60,"div",42),o.ac(61,"button",43),o.ac(62,"span",44),o.Tc(63),o.Zb(),o.Zb(),o.ac(64,"button",45),o.ac(65,"span",44),o.Tc(66),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb()}2&e&&(o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.tc("closable",!1),o.Cb(2),o.tc("formGroup",t.modifyInpForm),o.Cb(8),o.tc("autoHighlight",!0)("suggestions",t.stnList),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.from),o.Cb(9),o.tc("autoHighlight",!0)("suggestions",t.stnList),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.to),o.Cb(4),o.tc("minDate",t.oldDate)("maxDate",t.nextday),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.date),o.Cb(4),o.Pc(o.yc(31,q)),o.tc("options",o.pc(39,28,t.classList,t.langService.langChoice)),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.class),o.Cb(4),o.Pc(o.yc(32,q)),o.uc("placeholder",null==t.langService.lang?null:t.langService.lang.selectQuota),o.tc("options",t.quotas),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.quota),o.Cb(5),o.Uc(null==t.langService.lang?null:t.langService.lang.flexibleWithDate),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.availableBerth),o.Cb(1),o.tc("ngIf",t.showConc&&!("3"==t.langService.suspandConc||"5"==t.langService.suspandConc||"6"==t.langService.suspandConc)),o.Cb(1),o.tc("ngIf",t.showConc&&!("2"==t.langService.suspandConc||"4"==t.langService.suspandConc||"5"==t.langService.suspandConc||"6"==t.langService.suspandConc)),o.Cb(1),o.tc("ngIf",t.showConc&&t.PASS_BOOKING),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.modifySearch),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.search))},directives:[y.a,S.z,S.o,S.i,O.a,S.n,S.g,d.e,x.a,A.a,S.a,p.o],pipes:[I.a],styles:["@media (max-width:991px) and (min-width:768px){.modifyForm[_ngcontent-%COMP%]   .iWidth[_ngcontent-%COMP%]{padding:10px 25px;margin-right:0!important}.modifyExchange[_ngcontent-%COMP%]{top:15px;margin-left:-12px}.layer_2[_ngcontent-%COMP%]   .sBtn[_ngcontent-%COMP%]{margin-top:10px!important}.mTop20[_ngcontent-%COMP%]{margin-left:10px}}@media (min-width:1465px){.layer_2[_ngcontent-%COMP%]   .sBtn[_ngcontent-%COMP%]{margin-top:10px;margin-left:-80px}}@media (max-width:1302px) and (min-width:991px){.layer_2[_ngcontent-%COMP%]   .sBtn[_ngcontent-%COMP%]{margin-left:-12px;margin-top:8px}.padQuota[_ngcontent-%COMP%]{padding-left:19px}}@media (max-width:1464px) and (min-width:1303px){.layer_2[_ngcontent-%COMP%]   .sBtn[_ngcontent-%COMP%]{margin-left:-55px;margin-top:8px}}@media (max-width:767px){.layer_2[_ngcontent-%COMP%]   .sBtn[_ngcontent-%COMP%]{margin-top:10px}.mobile-pad[_ngcontent-%COMP%]{padding-left:50px!important;width:100%}}"]}),e})();var _=n("R0Ic"),J=n("YyRF");const z=["pMenuItemContent",""];function K(e,t){if(1&e&&o.Vb(0,"span",5),2&e){const e=o.mc(2);o.tc("ngClass",e.item.icon)}}const H=function(e){return{"ui-state-disabled":e}};function Q(e,t){if(1&e){const e=o.bc();o.ac(0,"a",2),o.ic("click",(function(t){o.Kc(e);const n=o.mc();return n.menu.itemClick(t,n.item)})),o.Rc(1,K,1,1,"span",3),o.ac(2,"span",4),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.tc("ngClass",o.zc(9,H,e.item.disabled)),o.Db("href",e.item.url||null,o.Mc)("tabindex",e.item.disabled?null:"0")("data-automationid",e.item.automationId)("target",e.item.target)("title",e.item.title)("id",e.item.id),o.Cb(1),o.tc("ngIf",e.item.icon),o.Cb(2),o.Uc(e.item.label)}}function $(e,t){if(1&e&&o.Vb(0,"span",5),2&e){const e=o.mc(2);o.tc("ngClass",e.item.icon)}}const Y=function(){return{exact:!1}};function W(e,t){if(1&e){const e=o.bc();o.ac(0,"a",6),o.ic("click",(function(t){o.Kc(e);const n=o.mc();return n.menu.itemClick(t,n.item)})),o.Rc(1,$,1,1,"span",3),o.ac(2,"span",4),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.tc("routerLink",e.item.routerLink)("queryParams",e.item.queryParams)("routerLinkActive","ui-menuitem-link-active")("routerLinkActiveOptions",e.item.routerLinkActiveOptions||o.yc(18,Y))("ngClass",o.zc(19,H,e.item.disabled))("fragment",e.item.fragment)("queryParamsHandling",e.item.queryParamsHandling)("preserveFragment",e.item.preserveFragment)("skipLocationChange",e.item.skipLocationChange)("replaceUrl",e.item.replaceUrl)("state",e.item.state),o.Db("data-automationid",e.item.automationId)("target",e.item.target)("id",e.item.id)("tabindex",e.item.disabled?null:"0")("title",e.item.title),o.Cb(1),o.tc("ngIf",e.item.icon),o.Cb(2),o.Uc(e.item.label)}}const X=["container"],ee=function(e){return{"ui-helper-hidden":e}};function te(e,t){if(1&e&&o.Vb(0,"li",7),2&e){const e=o.mc().$implicit;o.tc("ngClass",o.zc(1,ee,!1===e.visible))}}function ne(e,t){if(1&e&&(o.ac(0,"li",8),o.Tc(1),o.Zb()),2&e){const e=o.mc().$implicit;o.tc("ngClass",o.zc(3,ee,!1===e.visible)),o.Db("data-automationid",e.automationId),o.Cb(1),o.Uc(e.label)}}function ie(e,t){if(1&e&&o.Vb(0,"li",7),2&e){const e=o.mc().$implicit,t=o.mc().$implicit;o.tc("ngClass",o.zc(1,ee,!1===e.visible||!1===t.visible))}}function ae(e,t){if(1&e&&o.Vb(0,"li",10),2&e){const e=o.mc().$implicit,t=o.mc().$implicit;o.Jb(e.styleClass),o.tc("pMenuItemContent",e)("ngClass",o.zc(5,ee,!1===e.visible||!1===t.visible))("ngStyle",e.style)}}function se(e,t){if(1&e&&(o.Rc(0,ie,1,3,"li",5),o.Rc(1,ae,1,7,"li",9)),2&e){const e=t.$implicit;o.tc("ngIf",e.separator),o.Cb(1),o.tc("ngIf",!e.separator)}}function re(e,t){if(1&e&&(o.Rc(0,te,1,3,"li",5),o.Rc(1,ne,2,5,"li",6),o.Rc(2,se,2,2,"ng-template",4)),2&e){const e=t.$implicit;o.tc("ngIf",e.separator),o.Cb(1),o.tc("ngIf",!e.separator),o.Cb(1),o.tc("ngForOf",e.items)}}function le(e,t){if(1&e&&o.Rc(0,re,3,3,"ng-template",4),2&e){const e=o.mc(2);o.tc("ngForOf",e.model)}}function oe(e,t){if(1&e&&o.Vb(0,"li",7),2&e){const e=o.mc().$implicit;o.tc("ngClass",o.zc(1,ee,!1===e.visible))}}function ce(e,t){if(1&e&&o.Vb(0,"li",10),2&e){const e=o.mc().$implicit;o.Jb(e.styleClass),o.tc("pMenuItemContent",e)("ngClass",o.zc(5,ee,!1===e.visible))("ngStyle",e.style)}}function ue(e,t){if(1&e&&(o.Rc(0,oe,1,3,"li",5),o.Rc(1,ce,1,7,"li",9)),2&e){const e=t.$implicit;o.tc("ngIf",e.separator),o.Cb(1),o.tc("ngIf",!e.separator)}}function ge(e,t){if(1&e&&o.Rc(0,ue,2,2,"ng-template",4),2&e){const e=o.mc(2);o.tc("ngForOf",e.model)}}const pe=function(e){return{"ui-menu ui-widget ui-widget-content ui-corner-all":!0,"ui-menu-dynamic ui-shadow":e}},de=function(e,t){return{showTransitionParams:e,hideTransitionParams:t}},he=function(e){return{value:"visible",params:e}};function be(e,t){if(1&e){const e=o.bc();o.ac(0,"div",1,2),o.ic("click",(function(){return o.Kc(e),o.mc().preventDocumentDefault=!0}))("@overlayAnimation.start",(function(t){return o.Kc(e),o.mc().onOverlayAnimationStart(t)})),o.ac(2,"ul"),o.Rc(3,le,1,1,void 0,3),o.Rc(4,ge,1,1,void 0,3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Jb(e.styleClass),o.tc("ngClass",o.zc(8,pe,e.popup))("ngStyle",e.style)("@overlayAnimation",o.zc(13,he,o.Ac(10,de,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0!==e.popup),o.Cb(3),o.tc("ngIf",e.hasSubMenu()),o.Cb(1),o.tc("ngIf",!e.hasSubMenu())}}let me=(()=>{let e=class{constructor(e){this.menu=e}};return e.\u0275fac=function(t){return new(t||e)(o.Ub(Object(o.U)(()=>fe)))},e.\u0275cmp=o.Ob({type:e,selectors:[["","pMenuItemContent",""]],inputs:{item:["pMenuItemContent","item"]},attrs:z,decls:2,vars:2,consts:[["class","ui-menuitem-link ui-corner-all","role","menuitem",3,"ngClass","click",4,"ngIf"],["class","ui-menuitem-link ui-corner-all","role","menuitem",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],["role","menuitem",1,"ui-menuitem-link","ui-corner-all",3,"ngClass","click"],["class","ui-menuitem-icon",3,"ngClass",4,"ngIf"],[1,"ui-menuitem-text"],[1,"ui-menuitem-icon",3,"ngClass"],["role","menuitem",1,"ui-menuitem-link","ui-corner-all",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"]],template:function(e,t){1&e&&(o.Rc(0,Q,4,11,"a",0),o.Rc(1,W,4,21,"a",1)),2&e&&(o.tc("ngIf",!t.item.routerLink),o.Cb(1),o.tc("ngIf",t.item.routerLink))},directives:[p.o,p.m,i.f,i.e],encapsulation:2}),e})(),fe=(()=>{let e=class{constructor(e,t,n){this.el=e,this.renderer=t,this.cd=n,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions="225ms ease-out",this.hideTransitionOptions="195ms ease-in",this.onShow=new o.n,this.onHide=new o.n}toggle(e){this.visible?this.hide():this.show(e),this.preventDocumentDefault=!0}show(e){this.target=e.currentTarget,this.visible=!0,this.preventDocumentDefault=!0}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.popup&&(this.container=e.element,this.moveOnTop(),this.onShow.emit({}),this.appendOverlay(),J.a.absolutePosition(this.container,this.target),this.bindDocumentClickListener(),this.bindDocumentResizeListener());break;case"void":this.onOverlayHide(),this.onHide.emit({})}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.container):J.a.appendChild(this.container,this.appendTo))}restoreOverlayAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.container)}moveOnTop(){this.autoZIndex&&(this.container.style.zIndex=String(this.baseZIndex+ ++J.a.zindex))}hide(){this.visible=!1,this.cd.detectChanges()}onWindowResize(){this.hide()}itemClick(e,t){t.disabled?e.preventDefault():(t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t}),this.popup&&this.hide())}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen("document","click",()=>{this.preventDocumentDefault||this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.preventDocumentDefault=!1,this.target=null}ngOnDestroy(){this.popup&&(this.restoreOverlayAppend(),this.onOverlayHide())}hasSubMenu(){if(this.model)for(var e of this.model)if(e.items)return!0;return!1}};return e.\u0275fac=function(t){return new(t||e)(o.Ub(o.l),o.Ub(o.E),o.Ub(o.h))},e.\u0275cmp=o.Ob({type:e,selectors:[["p-menu"]],viewQuery:function(e,t){var n;1&e&&o.bd(X,!0),2&e&&o.Hc(n=o.jc())&&(t.containerViewChild=n.first)},inputs:{autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",model:"model",popup:"popup",style:"style",styleClass:"styleClass",appendTo:"appendTo"},outputs:{onShow:"onShow",onHide:"onHide"},decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],["container",""],[4,"ngIf"],["ngFor","",3,"ngForOf"],["class","ui-menu-separator ui-widget-content",3,"ngClass",4,"ngIf"],["class","ui-submenu-header ui-widget-header ui-corner-all",3,"ngClass",4,"ngIf"],[1,"ui-menu-separator","ui-widget-content",3,"ngClass"],[1,"ui-submenu-header","ui-widget-header","ui-corner-all",3,"ngClass"],["class","ui-menuitem ui-widget ui-corner-all",3,"pMenuItemContent","ngClass","ngStyle","class",4,"ngIf"],[1,"ui-menuitem","ui-widget","ui-corner-all",3,"pMenuItemContent","ngClass","ngStyle"]],template:function(e,t){1&e&&o.Rc(0,be,5,15,"div",0),2&e&&o.tc("ngIf",!t.popup||t.visible)},directives:[p.o,p.m,p.p,p.n,me],encapsulation:2,data:{animation:[Object(_.m)("overlayAnimation",[Object(_.j)("void",Object(_.k)({transform:"translateY(5%)",opacity:0})),Object(_.j)("visible",Object(_.k)({transform:"translateY(0)",opacity:1})),Object(_.l)("void => visible",Object(_.e)("{{showTransitionParams}}")),Object(_.l)("visible => void",Object(_.e)("{{hideTransitionParams}}"))])]}}),e})(),ve=(()=>{let e=class{};return e.\u0275mod=o.Sb({type:e}),e.\u0275inj=o.Rb({factory:function(t){return new(t||e)},imports:[[p.c,i.g],i.g]}),e})();var ye=n("z8Lm"),Ce=n("7CaW"),Se=n("+la4");let De=(()=>{class e{constructor(e){this.langService=e}transform(e,t){return{SV:this.langService.lang.SV,ST:this.langService.lang.ST,SP:this.langService.lang.SP,G:this.langService.lang.G,Y:this.langService.lang.Y,O:this.langService.lang.O,D:this.langService.lang.D,R:this.langService.lang.R,JS:this.langService.lang.JS,S:this.langService.lang.S}[e]||this.langService.lang.O}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a))},e.\u0275pipe=o.Tb({name:"trainType",type:e,pure:!0}),e})();function Te(e,t){if(1&e){const e=o.bc();o.ac(0,"td",17),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("cls",n.key,n.value)})),o.Vb(1,"input",18),o.ac(2,"label",19),o.Tc(3),o.nc(4,"className"),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Jb(n%2==0?"pull-left":"pull-right"),o.Cb(1),o.uc("name",e.key),o.uc("id",e.key),o.tc("checked",e.value),o.Cb(1),o.uc("for",e.key),o.Cb(1),o.Uc(o.qc(4,8,e.key,"",i.langService.langChoice))}}function ke(e,t){if(1&e){const e=o.bc();o.ac(0,"td",20),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc(2).filterClick("via",n.key,n.value)})),o.Vb(1,"input",18),o.ac(2,"label",19),o.Tc(3),o.nc(4,"stationName"),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc(2);o.Jb(n%2==0?"pull-left":"pull-right"),o.Cb(1),o.uc("name",e.key),o.uc("id",e.key),o.tc("checked",e.value),o.Cb(1),o.uc("for",e.key),o.Cb(1),o.Uc(o.qc(4,8,e.key,"",i.langService.langChoice))}}const Ie=function(){return{"margin-bottom":"10px"}};function Oe(e,t){if(1&e){const e=o.bc();o.ac(0,"p-panel",3),o.ac(1,"p-header",4),o.ac(2,"div",5),o.ac(3,"span",6),o.Tc(4),o.Zb(),o.ac(5,"span",7),o.ic("click",(function(){return o.Kc(e),o.mc().selectAll("via")}))("keydown.Enter",(function(){return o.Kc(e),o.mc().selectAll("via")})),o.Tc(6),o.Zb(),o.Zb(),o.Zb(),o.ac(7,"table",8),o.ac(8,"tr",9),o.Rc(9,ke,5,12,"td",16),o.nc(10,"keyvalue"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Pc(o.yc(8,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.fvs),o.Cb(2),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.selectAll," "),o.Cb(3),o.tc("ngForOf",o.oc(10,6,e.data.viaStn))}}function xe(e,t){if(1&e){const e=o.bc();o.ac(0,"p-panel",3),o.ac(1,"p-header",4),o.ac(2,"div",5),o.ac(3,"span",6),o.Tc(4),o.Zb(),o.Zb(),o.Zb(),o.ac(5,"div",21),o.ac(6,"p-slider",22),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc().waitingSliderTime=t}))("onChange",(function(){return o.Kc(e),o.mc().filterClick("waitingSlider",null,!0)})),o.Zb(),o.ac(7,"div",23),o.ac(8,"span",24),o.Tc(9),o.nc(10,"number"),o.nc(11,"number"),o.Zb(),o.ac(12,"span",25),o.Tc(13),o.nc(14,"number"),o.nc(15,"number"),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Pc(o.yc(22,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.waitTime),o.Cb(2),o.tc("ngModel",e.waitingSliderTime)("range",!0),o.Cb(3),o.Wc("",o.pc(10,10,14.4*e.waitingSliderTime[0]/60,"2.0-0"),":",o.pc(11,13,14.4*e.waitingSliderTime[0]%60,"2.0-0")," Hrs"),o.Cb(4),o.Wc("",o.pc(14,16,14.4*e.waitingSliderTime[1]/60,"2.0-0"),":",o.pc(15,19,14.4*e.waitingSliderTime[1]%60,"2.0-0")," Hrs")}}function Ae(e,t){if(1&e){const e=o.bc();o.ac(0,"td",26),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("train",n.key,n.value)})),o.Vb(1,"input",18),o.ac(2,"label",19),o.ac(3,"span",27),o.Tc(4),o.nc(5,"trainType"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc();o.Cb(1),o.uc("name",e.key),o.uc("id",e.key),o.tc("checked",e.value),o.Cb(1),o.uc("for",e.key),o.Cb(1),o.Kb("t-t-",e.key,""),o.Cb(1),o.Vc(" ",o.qc(5,8,e.key,"",n.langService.langChoice),"")}}function Me(e,t){if(1&e){const e=o.bc();o.ac(0,"td",28),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("depart",n.key,n.value)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("depart",n.key,n.value)})),o.ac(1,"span"),o.Tc(2),o.Zb(),o.Vb(3,"br"),o.ac(4,"span"),o.Tc(5),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Lb("",n%2==0?"pull-left":"pull-right"," ",e.value?"active":""," border-all filter-tm"),o.Cb(2),o.Uc(e.key),o.Cb(3),o.Uc(i.FilterLabelList[n])}}function Ze(e,t){if(1&e){const e=o.bc();o.ac(0,"div",21),o.ac(1,"p-slider",22),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc().depSliderTime=t}))("onChange",(function(){return o.Kc(e),o.mc().filterClick("departSlider",null,!0)})),o.Zb(),o.ac(2,"div",23),o.ac(3,"span",24),o.Tc(4),o.nc(5,"number"),o.nc(6,"number"),o.Zb(),o.ac(7,"span",25),o.Tc(8),o.nc(9,"number"),o.nc(10,"number"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.tc("ngModel",e.depSliderTime)("range",!0),o.Cb(3),o.Wc("",o.pc(5,6,14.4*e.depSliderTime[0]/60,"2.0-0"),":",o.pc(6,9,14.4*e.depSliderTime[0]%60,"2.0-0")," Hrs"),o.Cb(4),o.Wc("",o.pc(9,12,14.4*e.depSliderTime[1]/60,"2.0-0"),":",o.pc(10,15,14.4*e.depSliderTime[1]%60,"2.0-0")," Hrs")}}function we(e,t){if(1&e){const e=o.bc();o.ac(0,"td",29),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("arival",n.key,n.value)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("arival",n.key,n.value)})),o.ac(1,"span"),o.Tc(2),o.Zb(),o.Vb(3,"br"),o.ac(4,"span"),o.Tc(5),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Lb("",n%2==0?"pull-left":"pull-right"," ",e.value?"active":""," border-all filter-tm"),o.Cb(2),o.Uc(e.key),o.Cb(3),o.Uc(i.FilterLabelList[n])}}function Le(e,t){if(1&e){const e=o.bc();o.ac(0,"div",21),o.ac(1,"p-slider",22),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc().arrSliderTime=t}))("onChange",(function(){return o.Kc(e),o.mc().filterClick("arivalSlider",null,!0)})),o.Zb(),o.ac(2,"div",23),o.ac(3,"span",24),o.Tc(4),o.nc(5,"number"),o.nc(6,"number"),o.Zb(),o.ac(7,"span",25),o.Tc(8),o.nc(9,"number"),o.nc(10,"number"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.tc("ngModel",e.arrSliderTime)("range",!0),o.Cb(3),o.Wc("",o.pc(5,6,14.4*e.arrSliderTime[0]/60,"2.0-0"),":",o.pc(6,9,14.4*e.arrSliderTime[0]%60,"2.0-0")," Hrs"),o.Cb(4),o.Wc("",o.pc(9,12,14.4*e.arrSliderTime[1]/60,"2.0-0"),":",o.pc(10,15,14.4*e.arrSliderTime[1]%60,"2.0-0")," Hrs")}}function Ne(e,t){if(1&e){const e=o.bc();o.ac(0,"td",20),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("source",n.key,n.value)})),o.Vb(1,"input",18),o.ac(2,"label",19),o.Tc(3),o.nc(4,"stationName"),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Jb(n%2==0?"pull-left":"pull-right"),o.Cb(1),o.uc("name",e.key),o.uc("id",e.key),o.tc("checked",e.value),o.Cb(1),o.uc("for",e.key),o.Cb(1),o.Uc(o.qc(4,8,e.key,"",i.langService.langChoice))}}function Re(e,t){if(1&e){const e=o.bc();o.ac(0,"td",20),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().filterClick("destination",n.key,n.value)})),o.Vb(1,"input",18),o.ac(2,"label",19),o.Tc(3),o.nc(4,"stationName"),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Jb(n%2==0?"pull-left":"pull-right"),o.Cb(1),o.uc("name",e.key),o.uc("id",e.key),o.tc("checked",e.value),o.Cb(1),o.uc("for",e.key),o.Cb(1),o.Uc(o.qc(4,8,e.key,"",i.langService.langChoice))}}const Pe=function(){return[]};let Be=(()=>{class e{constructor(e){this.langService=e,this.applyFilter=new o.n,this.depSliderTime=[0,100],this.arrSliderTime=[0,100],this.waitingSliderTime=[0,100]}ngOnInit(){this.data=Object.assign({},this.filterData),this.FilterLabelList=[],this.FilterLabelList.push("Early Morning"),this.FilterLabelList.push("Morning"),this.FilterLabelList.push("Mid Day"),this.FilterLabelList.push("Night"),this.depSliderTime=this.data.departSlider,this.arrSliderTime=this.data.arivalSlider,this.waitingSliderTime=this.data.waitTime}resetAll(){this.applyFilter.emit(null)}filterClick(e,t,n){"cls"==e?this.data.classes.set(t,!this.data.classes.get(t)):"train"==e?this.data.trainType.set(t,!this.data.trainType.get(t)):"source"==e?this.data.source.set(t,!this.data.source.get(t)):"destination"==e?this.data.destination.set(t,!this.data.destination.get(t)):"depart"==e?this.data.depart.set(t,!this.data.depart.get(t)):"arival"==e?this.data.arival.set(t,!this.data.arival.get(t)):"via"==e?this.data.viaStn.set(t,!this.data.viaStn.get(t)):"departSlider"==e?this.data.departSlider=this.depSliderTime:"arivalSlider"==e?this.data.arivalSlider=this.arrSliderTime:"waitingSlider"==e&&(this.data.waitTime=this.waitingSliderTime),this.applyFilter.emit(this.data)}selectAll(e){let t=new Map;"cls"==e?(this.data.classes.forEach((e,n)=>{t.set(n,!0)}),this.data.classes=t):"train"==e?this.data.trainType.forEach((e,t)=>{this.data.trainType.set(t,!0)}):"source"==e?this.data.source.forEach((e,t)=>{this.data.source.set(t,!0)}):"destination"==e?this.data.destination.forEach((e,t)=>{this.data.destination.set(t,!0)}):"depart"==e?this.data.depart.forEach((e,t)=>{this.data.depart.set(t,!0)}):"arival"==e?this.data.arival.forEach((e,t)=>{this.data.arival.set(t,!0)}):"via"==e&&this.data.viaStn.forEach((e,t)=>{this.data.viaStn.set(t,!0)}),this.applyFilter.emit(this.data)}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-filter"]],inputs:{filterData:"filterData"},outputs:{applyFilter:"applyFilter"},decls:79,vars:59,consts:[[1,"col-xs-12","reset"],[1,"pull-left"],["tabindex","0",1,"pull-right","theameColor",2,"cursor","pointer",3,"click","keydown.Enter"],["expandIcon","fa fa-angle-down","collapseIcon","fa fa-angle-up",3,"toggleable"],[1,"col-xs-11",2,"padding","0px 0px"],[1,"ui-helper-clearfix"],[1,"ui-panel-title"],["tabindex","0",1,"pull-right","select-all",3,"click","keydown.Enter"],[2,"width","100%"],[2,"padding","5px 0px"],["style","width: 50%;padding: 5px 0;",3,"class","click",4,"ngFor","ngForOf"],["expandIcon","fa fa-angle-down","collapseIcon","fa fa-angle-up",3,"toggleable","style",4,"ngIf"],["class","pull-left","style","width: 100%;padding: 5px 0;",3,"click",4,"ngFor","ngForOf"],[3,"class","click","keydown.Enter",4,"ngFor","ngForOf"],["class","sliderDiv",4,"ngIf"],["tabindex","0",3,"class","click","keydown.Enter",4,"ngFor","ngForOf"],["style","width: 100%;padding: 5px 0;",3,"class","click",4,"ngFor","ngForOf"],[2,"width","50%","padding","5px 0",3,"click"],["type","checkbox",1,"css-checkbox",3,"name","id","checked"],[1,"css-label_c",3,"for"],[2,"width","100%","padding","5px 0",3,"click"],[1,"sliderDiv"],[3,"ngModel","range","ngModelChange","onChange"],[2,"padding-top","5px"],[1,"pull-left","tm_2"],[1,"pull-right","tm_2"],[1,"pull-left",2,"width","100%","padding","5px 0",3,"click"],[2,"padding","0px 0px 0 7px"],[3,"click","keydown.Enter"],["tabindex","0",3,"click","keydown.Enter"]],template:function(e,t){1&e&&(o.ac(0,"div"),o.ac(1,"div",0),o.ac(2,"strong"),o.ac(3,"div",1),o.Tc(4),o.Zb(),o.ac(5,"div",2),o.ic("click",(function(){return t.resetAll()}))("keydown.Enter",(function(){return t.resetAll()})),o.Tc(6),o.Zb(),o.Zb(),o.Zb(),o.ac(7,"p-panel",3),o.ac(8,"p-header",4),o.ac(9,"div",5),o.ac(10,"span",6),o.Tc(11),o.Zb(),o.ac(12,"span",7),o.ic("click",(function(){return t.selectAll("cls")}))("keydown.Enter",(function(){return t.selectAll("cls")})),o.Tc(13),o.Zb(),o.Zb(),o.Zb(),o.ac(14,"table",8),o.ac(15,"tr",9),o.Rc(16,Te,5,12,"td",10),o.nc(17,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.Rc(18,Oe,11,9,"p-panel",11),o.Rc(19,xe,16,23,"p-panel",11),o.ac(20,"p-panel",3),o.ac(21,"p-header",4),o.ac(22,"div",5),o.ac(23,"span",6),o.Tc(24),o.Zb(),o.ac(25,"span",7),o.ic("click",(function(){return t.selectAll("train")}))("keydown.Enter",(function(){return t.selectAll("train")})),o.Tc(26),o.Zb(),o.Zb(),o.Zb(),o.ac(27,"table",8),o.ac(28,"tr",9),o.Rc(29,Ae,6,12,"td",12),o.nc(30,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.ac(31,"p-panel",3),o.ac(32,"p-header",4),o.ac(33,"div",5),o.ac(34,"span",6),o.Tc(35),o.Zb(),o.ac(36,"span",7),o.ic("click",(function(){return t.selectAll("depart")}))("keydown.Enter",(function(){return t.selectAll("depart")})),o.Tc(37),o.Zb(),o.Zb(),o.Zb(),o.ac(38,"table",8),o.ac(39,"tr",9),o.ac(40,"strong"),o.Rc(41,Me,6,6,"td",13),o.nc(42,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Rc(43,Ze,11,18,"div",14),o.ac(44,"p-panel",3),o.ac(45,"p-header",4),o.ac(46,"div",5),o.ac(47,"span",6),o.Tc(48),o.Zb(),o.ac(49,"span",7),o.ic("click",(function(){return t.selectAll("arival")}))("keydown.Enter",(function(){return t.selectAll("arival")})),o.Tc(50),o.Zb(),o.Zb(),o.Zb(),o.ac(51,"table",8),o.ac(52,"tr",9),o.ac(53,"strong"),o.Rc(54,we,6,6,"td",15),o.nc(55,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Rc(56,Le,11,18,"div",14),o.ac(57,"p-panel",3),o.ac(58,"p-header",4),o.ac(59,"div",5),o.ac(60,"span",6),o.Tc(61),o.Zb(),o.ac(62,"span",7),o.ic("click",(function(){return t.selectAll("source")}))("keydown.Enter",(function(){return t.selectAll("source")})),o.Tc(63),o.Zb(),o.Zb(),o.Zb(),o.ac(64,"table",8),o.ac(65,"tr",9),o.Rc(66,Ne,5,12,"td",16),o.nc(67,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.ac(68,"p-panel",3),o.ac(69,"p-header",4),o.ac(70,"div",5),o.ac(71,"span",6),o.Tc(72),o.Zb(),o.ac(73,"span",7),o.ic("click",(function(){return t.selectAll("destination")}))("keydown.Enter",(function(){return t.selectAll("destination")})),o.Tc(74),o.Zb(),o.Zb(),o.Zb(),o.ac(75,"table",8),o.ac(76,"tr",9),o.Rc(77,Re,5,12,"td",16),o.nc(78,"keyvalue"),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.refineResult),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.reset," "),o.Cb(1),o.Pc(o.yc(52,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.fjc),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(3),o.tc("ngForOf",o.oc(17,40,t.data.classes)),o.Cb(2),o.tc("ngIf",null!=t.data.viaStn),o.Cb(1),o.tc("ngIf",null!=t.waitingSliderTime&&t.waitingSliderTime!=o.yc(53,Pe)),o.Cb(1),o.Pc(o.yc(54,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.ftt),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(3),o.tc("ngForOf",o.oc(30,42,t.data.trainType)),o.Cb(2),o.tc("toggleable",!0),o.Cb(4),o.Wc("",t.data.indirectJourney?null==t.langService.lang?null:t.langService.lang.lap1:""," ",null==t.langService.lang?null:t.langService.lang.fdt,""),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(4),o.tc("ngForOf",o.oc(42,44,t.data.depart)),o.Cb(2),o.tc("ngIf",null!=t.depSliderTime&&t.depSliderTime!=o.yc(55,Pe)),o.Cb(1),o.Pc(o.yc(56,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Wc("",t.data.indirectJourney?null==t.langService.lang?null:t.langService.lang.lap2:""," ",null==t.langService.lang?null:t.langService.lang.fat,""),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(4),o.tc("ngForOf",o.oc(55,46,t.data.arival)),o.Cb(2),o.tc("ngIf",null!=t.arrSliderTime&&t.arrSliderTime!=o.yc(57,Pe)),o.Cb(1),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.fs),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(3),o.tc("ngForOf",o.oc(67,48,t.data.source)),o.Cb(2),o.Pc(o.yc(58,Ie)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.fd),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.selectAll," "),o.Cb(3),o.tc("ngForOf",o.oc(78,50,t.data.destination)))},directives:[Ce.a,d.c,p.n,p.o,Se.a,S.n,S.q],pipes:[p.i,I.a,k.a,p.g,De],styles:[".reset[_ngcontent-%COMP%]{border-bottom:1px solid #cacaca;padding-top:12px;padding-bottom:12px;font-size:inherit;margin-bottom:15px}.select-all[_ngcontent-%COMP%]{background:#d2effc;padding:0 8px;cursor:pointer}.filter-div[_ngcontent-%COMP%]{white-space:nowrap;overflow-x:hidden}.filter-tm[_ngcontent-%COMP%]{width:49.5%;padding:5px 0;text-align:center;margin:5px 0;font-size:medium}.t-t-SV[_ngcontent-%COMP%]{border-left:12px solid #69b802}.t-t-ST[_ngcontent-%COMP%]{border-left:12px solid #c8d600}.t-t-SP[_ngcontent-%COMP%]{border-left:12px solid #91061d}.t-t-S[_ngcontent-%COMP%]{border-left:12px solid #2570fa}.t-t-R[_ngcontent-%COMP%]{border-left:12px solid #d481fa}.t-t-G[_ngcontent-%COMP%]{border-left:12px solid #a7fbd0}.t-t-D[_ngcontent-%COMP%]{border-left:12px solid #fab700}.t-t-O[_ngcontent-%COMP%]{border-left:12px solid #f9f9f9}"]}),e})();var Ee=n("FpzA"),Fe=n("o+bY");class je{constructor(){this.passengerList=null,this.infantList=null,this.ticketChoiceSameCoach=!1,this.ignoreChoiceIfWl=!0,this.bookOnlyIfCnf=!1,this.concessionBooking=!1,this.addMealDetail=null}}var Ve=n("Gj2T"),Ue=n("K+I4");let qe=(()=>{class e{constructor(e,t){this.el=e,this.store=t,this.srcAttr=null}ngAfterViewInit(){this.canLazyLoad()?this.lazyLoadAvl():this.loadAvl()}canLazyLoad(){return window&&"IntersectionObserver"in window}lazyLoadAvl(){const e=new IntersectionObserver(t=>{t.forEach(({isIntersecting:t})=>{t&&(this.loadAvl(),e.unobserve(this.el.nativeElement))})});e.observe(this.el.nativeElement)}loadAvl(){this.store.dispatch(new l.p(this.data))}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(o.l),o.Ub(g.b))},e.\u0275dir=o.Pb({type:e,selectors:[["div","avlLazyLoad",""]],hostVars:1,hostBindings:function(e,t){2&e&&o.Db("data",t.srcAttr)},inputs:{data:"data"}}),e})();var Ge=n("c+7h"),_e=n("RDwO"),Je=n("9piC");function ze(e,t){if(1&e){const e=o.bc();o.ac(0,"span",26),o.ic("click",(function(){return o.Kc(e),o.mc(2).availabilityEnq()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.userRegcheckAvlmessage)}}function Ke(e,t){if(1&e&&(o.ac(0,"span",27),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("\u20b9 ",e.totalFare,"")}}function He(e,t){if(1&e){const e=o.bc();o.ac(0,"span",28),o.ic("click",(function(){return o.Kc(e),o.mc(2).availabilityEnq()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.userRegcheckAvlmessage)}}function Qe(e,t){if(1&e&&(o.ac(0,"span",29),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("\u20b9 ",e.totalFare,"")}}function $e(e,t){if(1&e&&(o.ac(0,"div",18),o.ac(1,"div",19),o.Tc(2),o.nc(3,"stationName"),o.nc(4,"stationName"),o.Zb(),o.ac(5,"div",20),o.Rc(6,ze,2,1,"span",21),o.Rc(7,Ke,2,1,"span",22),o.Zb(),o.ac(8,"div",23),o.ac(9,"div",4),o.ac(10,"span"),o.Tc(11),o.nc(12,"stationName"),o.Zb(),o.ac(13,"span"),o.Tc(14),o.Zb(),o.Zb(),o.Rc(15,He,2,1,"span",24),o.Rc(16,Qe,2,1,"span",25),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.Wc(" ",o.qc(3,10,e.sourceStation,"",e.langService.langChoice)," - ",o.qc(4,14,e.destStation,"",e.langService.langChoice)," "),o.Cb(4),o.tc("ngIf",!e.bookNowActive),o.Cb(1),o.tc("ngIf",e.bookNowActive),o.Cb(4),o.Wc("",null==e.langService.lang?null:e.langService.lang.via," ",o.qc(12,18,e.viaStation,"",e.langService.langChoice)," |"),o.Cb(3),o.Wc(" ",null==e.langService.lang?null:e.langService.lang.totalDuration,": ",e.journeyDetail.totalDuration,""),o.Cb(1),o.tc("ngIf",!e.bookNowActive),o.Cb(1),o.tc("ngIf",e.bookNowActive)}}function Ye(e,t){if(1&e&&(o.ac(0,"span",67),o.ac(1,"u"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc().index,t=o.mc();o.Cb(2),o.Wc("",null==t.langService.lang?null:t.langService.lang.lap," ",e+1,"")}}function We(e,t){if(1&e&&(o.ac(0,"span",72),o.Tc(1),o.nc(2,"titlecase"),o.nc(3,"quotaName"),o.Zb()),2&e){const e=o.mc(2).$implicit,t=o.mc();o.Cb(1),o.Vc("| ",o.oc(2,1,o.pc(3,3,null==t.QuotaMap?null:t.QuotaMap.get(e.trainNumber),t.langService.langChoice)),"")}}function Xe(e,t){if(1&e&&(o.ac(0,"span",72),o.Tc(1),o.nc(2,"titlecase"),o.nc(3,"quotaName"),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Vc("| ",o.oc(2,1,o.pc(3,3,e.quotaCode,e.langService.langChoice)),"")}}function et(e,t){if(1&e){const e=o.bc();o.ac(0,"span",68),o.Vb(1,"p-menu",69,70),o.ac(3,"span",71),o.ic("click",(function(t){o.Kc(e);const n=o.mc().$implicit,i=o.mc();return o.Ic(17).show(t),i.toggleQuotaCode(n.trainNumber)})),o.Tc(4),o.Rc(5,We,4,6,"span",38),o.Rc(6,Xe,4,6,"span",38),o.Zb(),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc();o.Cb(1),o.tc("popup",!0)("model",t.quotaList),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.quota," "),o.Cb(1),o.tc("ngIf",null!=t.QuotaMap),o.Cb(1),o.tc("ngIf",null==t.QuotaMap||!(null!=t.QuotaMap&&t.QuotaMap.has(e.trainNumber)))}}function tt(e,t){if(1&e&&(o.ac(0,"span",72),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.trainSchedule)}}function nt(e,t){1&e&&o.Vb(0,"span",73)}function it(e,t){if(1&e&&(o.ac(0,"span",57),o.Tc(1),o.nc(2,"titlecase"),o.nc(3,"quotaName"),o.Zb()),2&e){const e=o.mc(2).$implicit,t=o.mc();o.Cb(1),o.Vc(": ",o.oc(2,1,o.pc(3,3,null==t.QuotaMap?null:t.QuotaMap.get(e.trainNumber),t.langService.langChoice)),"")}}function at(e,t){if(1&e&&(o.ac(0,"span",57),o.Tc(1),o.nc(2,"titlecase"),o.nc(3,"quotaName"),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Vc(": ",o.oc(2,1,o.pc(3,3,e.quotaCode,e.langService.langChoice)),"")}}function st(e,t){if(1&e){const e=o.bc();o.ac(0,"span",74),o.Vb(1,"p-menu",69,70),o.ac(3,"span",75),o.ic("click",(function(t){o.Kc(e);const n=o.mc().$implicit,i=o.mc();return o.Ic(17).show(t),i.toggleQuotaCode(n.trainNumber)})),o.Tc(4),o.Rc(5,it,4,6,"span",76),o.Rc(6,at,4,6,"span",76),o.Zb(),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc();o.Cb(1),o.tc("popup",!0)("model",t.quotaList),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.quota," "),o.Cb(1),o.tc("ngIf",null!=t.QuotaMap),o.Cb(1),o.tc("ngIf",null==t.QuotaMap||!(null!=t.QuotaMap&&t.QuotaMap.has(e.trainNumber)))}}function rt(e,t){if(1&e&&(o.ac(0,"span",35),o.Tc(1),o.Zb()),2&e){const e=o.mc(2).$implicit;o.Cb(1),o.Vc("\u20b9 ",e.totalFare,"")}}function lt(e,t){if(1&e&&(o.ac(0,"span",35),o.Tc(1),o.nc(2,"number"),o.Zb()),2&e){const e=o.mc(3).$implicit;o.Cb(1),o.Vc("",o.pc(2,1,100*e.avlDayList[0].probability,"1.0-0"),"%")}}function ot(e,t){if(1&e&&(o.ac(0,"div",85),o.ac(1,"strong"),o.Tc(2),o.nc(3,"avlPipe"),o.Zb(),o.Rc(4,lt,3,4,"span",82),o.Zb()),2&e){const e=o.mc(2).$implicit,t=o.mc(3);o.Kb("col-xs-12 ",t.getAvlStyle(e.avlDayList[0].availablityStatus),""),o.Cb(2),o.Uc(o.oc(3,5,e.avlDayList[0].availablityStatus)),o.Cb(2),o.tc("ngIf",null!=e.avlDayList[0].probability)}}function ct(e,t){if(1&e){const e=o.bc();o.ac(0,"div",86),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.ac(3,"span",87),o.ic("click",(function(t){o.Kc(e);const n=o.mc(2).$implicit,i=o.mc(3);return o.Ic(13).show(t),i.toggleShowInfo(n)}))("mouseleave",(function(t){o.Kc(e);const n=o.mc(5),i=o.Ic(13);return i.hide(t),n.hideInfoHover(i)}))("mouseenter",(function(t){o.Kc(e);const n=o.mc(2).$implicit,i=o.mc(3);return o.Ic(13).show(t),i.toggleShowInfo(n)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2).$implicit;o.Cb(2),o.Vc("\u20b9 ",e.totalFare," ")}}function ut(e,t){if(1&e){const e=o.bc();o.ac(0,"div",81),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc(2).$implicit;return o.mc().setClass(t,n)}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc(2).$implicit;return o.mc().setClass(t,n)})),o.ac(1,"div",72),o.ac(2,"strong"),o.Tc(3),o.nc(4,"className"),o.Zb(),o.Zb(),o.ac(5,"div",50),o.ac(6,"strong"),o.ac(7,"span",4),o.Tc(8),o.Zb(),o.Rc(9,rt,2,1,"span",82),o.Zb(),o.Zb(),o.Rc(10,ot,5,7,"div",83),o.Rc(11,ct,4,1,"div",84),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc(2).$implicit,i=o.mc();var n=null;o.Kb("link ",e.enqClass==(null==i.selectedMap||null==(n=i.selectedMap.get(t.trainNumber))?null:n.selectedCls)?"selected-class":""," pre-avl"),o.Cb(3),o.Uc(o.pc(4,8,e.enqClass,i.langService.langChoice)),o.Cb(5),o.Uc(e.enqClass),o.Cb(1),o.tc("ngIf",null!=e.avlFound&&"true"==e.avlFound),o.Cb(1),o.tc("ngIf",null!=e.avlFound&&"true"==e.avlFound),o.Cb(1),o.tc("ngIf",null!=e.avlFound&&"true"==e.avlFound)}}function gt(e,t){if(1&e&&(o.ac(0,"div",91),o.ac(1,"span",92),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2).$implicit;o.Cb(2),o.Uc(e.errorMessage)}}function pt(e,t){if(1&e){const e=o.bc();o.ac(0,"div",81),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc(2).$implicit;return o.mc().setClass(t.enqClass,n,!0)}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc(2).$implicit;return o.mc().setClass(t.enqClass,n,!0)})),o.ac(1,"div",72),o.ac(2,"strong"),o.Tc(3),o.nc(4,"className"),o.Zb(),o.Zb(),o.ac(5,"div",50),o.ac(6,"strong"),o.ac(7,"span",4),o.Tc(8),o.Zb(),o.Zb(),o.Zb(),o.Rc(9,gt,3,1,"div",88),o.ac(10,"div",89),o.Tc(11),o.Vb(12,"span",90),o.Zb(),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc(2).$implicit,i=o.mc();var n=null;o.Kb("link ",e.enqClass==(null==i.selectedMap||null==(n=i.selectedMap.get(t.trainNumber))?null:n.selectedCls)?"selected-class":""," pre-avl"),o.Cb(3),o.Vc(" ",o.pc(4,7,e.enqClass,i.langService.langChoice),""),o.Cb(5),o.Uc(e.enqClass),o.Cb(1),o.tc("ngIf",null!=e.errorMessage),o.Cb(2),o.Vc(" ",null==i.langService.lang?null:i.langService.lang.refresh," ")}}function dt(e,t){if(1&e&&(o.ac(0,"td",79),o.Rc(1,ut,12,11,"div",80),o.Rc(2,pt,13,10,"div",80),o.Zb()),2&e){const e=t.$implicit;o.Cb(1),o.tc("ngIf",null!=e.avlFound&&"true"==e.avlFound),o.Cb(1),o.tc("ngIf",null!=e.avlFound&&"false"==e.avlFound)}}function ht(e,t){if(1&e&&(o.ac(0,"div",77),o.ac(1,"table"),o.ac(2,"tr"),o.Rc(3,dt,3,2,"td",78),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(3),o.tc("ngForOf",e.classAvlDTO)}}function bt(e,t){if(1&e){const e=o.bc();o.ac(0,"td",79),o.ac(1,"div",81),o.ic("click",(function(){o.Kc(e);const n=t.$implicit,i=o.mc(2).$implicit;return o.mc().setClass(n,i,!0)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit,i=o.mc(2).$implicit;return o.mc().setClass(n,i,!0)})),o.ac(2,"div"),o.ac(3,"strong"),o.Tc(4),o.nc(5,"className"),o.Zb(),o.Zb(),o.ac(6,"div",89),o.Tc(7),o.Vb(8,"span",90),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,i=o.mc(2).$implicit,a=o.mc();var n=null;o.Cb(1),o.Kb("",e==(null==a.selectedMap||null==(n=a.selectedMap.get(i.trainNumber))?null:n.selectedCls)?"selected-class":""," pre-avl"),o.Cb(3),o.Uc(o.pc(5,5,e,a.langService.langChoice)),o.Cb(3),o.Vc(" ",null==a.langService.lang?null:a.langService.lang.refresh," ")}}function mt(e,t){if(1&e&&(o.ac(0,"div",77),o.ac(1,"table"),o.ac(2,"tr"),o.Rc(3,bt,9,8,"td",78),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(3),o.tc("ngForOf",e.avlClasses)}}function ft(e,t){if(1&e){const e=o.bc();o.ac(0,"div",100),o.ic("click",(function(){o.Kc(e);const n=t.$implicit,i=o.mc(2).$implicit;return o.mc().setClass(n,i,!0)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit,i=o.mc(2).$implicit;return o.mc().setClass(n,i,!0)})),o.ac(1,"div",101),o.ac(2,"strong"),o.ac(3,"span",72),o.Tc(4),o.nc(5,"className"),o.Zb(),o.ac(6,"span",50),o.Tc(7),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc(3);o.Cb(4),o.Uc(o.pc(5,2,e,n.langService.langChoice)),o.Cb(3),o.Uc(e)}}function vt(e,t){if(1&e&&(o.ac(0,"div",61),o.Tc(1),o.Zb()),2&e){const e=o.mc(2).$implicit,t=o.mc();var n=null;o.Cb(1),o.Uc(null==t.trainMap||null==(n=t.trainMap.get(e.trainNumber))?null:n.showAvl.errorMessage)}}function yt(e,t){if(1&e){const e=o.bc();o.ac(0,"div",81),o.ic("click",(function(){o.Kc(e);const t=o.mc(3).$implicit,n=o.mc();var i=null;return n.checkAvailability(null==n.trainMap||null==(i=n.trainMap.get(t.trainNumber))?null:i.showAvl.preEnqDate)}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc(3).$implicit,n=o.mc();var i=null;return n.checkAvailability(null==n.trainMap||null==(i=n.trainMap.get(t.trainNumber))?null:i.showAvl.preEnqDate)})),o.Vb(1,"span",106),o.Zb()}}function Ct(e,t){if(1&e&&(o.ac(0,"span",35),o.Tc(1),o.nc(2,"number"),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Vc("",o.pc(2,1,100*e.probability,"1.0-0"),"%")}}function St(e,t){if(1&e){const e=o.bc();o.ac(0,"td",107),o.ac(1,"div",81),o.ic("click",(function(){o.Kc(e);const n=t.$implicit,i=t.index;return o.mc(4).selectAvl(n,i)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit,i=t.index;return o.mc(4).selectAvl(n,i)})),o.ac(2,"div"),o.ac(3,"strong"),o.Tc(4),o.nc(5,"date"),o.Zb(),o.Zb(),o.ac(6,"div",85),o.ac(7,"strong"),o.Tc(8),o.nc(9,"avlPipe"),o.Zb(),o.Rc(10,Ct,3,4,"span",82),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=o.mc(4);o.Cb(1),o.Kb("",n==i.avlIndex?"selected-class":""," pre-avl"),o.Cb(3),o.Uc(o.pc(5,9,e.availablityDate,"EEE, dd MMM")),o.Cb(2),o.Kb("col-xs-12 ",e.avlStyle,""),o.Cb(2),o.Uc(o.oc(9,12,e.availablityStatus)),o.Cb(2),o.tc("ngIf",null!=e.probability)}}function Dt(e,t){if(1&e){const e=o.bc();o.ac(0,"div",81),o.ic("click",(function(){o.Kc(e);const t=o.mc(3).$implicit,n=o.mc();var i=null;return n.checkAvailability(null==n.trainMap||null==(i=n.trainMap.get(t.trainNumber))?null:i.showAvl.nextEnqDate)}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc(3).$implicit,n=o.mc();var i=null;return n.checkAvailability(null==n.trainMap||null==(i=n.trainMap.get(t.trainNumber))?null:i.showAvl.nextEnqDate)})),o.Vb(1,"span",108),o.Zb()}}function Tt(e,t){if(1&e&&(o.ac(0,"div",102),o.ac(1,"table"),o.ac(2,"tr"),o.ac(3,"td",103),o.Rc(4,yt,2,0,"div",104),o.Zb(),o.Rc(5,St,11,14,"td",105),o.ac(6,"td",103),o.Rc(7,Dt,2,0,"div",104),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc(2).$implicit,t=o.mc();var n=null;const s=null!=(null==t.trainMap||null==(n=t.trainMap.get(e.trainNumber))?null:n.showAvl.preEnqDate);var i=null;const r=null==t.trainMap||null==(i=t.trainMap.get(e.trainNumber))?null:i.showAvl.avlDayList;var a=null;const l=null!=(null==t.trainMap||null==(a=t.trainMap.get(e.trainNumber))?null:a.showAvl.nextEnqDate);o.Cb(4),o.tc("ngIf",s),o.Cb(1),o.tc("ngForOf",r),o.Cb(2),o.tc("ngIf",l)}}function kt(e,t){if(1&e){const e=o.bc();o.ac(0,"div",61),o.ac(1,"p-tabMenu",93),o.Rc(2,ft,8,5,"ng-template",94),o.Zb(),o.ac(3,"div",95),o.ac(4,"div",96),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit;return o.mc().unsetClass(t.trainNumber)}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc().$implicit;return o.mc().unsetClass(t.trainNumber)})),o.Vb(5,"span",97),o.Zb(),o.Zb(),o.Vb(6,"div",98),o.Rc(7,vt,2,1,"div",60),o.Rc(8,Tt,8,3,"div",99),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc();var n=null;const a=null!=(null==t.trainMap||null==(n=t.trainMap.get(e.trainNumber))?null:n.showAvl.errorMessage);var i=null;const s=null==(null==t.trainMap||null==(i=t.trainMap.get(e.trainNumber))?null:i.showAvl.errorMessage);o.Cb(1),o.tc("model",e.avlClasses)("activeItem",t.selectedCls),o.Cb(6),o.tc("ngIf",a),o.Cb(1),o.tc("ngIf",s)}}function It(e,t){if(1&e&&(o.ac(0,"li"),o.ac(1,"pre",62),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(2),o.Uc(e.message)}}function Ot(e,t){if(1&e&&(o.ac(0,"ul"),o.Rc(1,It,3,1,"li",8),o.Zb()),2&e){const e=t.$implicit;o.Cb(1),o.tc("ngIf","AVL_DTLS"==e.paramName)}}function xt(e,t){if(1&e&&(o.ac(0,"div",61),o.Rc(1,Ot,2,1,"ul",1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.tc("ngForOf",e.fare.informationMessage)}}function At(e,t){if(1&e){const e=o.bc();o.ac(0,"span",109),o.Tc(1),o.ac(2,"span",110),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit;return o.mc().openTrainLiveNtes(t)})),o.Tc(3,"NTES website"),o.Zb(),o.Vb(4,"span",111),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.trainLateMsg1," "),o.Cb(3),o.tc("innerHTML",null==e.langService.lang?null:e.langService.lang.trainLateMsg2,o.Lc)}}function Mt(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.Tc(1,"Please check "),o.ac(2,"span",110),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit;return o.mc().openTrainLiveNtes(t)})),o.Tc(3,"NTES website"),o.Zb(),o.Tc(4," or "),o.ac(5,"a",112),o.Tc(6,"NTES app"),o.Zb(),o.Tc(7," for actual time before boarding"),o.Zb()}}function Zt(e,t){if(1&e){const e=o.bc();o.ac(0,"div",113),o.ac(1,"span"),o.Tc(2),o.Zb(),o.ac(3,"span",114),o.ic("click",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc();return n.toggleQuotaCode(t.trainNumber),n.CheckMultiLapAvl()}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc().$implicit,n=o.mc();return n.toggleQuotaCode(t.trainNumber),n.CheckMultiLapAvl()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(2),o.Xc("",null==e.langService.lang?null:e.langService.lang.lastUpdate," ",e.lastRefreshed," ",null==e.langService.lang?null:e.langService.lang.lastUpdateLast," ")}}function wt(e,t){if(1&e&&(o.ac(0,"div",115),o.ac(1,"span",116),o.ac(2,"span"),o.Tc(3),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(3),o.Wc("",null==e.langService.lang?null:e.langService.lang.waitDuration,": ",e.journeyDetail.waitingTimeHours,"")}}function Lt(e,t){if(1&e&&(o.ac(0,"div",117),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc(" NOTE: ",e.journeyDetail.info," ")}}function Nt(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"div",30),o.Vb(2,"span"),o.ac(3,"div",31),o.ac(4,"strong"),o.Rc(5,Ye,3,2,"span",32),o.Tc(6),o.Zb(),o.Zb(),o.ac(7,"div",33),o.ac(8,"span",34),o.Tc(9),o.ac(10,"span"),o.Tc(11,"M"),o.Zb(),o.ac(12,"span"),o.Tc(13,"T"),o.Zb(),o.ac(14,"span"),o.Tc(15,"W"),o.Zb(),o.ac(16,"span"),o.Tc(17,"T"),o.Zb(),o.ac(18,"span"),o.Tc(19,"F"),o.Zb(),o.ac(20,"span"),o.Tc(21,"S"),o.Zb(),o.ac(22,"span"),o.Tc(23,"S"),o.Zb(),o.Zb(),o.ac(24,"div",35),o.Rc(25,et,7,5,"span",36),o.ac(26,"strong"),o.ac(27,"span",37),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().getSchedule(n)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit;return o.mc().getSchedule(n)})),o.Rc(28,tt,2,1,"span",38),o.Rc(29,nt,1,0,"span",39),o.Vb(30,"span",40),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(31,"div",41),o.ac(32,"div",42),o.ac(33,"div",43),o.ac(34,"span",44),o.ac(35,"strong"),o.Tc(36),o.Zb(),o.Zb(),o.Tc(37),o.nc(38,"stationName"),o.nc(39,"date"),o.Zb(),o.ac(40,"div",45),o.ac(41,"span",46),o.ac(42,"span"),o.Tc(43),o.Zb(),o.Zb(),o.ac(44,"span",35),o.ac(45,"strong",44),o.Tc(46),o.Zb(),o.Tc(47),o.nc(48,"stationName"),o.nc(49,"date"),o.Zb(),o.Zb(),o.Vb(50,"div",47),o.ac(51,"div",48),o.Rc(52,st,7,5,"span",49),o.Zb(),o.ac(53,"div",50),o.ac(54,"div",51),o.Tc(55),o.Zb(),o.ac(56,"div",52),o.ac(57,"span"),o.Tc(58),o.Zb(),o.Zb(),o.ac(59,"div",53),o.ac(60,"span",54),o.Tc(61),o.Zb(),o.Zb(),o.Zb(),o.Vb(62,"div",47),o.ac(63,"div",48),o.ac(64,"div",4),o.Tc(65),o.nc(66,"stationName"),o.Zb(),o.ac(67,"div",35),o.Tc(68),o.nc(69,"stationName"),o.Zb(),o.Zb(),o.Vb(70,"div",47),o.ac(71,"div",50),o.ac(72,"div",53),o.Tc(73),o.nc(74,"date"),o.Zb(),o.ac(75,"div",55),o.ac(76,"span"),o.Tc(77,"M"),o.Zb(),o.ac(78,"span"),o.Tc(79,"T"),o.Zb(),o.ac(80,"span"),o.Tc(81,"W"),o.Zb(),o.ac(82,"span"),o.Tc(83,"T"),o.Zb(),o.ac(84,"span"),o.Tc(85,"F"),o.Zb(),o.ac(86,"span"),o.Tc(87,"S"),o.Zb(),o.ac(88,"span"),o.Tc(89,"S"),o.Zb(),o.Zb(),o.ac(90,"div",56),o.ac(91,"span",35),o.Tc(92),o.nc(93,"date"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(94,"div",47),o.ac(95,"div",57),o.Rc(96,ht,4,1,"div",58),o.Rc(97,mt,4,1,"div",58),o.Vb(98,"div",59),o.Zb(),o.Vb(99,"div",47),o.ac(100,"div"),o.Rc(101,kt,9,4,"div",60),o.Vb(102,"div",47),o.Rc(103,xt,2,1,"div",60),o.ac(104,"div",61),o.ac(105,"span",62),o.ac(106,"strong"),o.Rc(107,At,5,2,"span",63),o.Rc(108,Mt,8,0,"span",8),o.Zb(),o.Zb(),o.Zb(),o.Rc(109,Zt,4,3,"div",64),o.Vb(110,"div",47),o.Rc(111,wt,4,2,"div",65),o.Rc(112,Lt,2,1,"div",66),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,r=t.index,l=o.mc();var n=null;const c=null==(null==l.trainMap||null==(n=l.trainMap.get(e.trainNumber))?null:n.showAvl)&&null!=e.classAvlDTO&&e.classAvlDTO.length>0;var i=null;const u=null==(null==l.trainMap||null==(i=l.trainMap.get(e.trainNumber))?null:i.showAvl)&&null==e.classAvlDTO&&e.avlClasses.length>0&&null!=e.checkAvlFlag&&e.checkAvlFlag;var a=null,s=null;const g=null!=(null==l.trainMap||null==(s=l.trainMap.get(e.trainNumber))?null:s.showAvl);o.Cb(2),o.Kb("train-type ",e.bgColor,""),o.Cb(3),o.tc("ngIf",l.indirectJourney),o.Cb(1),o.Wc(" ",e.trainName," (",e.trainNumber,")"),o.Cb(3),o.Vc(" ",null==l.langService.lang?null:l.langService.lang.runsFromSourceOn,": "),o.Cb(1),o.Jb(e.runningMon),o.Cb(2),o.Jb(e.runningTue),o.Cb(2),o.Jb(e.runningWed),o.Cb(2),o.Jb(e.runningThu),o.Cb(2),o.Jb(e.runningFri),o.Cb(2),o.Jb(e.runningSat),o.Cb(2),o.Jb(e.runningSun),o.Cb(3),o.tc("ngIf",l.indirectJourney),o.Cb(3),o.tc("ngIf",!l.indirectJourney),o.Cb(1),o.tc("ngIf",l.indirectJourney),o.Cb(7),o.Vc("",e.departureTime," | "),o.Cb(1),o.Wc(" ",o.qc(38,80,e.fromStnCode,"",l.langService.langChoice)," | ",o.pc(39,84,e.journeyDate,"EEE, dd MMM")," "),o.Cb(6),o.Uc(e.duration),o.Cb(3),o.Vc("",e.arrivalTime," | "),o.Cb(1),o.Wc(" ",o.qc(48,87,e.toStnCode,"",l.langService.langChoice)," | ",o.pc(49,91,e.arivalDate,"EEE, dd MMM"),""),o.Cb(5),o.tc("ngIf",l.indirectJourney),o.Cb(3),o.Uc(e.departureTime),o.Cb(3),o.Uc(e.duration),o.Cb(3),o.Uc(e.arrivalTime),o.Cb(4),o.Uc(o.qc(66,94,e.fromStnCode,"",l.langService.langChoice)),o.Cb(3),o.Uc(o.qc(69,98,e.toStnCode,"",l.langService.langChoice)),o.Cb(5),o.Uc(o.pc(74,102,e.journeyDate,"EEE, dd MMM")),o.Cb(3),o.Jb(e.runningMon),o.Cb(2),o.Jb(e.runningTue),o.Cb(2),o.Jb(e.runningWed),o.Cb(2),o.Jb(e.runningThu),o.Cb(2),o.Jb(e.runningFri),o.Cb(2),o.Jb(e.runningSat),o.Cb(2),o.Jb(e.runningSun),o.Cb(4),o.Uc(o.pc(93,105,e.arivalDate,"EEE, dd MMM")),o.Cb(4),o.tc("ngIf",c),o.Cb(1),o.tc("ngIf",u),o.Cb(1),o.uc("data",e.trainNumber),o.Cb(2),o.Kb("no-pad dull-back ",null!=(null==l.trainMap||null==(a=l.trainMap.get(e.trainNumber))?null:a.showAvl)?"col-xs-12":"",""),o.Cb(1),o.tc("ngIf",g),o.Cb(2),o.tc("ngIf",null!=l.fare&&null!=l.fare&&null!=l.fare.informationMessage&&l.fare.informationMessage.length>0),o.Cb(4),o.tc("ngIf","Y"==l.delayBy),o.Cb(1),o.tc("ngIf","Y"!=l.delayBy),o.Cb(1),o.tc("ngIf",null!=l.lastRefreshed),o.Cb(2),o.tc("ngIf",r<(null==l.trainBtwnStns?null:l.trainBtwnStns.length)-1),o.Cb(1),o.tc("ngIf",r<(null==l.trainBtwnStns?null:l.trainBtwnStns.length)-1&&null!=l.journeyDetail.info)}}function Rt(e,t){if(1&e){const e=o.bc();o.ac(0,"button",118),o.ic("click",(function(){return o.Kc(e),o.mc().bookNow()}))("keydown.Enter",(function(){return o.Kc(e),o.mc().bookNow()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc();o.Kb("",e.bookNowActive&&e.bookingEnable&&!e.bookNowDisabled?"":"disable-book"," train_Search btnDefault"),o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.bookNow," ")}}function Pt(e,t){if(1&e){const e=o.bc();o.ac(0,"button",119),o.ic("click",(function(){return o.Kc(e),o.mc().showOtherDate()}))("keydown.Enter",(function(){return o.Kc(e),o.mc().checkAvailability()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc();o.vc("id","T_",null==e.train[0]?null:e.train[0].trainNumber,""),o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.otherDays," ")}}function Bt(e,t){if(1&e){const e=o.bc();o.ac(0,"button",120),o.ic("click",(function(){return o.Kc(e),o.mc().fetchChance()}))("keydown.Enter",(function(){return o.Kc(e),o.mc().fetchChance()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.cnfProbability1," ")}}function Et(e,t){if(1&e){const e=o.bc();o.ac(0,"span",122),o.ic("click",(function(t){o.Kc(e);const n=o.mc(2);var i=null;return o.Ic(13).show(t),n.toggleShowInfo(null==n.trainMap||null==(i=n.trainMap.get(null==n.train[0]?null:n.train[0].trainNumber))?null:i.showAvl)}))("mouseleave",(function(t){o.Kc(e);const n=o.mc(2),i=o.Ic(13);return i.hide(t),n.hideInfoHover(i)}))("mouseenter",(function(t){o.Kc(e);const n=o.mc(2);var i=null;return o.Ic(13).show(t),n.toggleShowInfo(null==n.trainMap||null==(i=n.trainMap.get(null==n.train[0]?null:n.train[0].trainNumber))?null:i.showAvl)})),o.Zb()}}function Ft(e,t){if(1&e&&(o.ac(0,"span"),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Rc(3,Et,1,0,"span",121),o.Zb()),2&e){const e=o.mc();var n=null,i=null;const t=null==(null==e.trainMap||null==(i=e.trainMap.get(null==e.train[0]?null:e.train[0].trainNumber))?null:i.showAvl.errorMessage)&&!e.indirectJourney;o.Cb(2),o.Vc("\u20b9 ",null==e.trainMap||null==(n=e.trainMap.get(null==e.train[0]?null:e.train[0].trainNumber))?null:n.showAvl.totalFare," "),o.Cb(1),o.tc("ngIf",t)}}function jt(e,t){if(1&e){const e=o.bc();o.ac(0,"span",124),o.ic("click",(function(t){o.Kc(e);const n=o.mc().$implicit,i=o.mc();var a=null;return o.Ic(13).show(t),i.toggleShowInfo(null==i.selectedMap||null==(a=i.selectedMap.get(n.trainNumber))?null:a.fare)}))("mouseleave",(function(t){o.Kc(e);const n=o.mc(2),i=o.Ic(13);return i.hide(t),n.hideInfoHover(i)}))("mouseenter",(function(t){o.Kc(e);const n=o.mc(2);return o.Ic(13).show(t),n.toggleShowInfo()})),o.Zb()}}function Vt(e,t){if(1&e&&(o.ac(0,"span"),o.Rc(1,jt,1,0,"span",123),o.Zb()),2&e){const e=t.$implicit,i=o.mc();var n=null;const a=null==i.selectedMap||null==(n=i.selectedMap.get(e.trainNumber))?null:n.bookNowActive;o.Cb(1),o.tc("ngIf",a)}}function Ut(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.baseFare,"* "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.baseFare,"INR",!0),"")}}function qt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.baseFare,"* "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.baseFare,"INR",!0),"")}}function Gt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.tktFare,"* "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.baseFare,"INR",!0),"")}}function _t(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.reservationCharge," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.reservationCharge,"INR",!0),"")}}function Jt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.superfastCharge," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.superfastCharge,"INR",!0),"")}}function zt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.otherCharges," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.otherCharge,"INR",!0),"")}}function Kt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.tatkalCharge," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.tatkalFare,"INR",!0),"")}}function Ht(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.totalGST," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.serviceTax,"INR",!0),"")}}function Qt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.cateringCharge,"# "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.cateringCharge,"INR",!0),"")}}function $t(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.dynamicFare," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.dynamicFare,"INR",!0),"")}}function Yt(e,t){if(1&e&&(o.ac(0,"li"),o.Tc(1),o.ac(2,"span",35),o.Tc(3),o.nc(4,"currency"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Vc("",null==e.langService.lang?null:e.langService.lang.fuelAmount," "),o.Cb(2),o.Vc(" ",o.qc(4,2,e.fare.fuelAmount,"INR",!0),"")}}function Wt(e,t){if(1&e&&(o.ac(0,"li"),o.ac(1,"pre",62),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(2),o.Uc(e.message)}}function Xt(e,t){if(1&e&&(o.ac(0,"ul"),o.Rc(1,Wt,3,1,"li",8),o.Zb()),2&e){const e=t.$implicit;o.Cb(1),o.tc("ngIf","FARE_BREAKUP"==e.paramName)}}function en(e,t){if(1&e){const e=o.bc();o.ac(0,"div",125),o.ic("click",(function(){o.Kc(e);const t=o.mc();return o.Ic(13).hide(),t.toggleShowInfo()})),o.ac(1,"div"),o.Vb(2,"span",126),o.Zb(),o.ac(3,"div",127),o.ac(4,"ul"),o.Rc(5,Ut,5,6,"li",8),o.Rc(6,qt,5,6,"li",8),o.Rc(7,Gt,5,6,"li",8),o.Rc(8,_t,5,6,"li",8),o.Rc(9,Jt,5,6,"li",8),o.Rc(10,zt,5,6,"li",8),o.Rc(11,Kt,5,6,"li",8),o.Rc(12,Ht,5,6,"li",8),o.Rc(13,Qt,5,6,"li",8),o.Rc(14,$t,5,6,"li",8),o.Rc(15,Yt,5,6,"li",8),o.Zb(),o.Vb(16,"div",128),o.ac(17,"span"),o.ac(18,"ul"),o.ac(19,"li"),o.Tc(20),o.ac(21,"span",35),o.Tc(22),o.nc(23,"currency"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(24,"div"),o.Rc(25,Xt,2,1,"ul",1),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(5),o.tc("ngIf",0!=e.fare.baseFare),o.Cb(1),o.tc("ngIf",0!=e.fare.baseFare&&0==(null==e.train?null:e.train.trainOwner)&&!e.indirectJourney),o.Cb(1),o.tc("ngIf",0!=e.fare.baseFare&&1==(null==e.train?null:e.train.trainOwner)&&!e.indirectJourney),o.Cb(1),o.tc("ngIf",0!=e.fare.reservationCharge),o.Cb(1),o.tc("ngIf",0!=e.fare.superfastCharge),o.Cb(1),o.tc("ngIf",0!=e.fare.otherCharge),o.Cb(1),o.tc("ngIf",0!=e.fare.tatkalFare),o.Cb(1),o.tc("ngIf",0!=e.fare.serviceTax),o.Cb(1),o.tc("ngIf",0!=e.fare.cateringCharge),o.Cb(1),o.tc("ngIf",0!=e.fare.dynamicFare),o.Cb(1),o.tc("ngIf",0!=e.fare.fuelAmount),o.Cb(5),o.Vc("",null==e.langService.lang?null:e.langService.lang.totalFarePerPassenger," "),o.Cb(2),o.Uc(o.qc(23,14,e.fare.totalFare,"INR",!0)),o.Cb(3),o.tc("ngForOf",e.fare.informationMessage)}}function tn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",129),o.ac(1,"span"),o.Tc(2),o.Zb(),o.ac(3,"span",114),o.ic("click",(function(){o.Kc(e);const t=o.mc();return t.toggleQuotaCode(null==t.train[0]?null:t.train[0].trainNumber),t.CheckMultiLapAvl()}))("keydown.Enter",(function(){o.Kc(e);const t=o.mc();return t.toggleQuotaCode(null==t.train[0]?null:t.train[0].trainNumber),t.CheckMultiLapAvl()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Xc("",null==e.langService.lang?null:e.langService.lang.lastUpdate," ",e.lastRefreshed," ",null==e.langService.lang?null:e.langService.lang.lastUpdateLast," ")}}function nn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",130),o.ac(1,"button",131),o.ic("click",(function(n){o.Kc(e);const i=t.$implicit,a=o.mc();return o.Ic(17).hide(n),a.chooseQuota(i.label,!0)})),o.ac(2,"span",132),o.Tc(3),o.nc(4,"quotaName"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc();o.Kb("tb-pad text-center ",e.cls,""),o.Cb(1),o.Kb("",(null==n.QuotaMap?null:n.QuotaMap.get(n.trainNo))==e.label?"active":""," btnDefault sortQuota"),o.Cb(2),o.Uc(o.pc(4,7,e.label,n.langService.langChoice))}}const an=function(){return{"background-color":"#f5f5f5","box-shadow":"0px 3px 12px 11px gray"}};let sn=(()=>{class e{constructor(e,t,n,i,a,s,r,l,c,u){this.userService=e,this.langService=t,this.store=n,this.datePipe=i,this.webService=a,this.router=s,this.messageService=r,this.confirmationService=l,this.commonService=c,this.rollesPipe=u,this.emitEvent=new o.n,this.userLogged=!1,this.retryCount=0,this.avlIndex=-1,this.bookNowActive=!1,this.defStation=!1,this.bookNowCnfirmed=!1,this.rlyPassMsgCnf=!1,this.operationType=null,this.showInfo=!1,this.showPrediction=!1,this.indirectJourney=!1,this.alternateAvlInput=new Array,this.isLogedinReq=!1,this.multiLapJourneyDetails=new Ve.a(!1,""),this.totalFare=0,this.quotaCode="GN",this.errSelectCls=null,this.manualPrediction=!1,this.bookNowDisabled=!1,this.delayBy="N"}ngOnInit(){if(null!=this.journeyDetail&&null!=this.journeyDetail){if(null!=this.journeyDetail.filteredTrainList&&this.journeyDetail.filteredTrainList.length>0)this.trainBtwnStns=Array.isArray(this.journeyDetail.filteredTrainList)?this.journeyDetail.filteredTrainList:Array.of(this.journeyDetail.filteredTrainList),this.train=this.journeyDetail.filteredTrainList,this.sourceStation=this.train[0].fromStnCode,this.destStation=this.train[0].toStnCode,this.trainBtwnStns[0].checkAvlFlag=!0;else if(null!=this.journeyDetail.trainBtwnStnsDTO&&this.journeyDetail.trainBtwnStnsDTO.length>0){this.initQuota(),this.indirectJourney=!0;var e=this.journeyDetail.trainBtwnStnsDTO.length;this.sourceStation=this.journeyDetail.trainBtwnStnsDTO[0].fromStnCode,this.destStation=this.journeyDetail.trainBtwnStnsDTO[e-1].toStnCode,this.viaStation=this.journeyDetail.trainBtwnStnsDTO[0].toStnCode,this.trainBtwnStns=Array.isArray(this.journeyDetail.trainBtwnStnsDTO)?this.journeyDetail.trainBtwnStnsDTO:Array.of(this.journeyDetail.trainBtwnStnsDTO)}else null!=this.journeyDetail.filteredAlternateTrainList&&this.journeyDetail.filteredAlternateTrainList.length>0&&(this.trainBtwnStns=Array.isArray(this.journeyDetail.filteredAlternateTrainList)?this.journeyDetail.filteredAlternateTrainList:Array.of(this.journeyDetail.filteredAlternateTrainList),this.train=this.journeyDetail.filteredAlternateTrainList,this.sourceStation=this.train[0].fromStnCode,this.destStation=this.train[0].toStnCode,this.trainBtwnStns[0].checkAvlFlag=!0);this.jpSubs=this.store.select(r.k).subscribe(e=>{this.journeyDate=e.journeyDate,this.jpInput=e,this.enqReqObj=new Object,this.enqReqObj.paymentFlag="N",this.enqReqObj.concessionBooking=e.concessionBooking||e.conBookingJournalist||"HP"==this.jpInput.journeyQuota||"PB"==this.userService.quota,this.enqReqObj.ftBooking="FT"==e.journeyQuota,this.enqReqObj.loyaltyRedemptionBooking=e.loyaltyRedemptionBooking,this.enqReqObj.ticketType=e.ticketType,this.enqReqObj.quotaCode=e.journeyQuota,this.enqReqObj.moreThanOneDay=!0,this.enqReqObj.returnJourney=e.returnJourny||"RTPR"==this.jpInput.bookingType,this.enqReqObj.returnTicket=e.returnJourny,this.indirectJourney||(this.enqReqObj.trainNumber=this.trainBtwnStns[0].trainNumber,this.enqReqObj.fromStnCode=this.trainBtwnStns[0].fromStnCode,this.enqReqObj.toStnCode=this.trainBtwnStns[0].toStnCode),"RTPR"==this.jpInput.bookingType&&(this.tpdSub=this.store.select(r.A).subscribe(e=>{this.tourPackageData=e,this.enqReqObj.mainJourneyPnr=this.tourPackageData.pnrNumber}))}),this.indirectJourney&&this.trainBtwnStns.forEach(e=>{null==this.jDate&&(this.jDate=e.journeyDate),e.checkAvlFlag=!1,this.toggleQuotaCode(e.trainNumber),this.chooseQuota(this.enqReqObj.quotaCode,!1)}),this.defaultRefresh()}}ngAfterViewInit(){this.avlLazySubs=this.store.select(r.p).subscribe(e=>{null!=e&&null!=e&&this.enqReqObj.trainNumber==e&&(console.log("LAZY LOAD AVL form: ",this.enqReqObj.trainNumber,e),this.availabilityEnqLazy())}),this.userSub=this.store.select(r.r).subscribe(e=>{this.userLogged=!(null==e||null==e||null==e.userDetail||null==e.userDetail||""==e.userDetail),this.userLogged&&"true"==e.userDetail.verified&&"1"!=e.userDetail.otpLogin&&("AVL"==this.operationType?(this.operationType=null,this.checkAvailability()):"BOOK"==this.operationType&&(this.operationType=null,this.bookNow())),this.operationType=null,console.log("LOGGED IN HIDDEN AVL")}),this.loginSub=this.store.select(r.E).subscribe(e=>{e||(this.operationType=null)}),this.manualPrediction=this.userService.manualWaitlist}ngOnDestroy(){this.langService.isAdsEnable&&googletag.destroySlots(),this.loginSub.unsubscribe(),this.userSub.unsubscribe(),this.jpSubs.unsubscribe(),this.avlLazySubs.unsubscribe(),null!=this.tpdSub&&this.tpdSub.unsubscribe()}defaultRefresh(){this.trainBtwnStns.forEach(e=>{null!=e.classAvlDTO?(this.lastRefreshed=e.classAvlDTO[0].lastUpdateTime,e.lastRefreshed=e.classAvlDTO[0].lastUpdateTime):(this.lastRefreshed=void 0,e.lastRefreshed=void 0)})}checkSelectedCls(){var e=0;return this.trainBtwnStns.forEach(t=>{if(null!=this.selectedMap&&this.selectedMap.has(t.trainNumber)){var n=this.selectedMap.get(t.trainNumber).selectedCls,i=this.selectedMap.get(t.trainNumber).bookNowActive;null!=n&&""!=n&&null!=i&&0!=i&&e++}}),e==this.trainBtwnStns.length}setClass(e,t,n=!1){if(this.errSelectCls=null,"string"!=typeof e&&null==e.avlDayList[0].availablityType)return;let i=new Object;if(null==this.selectedMap&&(this.selectedMap=new Map),null!=this.selectedMap&&this.selectedMap.size>0&&this.selectedMap.has(t.trainNumber)&&null!=this.selectedMap.get(t.trainNumber).fare&&(this.totalFare=this.totalFare-parseInt(this.selectedMap.get(t.trainNumber).fare.totalFare),this.selectedMap.delete(t.trainNumber)),i.bookNowActive=!1,null==t.journeyDate||this.indirectJourney?this.indirectJourney&&(this.journeyDate=this.jDate):this.journeyDate=t.journeyDate,n)this.indirectJourney&&(this.enqReqObj.trainNumber=t.trainNumber,this.enqReqObj.fromStnCode=t.fromStnCode,this.enqReqObj.toStnCode=t.toStnCode,this.toggleQuotaCode(t.trainNumber),this.CheckMultiLapAvl()),i.selectedCls=e,this.indirectJourney||(this.selectedCls=e,this.checkAvailability());else{i.selectedCls=e.enqClass,this.selectedCls=e.enqClass,i.bookNowActive=!(e.avlDayList[0].availablityStatus.toLowerCase().includes("not")||e.avlDayList[0].availablityStatus.toLowerCase().includes("train")||e.avlDayList[0].availablityStatus.toLowerCase().includes("regret")||e.avlDayList[0].availablityStatus.includes("RT CLS SUSPNDED")||e.avlDayList[0].availablityStatus.includes("#")||e.avlDayList[0].availablityStatus.toLowerCase().includes("done")),i.fare=e,this.fare=e,null==this.trainMap&&(this.trainMap=new Map);let n=new Object;e.avlWithLogin=!0,n.avlForBook=e,this.trainMap.set(t.trainNumber,n)}this.selectedMap.set(t.trainNumber,i),this.trainNo=t.trainNumber,this.showPrediction=!1,null!=e.avlDayList&&(this.selectedAvl=e.avlDayList[0],null!=this.selectedAvl.probability&&null!=this.selectedAvl.probability||(this.showPrediction=e.avlDayList[0].availablityStatus.search("WL")>=0),this.selectedMap.has(t.trainNumber)&&null!=this.selectedMap.get(t.trainNumber).fare&&(this.totalFare=this.totalFare+parseInt(this.selectedMap.get(t.trainNumber).fare.totalFare)),this.checkSelectedCls()&&(this.bookNowActive=!0),n||(this.bookNowActive?this.errSelectCls=null:e.avlDayList[0].availablityStatus.includes("#")?this.errSelectCls="Booking not yet started for the selected quota and class. Please try after some time...":(e.avlDayList[0].availablityStatus.toLowerCase().includes("not")||e.avlDayList[0].availablityStatus.toLowerCase().includes("train")||e.avlDayList[0].availablityStatus.toLowerCase().includes("regret")||e.avlDayList[0].availablityStatus.toLowerCase().includes("done")||e.avlDayList[0].availablityStatus.includes("RT CLS SUSPNDED"))&&(this.errSelectCls="Booking is not allowed for selected class"),this.delayBy=e.avlDayList[0].delayFlag),this.lastRefreshed=e.lastUpdateTime)}selectAvl(e,t){this.avlIndex=t,this.selectedAvl=e,this.bookNowActive=!(e.availablityStatus.toLowerCase().includes("not")||e.availablityStatus.toLowerCase().includes("train")||e.availablityStatus.toLowerCase().includes("regret")||e.availablityStatus.includes("RT CLS SUSPNDED")||e.availablityStatus.toLowerCase().includes("done")||e.availablityStatus.includes("#")),this.journeyDate=e.availablityDate,this.showPrediction=!1,null!=this.selectedAvl.probability&&null!=this.selectedAvl.probability||(this.showPrediction=e.availablityStatus.search("WL")>=0),this.selectedMap.get(this.trainNo).bookNowActive=this.bookNowActive,this.bookNowActive?this.errSelectCls=null:e.availablityStatus.includes("#")?this.errSelectCls="Booking not yet started for the selected quota and class. Please try after some time...":(e.availablityStatus.toLowerCase().includes("not")||e.availablityStatus.toLowerCase().includes("train")||e.availablityStatus.toLowerCase().includes("regret")||e.availablityStatus.toLowerCase().includes("done")||e.availablityStatus.includes("RT CLS SUSPNDED"))&&(this.errSelectCls="Booking is not allowed for selected class"),this.delayBy=e.delayFlag}openTrainLiveNtes(e){this.langService.openTrainLiveNtes(e.trainNumber,e.fromStnCode,this.datePipe.transform(e.journeyDate,"dd-MMM-yyyy"),this.datePipe.transform(e.journeyDate,"EEE"))}unsetClass(e){this.delayBy="N",this.showAvl=void 0,this.selectedCls=void 0,null!=this.trainMap&&this.trainMap.size>0&&this.trainMap.has(e)&&this.trainMap.delete(e),null!=this.selectedMap&&this.selectedMap.size>0&&this.selectedMap.has(e)&&this.selectedMap.delete(e),this.avlIndex=-1,this.bookNowActive=!1,null!=this.train.journeyDate&&(this.journeyDate=this.train.journeyDate),this.fare=void 0,this.errSelectCls=null,this.defaultRefresh()}getAvlStyle(e){return this.commonService.getAvlStyle(e)}checkAvailability(e=null,t=!1){if(null==this.selectedCls)return void this.messageService.add({life:this.langService.life,severity:"warn",detail:this.langService.errorMsg.trainAvlEnqErr1});if(this.operationType=null,!this.userLogged&&this.userService.loginRequired())return this.operationType="AVL",this.store.dispatch(new T.d),!1;null==e&&(e=this.journeyDate);let n=Object.assign({},this.enqReqObj);this.langService.loader=!0,n.isLogedinReq=this.userLogged,n.journeyDate=this.datePipe.transform(e,"yyyyMMdd"),n.classCode=this.selectedCls,this.webService.avlEnq(n,this.userLogged).subscribe(n=>this.showResponse(n,e,t))}showOtherDate(){null!=this.selectedCls?this.trainBtwnStns.forEach(e=>{null!=e.classAvlDTO&&e.classAvlDTO.forEach(t=>{t.enqClass==this.selectedCls&&(t.trainNo=e.trainNumber,this.showResponse(t,e.journeyDate,!1),this.trainMap.get(e.trainNumber).showAvl.avlWithLogin=!0)})}):this.messageService.add({life:this.langService.life,severity:"warn",detail:this.langService.errorMsg.trainAvlEnqErr1})}showResponse(e,t,n){let i=e.reTry,a=new Object;if(this.trainMap=new Map,console.log(e),"true"===i){if(this.retryCount>=e.retryCount)return this.retryCount=0,this.langService.loader=!1,void this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:"Unable to process your request."});setTimeout(()=>{this.retryCount++,this.checkAvailability(t,n)},e.retryAfterTime)}else this.retryCount=0,a.showAvl=void 0,a.fare=void 0,null==e.errorMessage?(this.journeyDate=t,e.avlDayList=this.commonService.processAvlList(e.avlDayList),this.avlMsg=void 0,null!=e.informationMessage&&(e.informationMessage=Array.isArray(e.informationMessage)?e.informationMessage:Array.of(e.informationMessage),e.informationMessage.forEach(e=>{"AVL_DTLS"==e.paramName&&(this.avlMsg=e.message)})),e.avlWithLogin=!0,n?(a.avlForBook=e,this.trainMap.set(e.trainNo,a),this.bookNow()):(this.avlIndex=-1,a.avlIndex=-1,a.showAvl=e,this.bookNowActive=!1,this.errSelectCls=null,a.avlForBook=void 0,this.setClassAvlDto(e)),a.fare=e,this.fare=e,this.lastRefreshed=e.lastUpdateTime):(a.showAvl=e,a.avlForBook=void 0,this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.errorMessage})),this.trainMap.set(e.trainNo,a),this.langService.loader=!1}getSchedule(e){let t=new Object;this.indirectJourney&&(this.enqReqObj.trainNumber=e.trainNumber,this.enqReqObj.fromStnCode=e.fromStnCode,this.enqReqObj.toStnCode=e.toStnCode);let n=Object.assign({},this.enqReqObj);n.journeyDate=this.datePipe.transform(e.journeyDate,"yyyyMMdd"),t.type="TRAIN_SCHEDULE",t.data=n,this.emitEvent.emit(t)}bookNow(){let e;if(!this.bookingEnable)return void this.messageService.add({life:this.langService.life,severity:"warn",detail:"Booking is not enable currently."});if(!this.bookNowActive)return void this.messageService.add({life:this.langService.life,severity:"warn",detail:null==this.errSelectCls?this.langService.errorMsg.trainAvlEnqErr1:this.errSelectCls});if(null!=this.selectedMap&&this.checkSelectedCls()?this.checkShowAvl()&&(e=this.langService.errorMsg.trainAvlEnqErr2):e=this.langService.errorMsg.trainAvlEnqErr1,null!=e)return void this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:e});if(!this.confirmPopup())return;if(!this.userLogged)return this.operationType="BOOK",void this.store.dispatch(new T.d);let t=null,n=[];this.avlRequestDTO=new Fe.a;let i=new Array;this.trainBtwnStns.forEach(e=>{var a,s,r,l,o,c,u,g,p,d,h,b;let m=new je;m.trainNo=e.trainNumber,m.fromStation=e.fromStnCode,m.journeyClass=this.selectedMap.get(e.trainNumber).selectedCls,m.toStation=e.toStnCode,this.indirectJourney?(m.quota=null===(a=this.QuotaMap)||void 0===a?void 0:a.get(e.trainNumber),m.journeyDate=this.datePipe.transform(e.journeyDate,"yyyyMMdd")):(m.journeyDate=this.datePipe.transform(this.journeyDate,"yyyyMMdd"),m.quota="SS"==this.enqReqObj.quotaCode?"GN":this.enqReqObj.quotaCode),m.concessionBooking=this.jpInput.concessionBooking||this.jpInput.conBookingJournalist,!this.langService.messageMap.AADHAAR_BASED_BOOKING||"TQ"!=m.quota&&"PT"!=m.quota||(t=this.langService.messageMap.AADHAAR_BASED_BOOKING),n.push(m);let f=new Ee.a;if(f.trainNo=e.trainNumber,f.destStn=e.toStnCode,f.srcStn=e.fromStnCode,this.indirectJourney?(f.quotaCode=null===(s=this.QuotaMap)||void 0===s?void 0:s.get(e.trainNumber),f.jrnyDate=this.datePipe.transform(e.journeyDate,"yyyyMMdd")):(f.jrnyDate=this.datePipe.transform(this.journeyDate,"yyyyMMdd"),f.quotaCode="SS"==this.enqReqObj.quotaCode?"GN":this.enqReqObj.quotaCode),f.jrnyClass=this.selectedMap.get(e.trainNumber).selectedCls,f.concessionPassengers=this.jpInput.concessionBooking||this.jpInput.conBookingJournalist,i.push(f),!this.indirectJourney){let t=new Object;t.avlFareResponseDTO=null===(l=null===(r=this.trainMap)||void 0===r?void 0:r.get(e.trainNumber))||void 0===l?void 0:l.showAvl,t.totalCollectibleAmount=null===(u=null===(c=null===(o=this.trainMap)||void 0===o?void 0:o.get(e.trainNumber))||void 0===c?void 0:c.showAvl)||void 0===u?void 0:u.totalCollectibleAmount,null==t.avlFareResponseDTO&&(t.avlFareResponseDTO=null===(p=null===(g=this.trainMap)||void 0===g?void 0:g.get(e.trainNumber))||void 0===p?void 0:p.avlForBook,t.totalCollectibleAmount=null===(b=null===(h=null===(d=this.trainMap)||void 0===d?void 0:d.get(e.trainNumber))||void 0===h?void 0:h.avlForBook)||void 0===b?void 0:b.totalFare,this.trainMap.get(e.trainNumber).avlForBook.trainNo=e.trainNumber),this.avlFareEnq=t}}),t?this.messageService.add({life:this.langService.life,severity:"warn",detail:t}):(this.avlRequestDTO.alternateAvlInputDTO=i,this.avlRequestDTO.mainJourneyPnr=this.enqReqObj.mainJourneyPnr,this.isLogedinReq=this.userLogged,null!=this.avlFareEnq?this.initAvlFareEnq(this.avlFareEnq):(this.langService.loader=!0,this.avlRequest=new Fe.a,this.avlRequest.ftBooking=this.jpInput.ftBooking,this.avlRequest.loyaltyRedemptionBooking=!1,this.avlRequest.moreThanOneDay=!0,this.avlRequest.ticketType=this.jpInput.ticketType,this.avlRequest.lapAvlRequestDTO=n,this.webService.allLapAvlFareEnq(this.avlRequest,this.isLogedinReq,"N").subscribe(e=>{this.langService.loader=!1,console.log("allLapAvlFareEnq"+JSON.stringify(e)),null!=e.errorMessage&&null!=e.errorMessage?this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.errorMessage}):(this.avlFareEnq=e,this.initAvlFareEnq(e))})))}initAvlFareEnq(e){this.boardingPointEnq(6,e)}prepareDataForBooking(e){let t=6;var n=0;let i=!1;(Array.isArray(e.avlFareResponseDTO)?e.avlFareResponseDTO:Array.of(e.avlFareResponseDTO)).forEach(e=>{if(null==e.errorMessage&&null==e.errorMessage){e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList);let a=new Ue.a;a.avlDetails=Object.assign({},e),e.avlDayList.forEach(e=>{this.journeyDate!=e.availablityDate||i||(a.avl=Object.assign({},e),i=!0)}),i||(a.avl=Object.assign({},e.avlDayList[0])),this.trainBtwnStns.length>n&&(this.train=this.trainBtwnStns[n],n++),this.initJD(a),this.multiLapJourneyDetails.acuralBookingFlag=this.multiLapJourneyDetails.acuralBookingFlag||"true"==a.avlDetails.bkgCfg.acuralBooking||"true"==a.avlDetails.bkgCfg.redemptionBooking,this.multiLapJourneyDetails.autoUpgrade=this.multiLapJourneyDetails.autoUpgrade||a.autoUpgrade,this.multiLapJourneyDetails.gstDetailInputFlag=this.multiLapJourneyDetails.gstDetailInputFlag||"true"==a.avlDetails.bkgCfg.gstDetailInputFlag,"true"==a.avlDetails.bkgCfg.gstDetailInputFlag&&(this.multiLapJourneyDetails.gstinPattern=a.avlDetails.bkgCfg.gstinPattern),this.multiLapJourneyDetails.captureAddress=this.multiLapJourneyDetails.captureAddress<a.avlDetails.bkgCfg.captureAddress?a.avlDetails.bkgCfg.captureAddress:this.multiLapJourneyDetails.captureAddress,this.multiLapJourneyDetails.lapDetails.push(a),t=a.avlDetails.bkgCfg.maxMasterListPsgn}else this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.errorMessage})}),this.multiLapJourneyDetails.paymentOption=e.paymentOption,this.multiLapJourneyDetails.bookingChoice=e.bookingChoice,this.multiLapJourneyDetails.multilapBooking=n>1,this.multiLapJourneyDetails.mainJourneyTxnId=this.jpInput.txnId,this.multiLapJourneyDetails.clientTxnId=(new Date).getTime().toString(36),this.userService.clientTxnId=this.multiLapJourneyDetails.clientTxnId,this.multiLapJourneyDetails.boardingStation=this.trainBtwnStns[0].fromStnCode,this.multiLapJourneyDetails.journeyType=this.jpInput.bookingType,this.multiLapJourneyDetails.returnJourney=this.jpInput.returnJourny||"RTPR"==this.jpInput.bookingType,this.multiLapJourneyDetails.emailId=this.userService.userResponse.email,this.multiLapJourneyDetails.mobileNumber=this.userService.userResponse.mobile,this.multiLapJourneyDetails.fromStation=this.sourceStation,this.multiLapJourneyDetails.upToStation=this.destStation,this.multiLapJourneyDetails.viaStation=this.viaStation,this.multiLapJourneyDetails.totalDistance=this.journeyDetail.totaldistance,this.multiLapJourneyDetails.totalDuration=this.journeyDetail.totalDuration,this.multiLapJourneyDetails.waitTime=this.journeyDetail.waitingTime,this.multiLapJourneyDetails.waitTimeHour=this.journeyDetail.waitingTimeHours,this.multiLapJourneyDetails.ticketType=this.jpInput.ticketType,this.multiLapJourneyDetails.itTicketDetailsDTO=e.itTicketDetailsDTO,this.multiLapJourneyDetails.concessionBooking=this.jpInput.concessionBooking||this.jpInput.conBookingJournalist,this.multiLapJourneyDetails.conBookingJournalist=this.jpInput.conBookingJournalist,this.multiLapJourneyDetails.ftBooking=this.jpInput.ftBooking,this.multiLapJourneyDetails.nosbBooking=!1,this.multiLapJourneyDetails.totalCollectibleAmt=this.totalFare,this.jpInput.concessionBooking&&!this.jpInput.conBookingJournalist?this.multiLapJourneyDetails.conName="Divyaang":!this.jpInput.concessionBooking&&this.jpInput.conBookingJournalist&&(this.multiLapJourneyDetails.conName="Journalist")}checkShowAvl(){return this.trainBtwnStns.forEach(e=>{var t,n,i,a;if(null!=(null===(n=null===(t=this.trainMap)||void 0===t?void 0:t.get(e.trainNumber))||void 0===n?void 0:n.showAvl)&&-1==(null===(a=null===(i=this.trainMap)||void 0===i?void 0:i.get(e.trainNumber))||void 0===a?void 0:a.avlIndex))return!0}),!1}boardingPointEnq(e,t){this.langService.loader=!0,this.avlRequestDTO.passBooking="PB"==this.userService.quota,this.avlRequestDTO.journalistBooking=this.jpInput.conBookingJournalist,this.avlRequestDTO.returnJourney=this.jpInput.returnJourny||"RTPR"==this.jpInput.bookingType;let n=1==this.userService.userResponse.rolles[this.rollesPipe.transform("SELECT_MASTER_LIST")-1];this.webService.getBoardingStnList(this.avlRequestDTO,this.isLogedinReq).subscribe(i=>{if(null!==i)if(null==i.errorMessage){if(this.multiLapJourneyDetails.bookingInItTime=(new Date).getTime(),i.bkgCfgs){let n=Array.isArray(i.bkgCfgs)?i.bkgCfgs:Array.of(i.bkgCfgs);n.forEach(e=>{Array.isArray(t.avlFareResponseDTO)?t.avlFareResponseDTO.forEach(t=>{e.trainNo==t.trainNo&&(t.bkgCfg=e)}):e.trainNo==t.avlFareResponseDTO.trainNo&&(t.avlFareResponseDTO.bkgCfg=e),this.avlFareEnq.paymentOption=e.paymentOption}),e=+n[0].maxMasterListPsgn}this.prepareDataForBooking(t),i.boardingStationList=Array.isArray(i.boardingStationList)?i.boardingStationList:Array.of(i.boardingStationList),this.multiLapJourneyDetails.boardingData=i,this.multiLapJourneyDetails.boardingStation=i.boardingStationList[0].stnNameCode.split("-")[1].trim(),this.store.dispatch(new l.l(this.multiLapJourneyDetails));let a=!1;void 0!==this.userService.userResponse.userConfigurablesDTOs&&this.userService.userResponse.userConfigurablesDTOs.forEach(e=>{a=a||"true"==e.softUser&&("true"===e.loyaltyRedemptionBookingAllowed||"true"===e.loyaltyAccrualBookingAllowed)}),n&&this.store.select(r.s).subscribe(t=>{null==t&&+this.userService.userResponse.masterList>0&&e>=+this.userService.userResponse.masterList&&this.webService.getMasterPsgnList().subscribe(e=>{null!=e.passengerDetailList&&(e.passengerDetailList=Array.isArray(e.passengerDetailList)?e.passengerDetailList:Array.of(e.passengerDetailList),this.store.dispatch(new l.r(e)))})}),"CONNECTING"==this.jpInput.bookingType?this.router.navigate(["booking/pnr-input"]):"RETURN"==this.jpInput.bookingType?this.router.navigate(["booking/psgninput"]):null==this.userService.userResponse.mpUserDetailsDTO||"PH"!=this.jpInput.journeyQuota&&("GN"!=this.jpInput.journeyQuota||this.jpInput.concessionBooking||this.jpInput.conBookingJournalist)&&"SS"!=this.jpInput.journeyQuota?"RTPR"==this.jpInput.bookingType?this.reDirectToPsgnInputPage():this.router.navigate(["booking/psgninput"]):this.router.navigate(["booking/mp-pass-passenger"])}else this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:i.errorMessage});this.langService.loader=!1})}initJD(e){var t;if(this.langService.loader=!0,e.avlDetails.wpServiceTax=0,e.avlDetails.wpServiceCharge=0,e.avlDetails.travelInsuranceCharge=0,e.avlDetails.travelInsuranceServiceTax=0,e.avlDetails.trainName=this.train.trainName,e.avlDetails.from=this.train.fromStnCode,e.avlDetails.to=this.train.toStnCode,e.avlDetails.totalCollectibleAmount=e.avlDetails.totalFare,e.trainNumber=e.avlDetails.trainNo,e.trainName=e.avlDetails.trainName,e.fromStnCode=e.avlDetails.from,e.brdStnCode=e.avlDetails.from,e.toStnCode=e.avlDetails.to,e.trainType=this.train.trainType,e.journeyQuota=this.indirectJourney&&null!=this.QuotaMap?null===(t=this.QuotaMap)||void 0===t?void 0:t.get(e.trainNumber):this.jpInput.journeyQuota,e.quotaCode="SS"==e.journeyQuota?"GN":e.journeyQuota,e.ssAvl="SS"==e.journeyQuota,e.avlDetails.quota=e.quotaCode,e.journeyDate=this.datePipe.transform(this.train.journeyDate,"yyyyMMdd"),e.concessionBooking=this.jpInput.concessionBooking||this.jpInput.conBookingJournalist,e.conBookingJournalist=this.jpInput.conBookingJournalist,e.avlDetails.bkgCfg.concessionBooking=(e.concessionBooking||e.conBookingJournalist||"HP"==e.quotaCode)&&void 0!==e.avlDetails.bkgCfg.concessionalPassengerType,e.classCode=e.avlDetails.enqClass,e.departureDateTime=this.train.journeyDate,e.arrivalDateTime=this.train.arivalDate,e.avlNotWL=e.avl.availablityStatus.indexOf("AVAILABLE")>=0||e.avl.availablityStatus.indexOf("CURR")>=0,e.racNotWL=e.avl.availablityStatus.indexOf("RAC")>=0,e.trainOwner=this.train.trainOwner,"PB"==this.userService.quota&&(e.avlDetails.bkgCfg.travelInsuranceEnabled="false"),"true"===e.avlDetails.bkgCfg.travelInsuranceEnabled){let t=e.avlDetails.bkgCfg.travelInsuranceFareMsg,n=t.indexOf("\u20b9")+1,i=t.indexOf("/");t=t.substring(n,i),e.travelInsuranceValue=parseFloat(t)}let n,i,a;n=this.train.departureTime.split(":"),i=this.train.duration.split(":"),a=this.indirectJourney?new Date(this.train.journeyDate.getTime()):new Date(this.journeyDate.getTime()),a.setHours(+n[0],+n[1],0,0),e.avlDetails.journeyDate=new Date(a),a.setMinutes(a.getMinutes()+60*+i[0]+ +i[1]),e.avlDetails.arivalDate=a,e.autoUpgrade=this.train.avlClasses[this.train.avlClasses.length-1]!=this.selectedCls&&0==this.train.trainOwner,e.duration=this.train.duration,e.bgColor=this.train.bgColor,e.trainType=this.train.trainType,e.trainOwner=this.train.trainOwner}confirmPopup(){if("PB"==this.userService.quota&&1==this.train[0].trainOwner)return this.rlyPassMsgCnf||this.confirmationService.confirm({message:this.langService.lang.rlyPassinIRCTCTrn,acceptLabel:this.langService.lang.ok,acceptVisible:!0,rejectVisible:!1,accept:()=>{this.bookNowDisabled=!0,this.rlyPassMsgCnf=!0}}),!1;let e=this.userService.cnfMsg.bookNow;if(!this.bookNowCnfirmed&&null!=e&&e.popup)return this.bookNowCnfirmed=!0,this.confirmationService.confirm({message:e.msg,acceptLabel:this.langService.lang.iAgreeBtn,rejectLabel:this.langService.lang.iNotAgreeBtn,acceptVisible:!0,rejectVisible:!0,accept:()=>{this.bookNow()},reject:()=>{this.router.navigate(["/train-search"])}}),!1;if(!this.defStation){var t="",n=this.datePipe.transform(this.jpInput.journeyDate,"dd MMM yyyy"),i=this.datePipe.transform(this.journeyDate,"dd MMM yyyy");if(i!=n&&(t=(t=(t=this.langService.errorMsg.trainAvlEnqConfirmInfo5).replace("{{1}}",n)).replace("{{2}}",i)),this.sourceStation==this.jpInput.origin.split("(")[0].split("-")[1].trim()&&this.destStation==this.jpInput.destination.split("(")[0].split("-")[1].trim()||(t=(t=(t=(t=(t=""!=t?t+"<br>"+this.langService.errorMsg.trainAvlEnqConfirmInfo0:this.langService.errorMsg.trainAvlEnqConfirmInfo0).replace("{{1}}",this.jpInput.origin.split("-")[1].trim())).replace("{{2}}",this.jpInput.destination.split("-")[1].trim())).replace("{{3}}",this.sourceStation)).replace("{{4}}",this.destStation)),""!=t)return this.defStation=!0,this.confirmationService.confirm({key:"tofrom",message:t=t+""+this.langService.errorMsg.trainAvlEnqConfirmInfo4,accept:()=>{this.bookNow()},reject:()=>{this.defStation=!1,this.bookNowCnfirmed=!1}}),!1}return!0}toggleShowInfo(e=null){this.showInfo=1!=this.showInfo,null!=e&&(this.fare=e,this.fare.informationMessage=Array.isArray(this.fare.informationMessage)?this.fare.informationMessage:Array.of(this.fare.informationMessage))}hideInfoHover(e){0==this.showInfo&&e.hide()}openChartApplication(e){e.availablityDate.split("-")}availabilityEnq(){this.langService.loader=!0,this.alternateAvlInput=new Array,this.avlRequestDTO=new Fe.a,this.trainBtwnStns.forEach(e=>{var t;let n=new Ee.a;n.trainNo=e.trainNumber,n.destStn=e.toStnCode,n.srcStn=e.fromStnCode,n.ftBooking=!1,n.jrnyDate=this.datePipe.transform(e.journeyDate,"yyyyMMdd"),n.quotaCode=null===(t=this.QuotaMap)||void 0===t?void 0:t.get(e.trainNumber),n.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses),n.concessionPassengers=this.jpInput.concessionBooking||"PB"==this.userService.quota,this.alternateAvlInput.push(n)}),this.avlRequestDTO.alternateAvlInputDTO=this.alternateAvlInput,null!=this.userService.userResponse&&void 0!==this.userService.userResponse||(this.isLogedinReq=this.userService.loginRequired(),this.isLogedinReq&&this.store.dispatch(new T.d)),this.webService.allLapAvlEnq(this.avlRequestDTO,this.userLogged).subscribe(e=>{if(this.langService.loader=!1,console.log("allLapAvlEnq"+JSON.stringify(e)),this.trainBtwnStnsResp=e,null!=this.trainBtwnStnsResp.errorMessage&&null!=this.trainBtwnStnsResp.errorMessage)this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+this.trainBtwnStnsResp.errorMessage});else{for(var t=this.trainBtwnStns.length,n=0;n<t;n++)this.trainBtwnStns[n].avlClasses=Array.isArray(this.trainBtwnStnsResp.trainBtwnStnsList[n].avlClasses)?this.trainBtwnStnsResp.trainBtwnStnsList[n].avlClasses:Array.of(this.trainBtwnStnsResp.trainBtwnStnsList[n].avlClasses),null!=this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO?(this.trainBtwnStns[n].classAvlDTO=Array.isArray(this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO)?this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO:Array.of(this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO),this.trainBtwnStns[n].checkAvlFlag=!1):this.trainBtwnStns[n].checkAvlFlag=!0;this.trainBtwnStns.forEach(e=>{null!=e.classAvlDTO&&e.classAvlDTO.forEach(e=>{null!=e.avlDayList&&(e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList))})}),this.defaultRefresh(),console.log("allLapAvlEnq"+JSON.stringify(this.trainBtwnStns))}})}availabilityEnqLazy(){if(!this.userService.lazyAvlEnq)return;if(this.isLogedinReq=this.userService.loginRequired(),this.isLogedinReq)return;this.alternateAvlInput=new Array,this.avlRequestDTO=new Fe.a;let e=!1;this.trainBtwnStns.forEach(t=>{var n;let i=new Ee.a;i.trainNo=t.trainNumber,i.destStn=t.toStnCode,i.srcStn=t.fromStnCode,i.ftBooking=!1,i.jrnyDate=this.datePipe.transform(t.journeyDate,"yyyyMMdd"),i.quotaCode=null===(n=this.QuotaMap)||void 0===n?void 0:n.get(t.trainNumber),null==i.quotaCode&&(i.quotaCode=this.enqReqObj.quotaCode),i.concessionPassengers=this.jpInput.concessionBooking||"PB"==this.userService.quota,this.alternateAvlInput.push(i),e=e||"PT"==i.quotaCode,i.avlClasses=[],e||null==t.classAvlDTO||null==t.classAvlDTO?i.avlClasses=Array.isArray(t.avlClasses)?t.avlClasses:Array.of(t.avlClasses):(Array.isArray(t.classAvlDTO)?t.classAvlDTO:Array.of(t.classAvlDTO)).forEach(e=>{"true"!=e.avlFound&&i.avlClasses.push(e.enqClass)}),e=e||i.avlClasses.length<=0,i.avlClasses=Array.isArray(t.avlClasses)?t.avlClasses:Array.of(t.avlClasses)}),e||(this.avlRequestDTO.alternateAvlInputDTO=this.alternateAvlInput,this.langService.loader=!1,this.webService.allLapAvlEnq(this.avlRequestDTO,this.userLogged).subscribe(e=>{this.langService.loader=!1,this.trainBtwnStnsResp=e,this.trainBtwnStnsResp.trainBtwnStnsList=Array.isArray(this.trainBtwnStnsResp.trainBtwnStnsList)?this.trainBtwnStnsResp.trainBtwnStnsList:Array.of(this.trainBtwnStnsResp.trainBtwnStnsList);for(var t=this.trainBtwnStns.length,n=0;n<t;n++)if(null!=this.trainBtwnStnsResp.trainBtwnStnsList[n]&&null!=this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO){this.trainBtwnStns[n].classAvlDTO=Array.isArray(this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO)?this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO:Array.of(this.trainBtwnStnsResp.trainBtwnStnsList[n].classAvlDTO),this.trainBtwnStns[n].checkAvlFlag=!1;let e=this.train[0];if(this.train.forEach(t=>{t.trainNumber==this.trainBtwnStns[n].trainNumber&&(e=t)}),this.trainBtwnStns[n].classAvlDTO.length==e.avlClasses.length)e.classAvlDTO=this.trainBtwnStns[n].classAvlDTO;else{let t=[];e.avlClasses.forEach(i=>{let a=!1;this.trainBtwnStns[n].classAvlDTO.forEach(e=>{i==e.enqClass&&"true"==e.avlFound&&(t.push(e),a=!0)}),a||null==e.classAvlDTO||e.classAvlDTO.forEach(e=>{i==e.enqClass&&"true"==e.avlFound&&(t.push(e),a=!0)}),a||t.push(this.initDumyAVLRESP(i))}),e.classAvlDTO=t}}else this.trainBtwnStns[n].checkAvlFlag=!0;this.trainBtwnStns.forEach(e=>{null!=e.classAvlDTO&&(this.delayBy="N",e.classAvlDTO.forEach(e=>{null!=e.avlDayList&&(e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList),this.delayBy="Y"==this.delayBy?this.delayBy:e.avlDayList[0].delayFlag)}))}),this.defaultRefresh()}))}setClassAvlDto(e){var t=this.trainBtwnStns.length;null!=e.avlDayList&&(e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList),e.avlFound="true");for(var n=0;n<t;n++)if(e.trainNo==this.trainBtwnStns[n].trainNumber){null==this.trainBtwnStns[n].classAvlDTO&&(this.trainBtwnStns[n].classAvlDTO=[]),this.trainBtwnStns[n].checkAvlFlag=!1;let t=[];this.trainBtwnStns[n].avlClasses.forEach(i=>{let a=!1;i==e.enqClass&&(t.push(e),a=!0),a||this.trainBtwnStns[n].classAvlDTO.forEach(e=>{i==e.enqClass&&(t.push(e),a=!0)}),a||t.push(this.initDumyAVLRESP(i))}),this.trainBtwnStns[n].classAvlDTO=t}}initDumyAVLRESP(e){let t=new Object;return t.enqClass=e,t.errorMessage="Get Availability",t.avlFound="false",t.otpAuthenticationFlag="0",t}initQuota(){if(this.quotaList=[],null!=this.journeyDetail.quotaList)for(var e=0;e<this.journeyDetail.quotaList.length;e++){let t=new Object;t.label=this.journeyDetail.quotaList[e],t.cls=e%2==0?"pull-left":"pull-right",this.quotaList.push(t)}}toggleQuotaCode(e){this.trainNo=e}chooseQuota(e,t){null==this.QuotaMap&&(this.QuotaMap=new Map),this.QuotaMap.set(this.trainNo,e),this.quotaCode=e,t&&this.CheckMultiLapAvl()}CheckMultiLapAvl(){this.langService.loader=!0,this.alternateAvlInput=new Array,this.avlRequestDTO=new Fe.a,this.trainBtwnStns.forEach(e=>{var t;if(e.trainNumber==this.trainNo&&null!=e.checkAvlFlag){let n=new Ee.a;n.trainNo=e.trainNumber,n.destStn=e.toStnCode,n.srcStn=e.fromStnCode,n.ftBooking=!1,n.jrnyDate=this.datePipe.transform(e.journeyDate,"yyyyMMdd"),n.quotaCode=this.indirectJourney?null===(t=this.QuotaMap)||void 0===t?void 0:t.get(e.trainNumber):this.jpInput.journeyQuota,n.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses),this.alternateAvlInput.push(n)}}),null!=this.alternateAvlInput&&this.alternateAvlInput.length>0?(this.avlRequestDTO.alternateAvlInputDTO=this.alternateAvlInput,null!=this.userService.userResponse&&void 0!==this.userService.userResponse||(this.isLogedinReq=this.userService.loginRequired(),this.isLogedinReq&&this.store.dispatch(new T.d)),this.webService.allLapAvlEnq(this.avlRequestDTO,this.userLogged).subscribe(e=>{if(this.langService.loader=!1,console.log("allLapAvlEnq"+JSON.stringify(e)),this.trainBtwnStnsResp=e,null!=this.trainBtwnStnsResp.errorMessage&&null!=this.trainBtwnStnsResp.errorMessage)this.trainMap=new Map,this.trainMap.set(this.trainNo,this.trainBtwnStnsResp.errorMessage),this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+this.trainBtwnStnsResp.errorMessage});else{for(var t=this.trainBtwnStns.length,n=0;n<t;n++)if(this.trainBtwnStns[n].trainNumber==this.trainNo){let e=Array.isArray(this.trainBtwnStnsResp.trainBtwnStnsList)?this.trainBtwnStnsResp.trainBtwnStnsList:Array.of(this.trainBtwnStnsResp.trainBtwnStnsList);this.trainBtwnStns[n].avlClasses=Array.isArray(e[0].avlClasses)?e[0].avlClasses:Array.of(e[0].avlClasses),null!=e[0].classAvlDTO?(this.trainBtwnStns[n].classAvlDTO=Array.isArray(e[0].classAvlDTO)?e[0].classAvlDTO:Array.of(e[0].classAvlDTO),this.trainBtwnStns[n].checkAvlFlag=!1):this.trainBtwnStns[n].checkAvlFlag=!0}this.trainBtwnStns.forEach(e=>{null!=e.classAvlDTO&&e.classAvlDTO.forEach(e=>{null!=e.avlDayList&&(e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList))})}),this.defaultRefresh(),console.log("allLapAvlEnq"+JSON.stringify(this.trainBtwnStns))}})):this.langService.loader=!1}fetchChance(){this.fetchingChance=!0,this.langService.loader=!0,this.trainBtwnStns.forEach(e=>{if(this.trainNo==e.trainNumber){let t,n;t="MMCT"==e.fromStnCode?"BCT":"CSMT"==e.fromStnCode?"CSTM":e.fromStnCode,n="MMCT"==e.toStnCode?"BCT":"CSMT"==e.toStnCode?"CSTM":e.toStnCode;let i={bookingDate:this.formatDate(e.journeyDate),currentStatus:this.getWlStatus(this.selectedAvl.availablityStatus.split("/")[1]),currentStatusNumber:this.getWlStatusNumber(this.selectedAvl.availablityStatus.split("/")[1]),fromStnCode:t,journeyClass:this.selectedCls,journeyDate:this.formatDate(e.journeyDate),quota:this.quotaCode,runningStatus:this.getWlStatus(this.selectedAvl.availablityStatus.split("/")[0]),runningStatusNumber:this.getWlStatusNumber(this.selectedAvl.availablityStatus.split("/")[0]),siteId:e.trainsiteId,toStnCode:n,trainNumber:e.trainNumber,wlType:this.selectedAvl.wlType,isLogedinReq:!1};console.log("wlPredictionReqDTO: "+JSON.stringify(i)),this.webService.predictCnfChance(i,this.userLogged,!1).subscribe(e=>{this.langService.loader=!1,console.log("WlPredictionOutputDTO: "+JSON.stringify(e)),null!=e&&(void 0===e.errorMessage?(this.showPrediction=!1,this.selectedAvl.probability=e.probability):this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:e.errorMessage})),this.fetchingChance=!1})}})}formatDate(e){return e}getWlStatus(e){return e.search("WL")>=0?"W":e.search("RAC")>=0?"R":e.search("CNF")>=0?"C":""}getWlStatusNumber(e){return Number(e.replace(/^\D+/g,""))}reDirectToPsgnInputPage(){this.commonService.initialPassengers=[],this.multiLapJourneyDetails.lapDetails.forEach((e,t)=>{this.commonService.initialPassengers.push(this.tourPackageData.passengerList)});const e=JSON.parse(JSON.stringify(this.multiLapJourneyDetails));e.numberOfPsgns=this.tourPackageData.passengerList.length,e.nameAgeGenderReadOnly=!0,e.mainJourneyPnr=this.tourPackageData.pnrNumber,this.store.dispatch(new l.l(e)),this.router.navigate(["/booking/psgninput"])}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(u.a),o.Ub(c.a),o.Ub(g.b),o.Ub(p.f),o.Ub(m.a),o.Ub(i.c),o.Ub(d.d),o.Ub(d.a),o.Ub(f.a),o.Ub(b.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-train-avl-enq"]],inputs:{train:"train",journeyDetail:"journeyDetail",bookingEnable:"bookingEnable"},outputs:{emitEvent:"emitEvent"},decls:21,vars:18,consts:[["class","col-xs-12 indirectHead",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-xs-12",2,"padding-top","10px","padding-bottom","20px"],[1,"",2,"overflow-x","auto"],[1,"pull-left"],["type","button",3,"class","click","keydown.Enter",4,"ngIf"],["type","button","class","btnDefault",3,"id","click","keydown.Enter",4,"ngIf"],["type","button","class","btnDefault",3,"click","keydown.Enter",4,"ngIf"],[4,"ngIf"],[1,"pull-right","hidden-lg","hidden-md","hidden-sm","link"],["appendTo","body",3,"dismissable"],["op1",""],["class","fare-detail-popup",3,"click",4,"ngIf"],["class","visible-xs",4,"ngIf"],["selectQuota",""],[1,"fare-detail-popup","form-group"],["style","width: 49.5%;padding: 3px 0px;",3,"class",4,"ngFor","ngForOf"],[1,"form-group","col-xs-12"],[1,"col-xs-12","indirectHead"],[1,"col-sm-5","col-xs-8","multiHead"],[1,"col-xs-4","hidden-lg","hidden-md","hidden-sm","mobZeroPad","headFont"],["class","pull-right a","style","font-weight: 700;",3,"click",4,"ngIf"],["class","pull-right","style","font-size: 2.2rem !important; font-weight: 700;",4,"ngIf"],[1,"col-sm-7","col-xs-12","mobZeroPad","headFont"],["class","pull-right a hidden-xs","style","font-weight: 700;",3,"click",4,"ngIf"],["class","pull-right hidden-xs","style","font-size: 2.2rem !important; font-weight: 700;",4,"ngIf"],[1,"pull-right","a",2,"font-weight","700",3,"click"],[1,"pull-right",2,"font-size","2.2rem !important","font-weight","700"],[1,"pull-right","a","hidden-xs",2,"font-weight","700",3,"click"],[1,"pull-right","hidden-xs",2,"font-size","2.2rem !important","font-weight","700"],[1,"dull-back","no-pad","col-xs-12"],[1,"col-sm-5","col-xs-11","train-heading"],["style","font-size: 16px;",4,"ngIf"],[1,"col-sm-7","col-xs-1",2,"margin-top","7px","font-size","initial"],[1,"pull-left","hidden-xs"],[1,"pull-right"],["class","hidden-xs","style","padding-right: 15px;",4,"ngIf"],["tabindex","0",1,"a",3,"click","keydown.Enter"],["class","hidden-xs",4,"ngIf"],["class","hidden-xs fa fa-map-marker","style","font-size: 2.4rem;color: rgb(151 147 147);",4,"ngIf"],[1,"hidden-lg","hidden-md","hidden-sm","fa","fa-map-marker",2,"font-size","2.6rem"],[1,"col-xs-12","clearfix",2,"margin-top","0px"],[1,"white-back","no-pad","col-xs-12",2,"padding","12px 0"],[1,"col-xs-5","hidden-xs"],[1,"time"],[1,"col-xs-7","hidden-xs"],[1,"col-xs-3","pull-left","line-hr"],[1,"col-xs-12","clearfix"],[1,"col-xs-12","hidden-lg","hidden-md","hidden-sm"],["style","padding-right: 15px;",4,"ngIf"],[1,"hidden-lg","hidden-md","hidden-sm"],[1,"time","col-xs-4"],[1,"col-xs-4","line-hr"],[1,"col-xs-4"],[1,"pull-right","time"],[1,"remove-padding","col-xs-4","text-center",2,"top","-6px","text-align","center"],[1,"col-xs-4","pull-right"],[1,""],["style","overflow-x:auto;","class","white-back col-xs-12",4,"ngIf"],["avlLazyLoad","","rel","preload",3,"data"],["class","col-xs-12",4,"ngIf"],[1,"col-xs-12"],[1,"fare-detail-popup-content-message"],["class","blinking",4,"ngIf"],["class","pull-right hidden-xs","style","padding-right: 5px;margin-bottom: -20px",4,"ngIf"],["class","form-group col-xs-12 text-center",4,"ngIf"],["class","theameColor col-xs-12 text-center",4,"ngIf"],[2,"font-size","16px"],[1,"hidden-xs",2,"padding-right","15px"],[3,"popup","model"],["sort",""],[1,"a",2,"font-size","16px","font-weight","700",3,"click"],[1,"hidden-xs"],[1,"hidden-xs","fa","fa-map-marker",2,"font-size","2.4rem","color","rgb(151 147 147)"],[2,"padding-right","15px"],[1,"a","pull-right",2,"font-size","12px","font-weight","700",3,"click"],["class","",4,"ngIf"],[1,"white-back","col-xs-12",2,"overflow-x","auto"],["style","padding-right: 6px;padding-bottom: 6px;",4,"ngFor","ngForOf"],[2,"padding-right","6px","padding-bottom","6px"],["tabindex","0",3,"class","click","keydown.Enter",4,"ngIf"],["tabindex","0",3,"click","keydown.Enter"],["class","pull-right",4,"ngIf"],["style","padding: 5px 0;",3,"class",4,"ngIf"],["class","hidden-xs col-xs-12 remove-padding",4,"ngIf"],[2,"padding","5px 0"],[1,"hidden-xs","col-xs-12","remove-padding"],[1,"fare-icon","fa","fa-info-circle","fa-lg",3,"click","mouseleave","mouseenter"],["class","col-xs-12 remove-padding text-right-web",4,"ngIf"],[1,"col-xs-12","link",2,"padding","5px 0"],[1,"fa","fa-repeat",2,"font-size","2rem"],[1,"col-xs-12","remove-padding","text-right-web"],[2,"color","red"],[3,"model","activeItem"],["pTemplate","item"],[1,"pull-right",2,"text-align","center"],["tabindex","0",1,"link",2,"margin-top","-25px","padding","0px 5px",3,"click","keydown.Enter"],[1,"fa","fa-close"],[1,"col-xs-12","clearfix",2,"margin-top","8px"],["style","overflow-x:auto;width: 100%;",4,"ngIf"],[2,"position","relative","text-align","center",3,"click","keydown.Enter"],[1,"ui-menuitem-text"],[2,"overflow-x","auto","width","100%"],[1,"link"],["tabindex","0",3,"click","keydown.Enter",4,"ngIf"],["style","padding-right: 6px;padding-bottom: 6px;","class","link",4,"ngFor","ngForOf"],[1,"fa","fa-chevron-left",2,"padding","0px 8px"],[1,"link",2,"padding-right","6px","padding-bottom","6px"],[1,"fa","fa-chevron-right"],[1,"blinking"],[1,"a_ntes",3,"click"],[3,"innerHTML"],["href","https://play.google.com/store/apps/details?id=cris.icms.ntes","target","_blank",1,"a_ntes"],[1,"pull-right","hidden-xs",2,"padding-right","5px","margin-bottom","-20px"],[1,"fa","fa-repeat",2,"font-size","2rem",3,"click","keydown.Enter"],[1,"form-group","col-xs-12","text-center"],[1,"col-xs-12","line-hr",2,"border-bottom","1.5px solid #d8d2d2 !important"],[1,"theameColor","col-xs-12","text-center"],["type","button",3,"click","keydown.Enter"],["type","button",1,"btnDefault",3,"id","click","keydown.Enter"],["type","button",1,"btnDefault",3,"click","keydown.Enter"],["class","fare-icon fa fa-info-circle fa-lg hidden-xs",3,"click","mouseleave","mouseenter",4,"ngIf"],[1,"fare-icon","fa","fa-info-circle","fa-lg","hidden-xs",3,"click","mouseleave","mouseenter"],["class","fa fa-info-circle","style","font-size: 3rem;padding: 0px 10px;","tabindex","0",3,"click","mouseleave","mouseenter",4,"ngIf"],["tabindex","0",1,"fa","fa-info-circle",2,"font-size","3rem","padding","0px 10px",3,"click","mouseleave","mouseenter"],[1,"fare-detail-popup",3,"click"],[1,"fare-detail-popup-close-sign","fa","fa-window-close","fa-lg"],[1,"fare-detail-popup-content"],[1,"line"],[1,"visible-xs"],[2,"width","49.5%","padding","3px 0px"],["type","button",3,"click"],[1,"text-center"]],template:function(e,t){if(1&e&&(o.Rc(0,$e,17,22,"div",0),o.Rc(1,Nt,113,108,"div",1),o.ac(2,"div",2),o.ac(3,"div",3),o.ac(4,"span",4),o.ac(5,"span"),o.Rc(6,Rt,2,4,"button",5),o.Rc(7,Pt,2,2,"button",6),o.Rc(8,Bt,2,1,"button",7),o.Zb(),o.Rc(9,Ft,4,2,"span",8),o.Zb(),o.ac(10,"div",9),o.Rc(11,Vt,2,1,"span",1),o.Zb(),o.Zb(),o.Zb(),o.ac(12,"p-overlayPanel",10,11),o.Rc(14,en,26,18,"div",12),o.Rc(15,tn,4,3,"div",13),o.Zb(),o.ac(16,"p-overlayPanel",10,14),o.ac(18,"div",15),o.Rc(19,nn,5,10,"div",16),o.Zb(),o.Vb(20,"div",17),o.Zb()),2&e){var n=null;const e=!t.indirectJourney&&null==(null==t.trainMap||null==(n=t.trainMap.get(null==t.train[0]?null:t.train[0].trainNumber))?null:n.showAvl);var i=null;const a=!t.indirectJourney&&null!=(null==t.trainMap||null==(i=t.trainMap.get(null==t.train[0]?null:t.train[0].trainNumber))?null:i.showAvl)&&null!=(null==t.trainMap||null==(i=t.trainMap.get(null==t.train[0]?null:t.train[0].trainNumber))?null:i.showAvl.totalFare)&&(null==t.trainMap||null==(i=t.trainMap.get(null==t.train[0]?null:t.train[0].trainNumber))?null:i.showAvl.totalFare)>0;o.tc("ngIf",t.indirectJourney),o.Cb(1),o.tc("ngForOf",t.trainBtwnStns),o.Cb(5),o.tc("ngIf",t.bookingEnable),o.Cb(1),o.tc("ngIf",e),o.Cb(1),o.tc("ngIf",t.showPrediction&&t.manualPrediction),o.Cb(1),o.tc("ngIf",a),o.Cb(2),o.tc("ngForOf",t.trainBtwnStns),o.Cb(1),o.Pc(o.yc(16,an)),o.tc("dismissable",!1),o.Cb(2),o.tc("ngIf",t.fare),o.Cb(1),o.tc("ngIf",null!=t.lastRefreshed),o.Cb(1),o.Pc(o.yc(17,an)),o.tc("dismissable",!0),o.Cb(3),o.tc("ngForOf",t.quotaList)}},directives:[p.o,p.n,ye.a,qe,fe,Ge.a,d.e],pipes:[k.a,p.f,p.u,_e.a,I.a,Je.a,p.g,p.d],styles:[".N[_ngcontent-%COMP%]{color:#ababab}.N[_ngcontent-%COMP%], .Y[_ngcontent-%COMP%]{padding:0 4px}.remove-padding[_ngcontent-%COMP%]{margin:0 -15px}.remove-left-padding[_ngcontent-%COMP%]{margin-left:-15px}.remove-right-padding[_ngcontent-%COMP%]{margin-right:-15px}body[_ngcontent-%COMP%]   .ui-tabmenu[_ngcontent-%COMP%]   .ui-tabmenu-nav[_ngcontent-%COMP%]   .ui-tabmenuitem[_ngcontent-%COMP%]{border:0 solid transparent!important;background-color:transparent!important}.selected-class[_ngcontent-%COMP%]{background:#fee4d4;border:1px solid #beab9f}.fullWidth[_ngcontent-%COMP%]{width:99%}.halfWidth[_ngcontent-%COMP%]{width:49.5%}.sortQuota[_ngcontent-%COMP%]{padding:1px!important;white-space:break-spaces!important;width:99%;font-size:12px!important;min-height:60px}.blinking[_ngcontent-%COMP%]{color:#be2a2a;animation:blinkingText 1s infinite}@keyframes blinkingText{0%{color:#be2a2a}50%{color:#000}to{color:#be2a2a}}"]}),e})();var rn=n("/RsI"),ln=n("XD+r");const on=["modifySearch"],cn=["firstFocus"];function un(e,t){1&e&&(o.ac(0,"div",60),o.Vb(1,"app-modify-search",null,12),o.Zb())}function gn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",61),o.ac(1,"app-filter",62),o.ic("applyFilter",(function(t){return o.Kc(e),o.mc().applyFilter(t)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.tc("filterData",e.filterData)}}function pn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",63),o.ac(1,"div",64),o.ic("click",(function(){return o.Kc(e),o.mc().filter_bar=!1})),o.Vb(2,"span",65),o.ac(3,"strong",66),o.Tc(4),o.Zb(),o.Zb(),o.ac(5,"app-filter",62),o.ic("applyFilter",(function(t){return o.Kc(e),o.mc().applyFilter(t)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.filter),o.Cb(1),o.tc("filterData",e.filterData)}}function dn(e,t){if(1&e&&(o.ac(0,"div",67),o.ac(1,"div",68),o.ac(2,"ol",69),o.ac(3,"li"),o.ac(4,"strong"),o.Tc(5),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(5),o.Uc(e.info)}}function hn(e,t){if(1&e){const e=o.bc();o.ac(0,"button",70),o.ic("click",(function(){o.Kc(e);const t=o.mc();return t.onlyAvlBerth=!t.onlyAvlBerth,t.applyFilter(t.filterData)})),o.ac(1,"span",40),o.Tc(2),o.Zb(),o.ac(3,"span",71),o.Tc(4),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Kb("btnDefault ",e.onlyAvlBerth?"active":"",""),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.showAvlTrains),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.showAvlTrainsSort)}}function bn(e,t){1&e&&(o.ac(0,"div",72),o.ac(1,"span",73),o.Tc(2,"No trains are available for the filter(s) you have selected."),o.Zb(),o.Zb())}function mn(e,t){if(1&e&&o.Vb(0,"div",20),2&e){const e=o.mc().$implicit,t=o.mc(2);o.xc("id","trainAds_",t.refreshNo,"_",e.trainBtwnStnsDTO[0].trainNumber,"",e.trainBtwnStnsDTO[1].trainNumber,"")}}function fn(e,t){if(1&e&&o.Vb(0,"div",20),2&e){const e=o.mc().$implicit,t=o.mc(2);o.wc("id","trainAds_",t.refreshNo,"_",e.filteredTrainList[0].trainNumber,"")}}function vn(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"div",76),o.ac(2,"app-train-avl-enq",77),o.ic("emitEvent",(function(t){return o.Kc(e),o.mc(2).emitEvent(t)})),o.Zb(),o.Zb(),o.Rc(3,mn,1,3,"div",78),o.Rc(4,fn,1,2,"div",78),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc(2);o.Cb(2),o.tc("journeyDetail",e)("bookingEnable",n.bookingEnable),o.Cb(1),o.tc("ngIf",n.indirectJourney),o.Cb(1),o.tc("ngIf",!n.indirectJourney)}}function yn(e,t){if(1&e&&(o.ac(0,"div"),o.Vb(1,"div",30),o.Vb(2,"div",74),o.Rc(3,vn,5,4,"div",75),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.tc("id",e.adIdTLT),o.Cb(1),o.tc("ngForOf",e.journeyDetailDTO)}}function Cn(e,t){if(1&e&&o.Vb(0,"div",20),2&e){const e=o.mc().$implicit,t=o.mc(2);o.xc("id","trainAdsAlt_",t.refreshNo,"_",e.trainBtwnStnsDTO[0].trainNumber,"",e.trainBtwnStnsDTO[1].trainNumber,"")}}function Sn(e,t){if(1&e&&o.Vb(0,"div",20),2&e){const e=o.mc().$implicit,t=o.mc(2);o.wc("id","trainAdsAlt_",t.refreshNo,"_",e.filteredAlternateTrainList[0].trainNumber,"")}}function Dn(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"div",76),o.ac(2,"app-train-avl-enq",77),o.ic("emitEvent",(function(t){return o.Kc(e),o.mc(2).emitEvent(t)})),o.Zb(),o.Zb(),o.Rc(3,Cn,1,3,"div",78),o.Rc(4,Sn,1,2,"div",78),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc(2);o.Cb(2),o.tc("journeyDetail",e)("bookingEnable",n.bookingEnable),o.Cb(1),o.tc("ngIf",n.indirectJourney),o.Cb(1),o.tc("ngIf",!n.indirectJourney)}}function Tn(e,t){if(1&e&&(o.ac(0,"div",79),o.ac(1,"div",80),o.ac(2,"h1",81),o.Tc(3),o.Zb(),o.Zb(),o.Rc(4,Dn,5,4,"div",75),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.alternateTrains),o.Cb(1),o.tc("ngForOf",e.alternateJourneyDetailDTO)}}const kn=function(){return{height:"600px","min-width":"320px"}};function In(e,t){if(1&e){const e=o.bc();o.ac(0,"p-dialog",82),o.ic("visibleChange",(function(t){return o.Kc(e),o.mc().showSchedule=t})),o.Vb(1,"app-check-train-schedule",83),o.Zb()}if(2&e){const e=o.mc();o.uc("header",null==e.langService.lang?null:e.langService.lang.checkTrainSchedule),o.tc("contentStyle",o.yc(10,kn))("visible",e.showSchedule),o.Cb(1),o.tc("trainNumberInput",e.scheduleData.trainNumber)("trainJourneyDate",e.scheduleData.journeyDate)("showTrainNumberInput",!1)("fromStation",e.scheduleData.fromStnCode)("showHeader",!1)("showAds",!1)("showSchedule",!0)}}function On(e,t){if(1&e){const e=o.bc();o.ac(0,"button",86),o.ic("click",(function(t){o.Kc(e);const n=o.mc().$implicit,i=o.mc();return o.Ic(88).hide(t),i.sortBy(n.label,n.order)})),o.Tc(1),o.Vb(2,"br"),o.ac(3,"span",87),o.Tc(4),o.Zb(),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc();o.Kb("",t.sortedBy==e.label&&t.sortedOrder==e.order?"active":""," btnDefault"),o.Cb(1),o.Uc(t.langService.lang[e.label]),o.Cb(3),o.Uc(t.langService.lang[e.order])}}function xn(e,t){if(1&e){const e=o.bc();o.ac(0,"button",86),o.ic("click",(function(t){o.Kc(e);const n=o.mc().$implicit,i=o.mc();return o.Ic(88).hide(t),i.fareFilterPopup(n.label,n.order)})),o.Tc(1),o.Vb(2,"br"),o.ac(3,"span",87),o.Tc(4),o.Zb(),o.Zb()}if(2&e){const e=o.mc().$implicit,t=o.mc();o.Kb("",t.sortedBy==e.label&&t.sortedOrder==e.order?"active":""," btnDefault"),o.Cb(1),o.Uc(t.langService.lang[e.label]),o.Cb(3),o.Uc(t.langService.lang[e.order])}}function An(e,t){if(1&e&&(o.ac(0,"div",84),o.Rc(1,On,5,5,"button",85),o.Rc(2,xn,5,5,"button",85),o.Zb()),2&e){const e=t.$implicit;o.Kb("tb-pad text-center ",e.cls,""),o.Cb(1),o.tc("ngIf","fare"!=e.label),o.Cb(1),o.tc("ngIf","fare"==e.label)}}function Mn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",95),o.ac(1,"div",96),o.ac(2,"input",97),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc(2).onClickClassOption(n.key)})),o.Zb(),o.Zb(),o.ac(3,"span",98),o.ac(4,"strong"),o.Tc(5),o.nc(6,"className"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc(2);o.Cb(2),o.uc("id",e.key),o.uc("value",e.key),o.tc("checked",n.selectedCls==e.key),o.Cb(3),o.Uc(o.qc(6,4,e.key,"",n.langService.langChoice))}}const Zn=function(){return{width:"375px"}};function wn(e,t){if(1&e){const e=o.bc();o.ac(0,"p-dialog",88),o.ic("visibleChange",(function(t){return o.Kc(e),o.mc().showFarePopup=t})),o.ac(1,"div",89),o.Rc(2,Mn,7,8,"div",90),o.nc(3,"keyvalue"),o.Zb(),o.ac(4,"div",91),o.Vb(5,"div",92),o.ac(6,"div",93),o.ac(7,"button",94),o.ic("click",(function(){return o.Kc(e),o.mc().sortFareSubmit()})),o.Tc(8),o.Zb(),o.Zb(),o.ac(9,"div",93),o.ac(10,"button",94),o.ic("click",(function(){return o.Kc(e),o.mc().hideFarePopup()})),o.Tc(11),o.Zb(),o.Zb(),o.Vb(12,"div",92),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Pc(o.yc(9,Zn)),o.uc("header",null==e.langService.lang?null:e.langService.lang.selectClass),o.tc("visible",e.showFarePopup),o.Cb(2),o.tc("ngForOf",o.oc(3,7,e.filterData.classes)),o.Cb(6),o.Uc(null==e.langService.lang?null:e.langService.lang.ok),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.cancel)}}const Ln=function(){return{"background-color":"#f5f5f5","box-shadow":"0px 3px 12px 11px gray"}};let Nn=(()=>{class e{constructor(e,t,n,i,a,s,r,l,o,c,u){this.langService=e,this.userService=t,this.store=n,this.router=i,this._location=a,this.messageService=s,this.stationFilterService=r,this.rollesPipe=l,this.webService=o,this.commonService=c,this.datePipe=u,this.filter_bar=!1,this.modifySearchBar=!1,this.SOFT=!1,this.sortedBy="duration",this.sortedOrder="assending",this.userLogged=!1,this.showSchedule=!1,this.showFilter=!1,this.onlyAvlBerth=!1,this.softuserflag=!1,this.totalTrainsCount=0,this.filterTrainsCount=0,this.adIdTLT="div-gpt-ad-1548225756481-0",this.adIdTLB="div-gpt-ad-1548226840010-0",this.adIdTLL="div-gpt-ad-1548226981717-0",this.adIdTLL2="div-gpt-ad-1645006635643-0",this.refreshNo=0,this.serveyFlag=!1,this.indirectJourney=!1,this.bookingEnable=!0,this.isSortByFareAvl=!1,this.adIdTLT=this.userService.getAdsRandomId(),this.adIdTLB=this.userService.getAdsRandomId(),this.adIdTLL=this.userService.getAdsRandomId(),this.adIdTLL2=this.userService.getAdsRandomId()}ngOnInit(){this.initSortBy(),this.SOFT=!1,this.jpInputSub=this.store.select(r.k).subscribe(e=>{this.trainSearch=e,this.onlyAvlBerth=e.availableBerth,this.stationFilterService.updateHistory(e.origin.trim(),e.destination.trim())}),this.trainListSub=this.store.select(r.B).subscribe(e=>{this.showFilter=!1,this.initData(JSON.parse(JSON.stringify(e))),setTimeout(()=>{this.showFilter=!0},50)})}ngAfterViewInit(){this.store.dispatch(new l.l(null)),this.commonService.backToPsgnInput=!1,Object(s.a)(600).subscribe(()=>{if(null!=this.firstFocus&&this.firstFocus.nativeElement.focus(),null!=this.trainSearch.trainNo&&null!=this.trainSearch.trainNo){let e=document.getElementById("T_"+this.trainSearch.trainNo);null!=e&&e.focus()}}),this.userSub=this.store.select(r.r).subscribe(e=>{this.userLogged=!(null==e||null==e||null==e.userDetail||null==e.userDetail||""==e.userDetail),this.userLogged&&void 0!==e.userDetail.userConfigurablesDTOs&&e.userDetail.userConfigurablesDTOs.forEach(e=>{this.softuserflag=this.softuserflag||"true"==e.softUser&&"true"===e.loyaltyRedemptionBookingAllowed})})}ngOnDestroy(){this.langService.isAdsEnable&&googletag.destroySlots(),this.userSub.unsubscribe(),this.jpInputSub.unsubscribe(),this.trainListSub.unsubscribe()}emitEvent(e){"TRAIN_SCHEDULE"==e.type&&(this.scheduleData=e.data,this.showSchedule=!0)}showAdsAfterInit(){this.langService.isAdsEnable&&(this.refreshNo=this.refreshNo+1,Object(s.a)(1e3).subscribe(()=>{this.displayAds("/37179215/GPT_NWEB_TRAIN_LIST_TOP","/37179215/GPT_NWEB_TRAIN_LIST_BOTTOM","/37179215/GPT_NWEB_TRAIN_LIST_LEFT","/37179215/GPT_NWEB_TRAIN_LIST_LEFT_2"),googletag.display(this.adIdTLT),googletag.display(this.adIdTLL2)}),googletag.destroySlots())}initSortBy(){this.sortByList=[{label:"duration",order:"assending",cls:"pull-left"},{label:"duration",order:"dessending",cls:"pull-right"},{label:"departs",order:"assending",cls:"pull-left"},{label:"departs",order:"dessending",cls:"pull-right"},{label:"arrival",order:"assending",cls:"pull-left"},{label:"arrival",order:"dessending",cls:"pull-right"}],this.isSortByFareAvl&&(this.sortByList.push({label:"fare",order:"highToLow",cls:"pull-right"}),this.sortByList.push({label:"fare",order:"lowToHigh",cls:"pull-left"}))}fareFilterPopup(e,t){this.sortAction=e,this.sortType=t,this.showFarePopup=!0}hideFarePopup(){this.showFarePopup=!1}onClickClassOption(e){console.log("Class = "+e),this.selectedCls=e}sortFareSubmit(){this.showFarePopup=!1,this.sortBy(this.sortAction,this.sortType)}sortBy(e,t){console.log("Action = "+e+", val = "+t),"duration"==this.sortedBy&&e==this.sortedBy?t!=this.sortedOrder&&(this.sortedOrder=t,this.indirectJourney?(this.filteredMultiLapTrainList.reverse(),this.filteredAltMultiLapTrainList.reverse()):(this.filteredTrainList.reverse(),this.filteredAlternateTrainList.reverse(),this.setJourneyDetailDto())):(this.sortedBy=e,this.sortedOrder=t,this.indirectJourney&&"fare"!=this.sortedBy?([this.filteredMultiLapTrainList,this.filteredAltMultiLapTrainList]=this.sortfilteredMultiTrainList([this.filterMultiTrains(this.jD),this.filterMultiTrains(this.altJD)]),this.journeyDetailDTO=this.filteredMultiLapTrainList,this.alternateJourneyDetailDTO=this.filteredAltMultiLapTrainList):([this.filteredTrainList,this.filteredAlternateTrainList]=this.sortfilteredTrainList([this.filteredTrainList,this.filteredAlternateTrainList]),this.setJourneyDetailDto()),this.showAdsAfterInit())}initData(e){this.isSortByFareAvl=!1,this.modifySearchBar=!1,this.journeyDetailDTO=[],this.alternateJourneyDetailDTO=[],null!=e&&(this.info=e.info,this.bookingEnable="false"!=e.bookingEnable,null!=e.trainBtwnStnsList&&(e.trainBtwnStnsList=Array.isArray(e.trainBtwnStnsList)?e.trainBtwnStnsList:Array.of(e.trainBtwnStnsList),e.trainBtwnStnsList.forEach(e=>{this.processTrainData(e,this.trainSearch.journeyDate)})),null!=e.alternateTrainBtwnStnsList&&(e.alternateTrainBtwnStnsList=Array.isArray(e.alternateTrainBtwnStnsList)?e.alternateTrainBtwnStnsList:Array.of(e.alternateTrainBtwnStnsList),e.alternateTrainBtwnStnsList.forEach(e=>{let t=e.journeyDate.split("T")[0].split("-");this.processTrainData(e,new Date(t[0],t[1]-1,t[2]))})),null!=e.journeyDetailDTO&&(this.indirectJourney=!0,this.filteredTrainList=[],this.filteredAlternateTrainList=[],this.journeyDetailDTO=Array.isArray(e.journeyDetailDTO)?e.journeyDetailDTO:Array.of(e.journeyDetailDTO),this.journeyDetailDTO.forEach(t=>{t.totalDuration=this.converToHours(t.totalDuration),t.waitingTimeHours=this.converToHours(t.waitingTime),t.trainBtwnStnsDTO=Array.isArray(t.trainBtwnStnsDTO)?t.trainBtwnStnsDTO:Array.of(t.trainBtwnStnsDTO),t.quotaList=Array.isArray(e.quotaList)?e.quotaList:Array.of(e.quotaList),t.trainBtwnStnsDTO.forEach(e=>{e.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses);let t=e.journeyDate.split("T")[0].split("-");this.processTrainData(e,new Date(t[0],t[1]-1,t[2]))})})),null!=e.alternateJourneyDetailDTO&&(this.indirectJourney=!0,this.filteredTrainList=[],this.filteredAlternateTrainList=[],this.alternateJourneyDetailDTO=Array.isArray(e.alternateJourneyDetailDTO)?e.alternateJourneyDetailDTO:Array.of(e.alternateJourneyDetailDTO),this.alternateJourneyDetailDTO.forEach(t=>{t.totalDuration=this.converToHours(t.totalDuration),t.waitingTimeHours=this.converToHours(t.waitingTime),t.trainBtwnStnsDTO=Array.isArray(t.trainBtwnStnsDTO)?t.trainBtwnStnsDTO:Array.of(t.trainBtwnStnsDTO),t.quotaList=Array.isArray(e.quotaList)?e.quotaList:Array.of(e.quotaList),t.trainBtwnStnsDTO.forEach(e=>{e.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses);let t=e.journeyDate.split("T")[0].split("-");this.processTrainData(e,new Date(t[0],t[1]-1,t[2]))})})),null==e.journeyDetailDTO&&null==e.alternateJourneyDetailDTO&&(this.indirectJourney=!1,this.journeyDetailDTO=[],this.alternateJourneyDetailDTO=[]),this.trainList=[],this.alternateTrainList=[],this.jD=[],this.altJD=[],null!=e.trainBtwnStnsList&&(this.trainList=e.trainBtwnStnsList),null!=e.alternateTrainBtwnStnsList&&(this.alternateTrainList=e.alternateTrainBtwnStnsList),null!=e.journeyDetailDTO&&(this.jD=Array.isArray(e.journeyDetailDTO)?e.journeyDetailDTO:Array.of(e.journeyDetailDTO)),null!=e.alternateJourneyDetailDTO&&(this.altJD=Array.isArray(e.alternateJourneyDetailDTO)?e.alternateJourneyDetailDTO:Array.of(e.alternateJourneyDetailDTO)),this.serveyFlag="true"==e.serveyFlag,this.sectorName=e.sectorName,this.indirectJourney?this.displayMultiTrainList():this.displayTrainList(),this.langService.loader=!1,null!=this.firstFocus&&this.firstFocus.nativeElement.focus(),this.initSortBy())}processTrainData(e,t){let n,i;e.avlClasses=Array.isArray(e.avlClasses)?e.avlClasses:Array.of(e.avlClasses),e.avlClasses.reverse(),null!=e.classAvlDTO&&(e.classAvlDTO=Array.isArray(e.classAvlDTO)?e.classAvlDTO:Array.of(e.classAvlDTO),e.classAvlDTO.reverse(),e.classAvlDTO.forEach(e=>{e.avlDayList=Array.isArray(e.avlDayList)?e.avlDayList:Array.of(e.avlDayList)}),this.isSortByFareAvl||(this.isSortByFareAvl=!0)),n=e.departureTime.split(":"),i=e.duration.split(":");let a=new Date(t.getTime());a.setHours(+n[0],+n[1],0,0),e.journeyDate=new Date(a),a.setMinutes(a.getMinutes()+60*+i[0]+ +i[1]),e.arivalDate=a,e.bgColor=this.bgColor(e)}bgColor(e){return 1==e.trainOwner?"train-type-IRCTC":e.trainType.indexOf("SV")>=0?"train-type-SV":e.trainType.indexOf("ST")>=0?"train-type-ST":e.trainType.indexOf("SP")>=0?"train-type-SP":e.trainType.indexOf("S")>=0||e.trainType.indexOf("JS")>=0?"train-type-S":e.trainType.indexOf("R")>=0?"train-type-R":e.trainType.indexOf("G")>=0?"train-type-G":e.trainType.indexOf("D")>=0?"train-type-D":"train-type-O"}pushErrorMessage(e){this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e})}displayTrainList(){this.filterData=new Object,this.filterData.source=new Map,this.filterData.destination=new Map,this.filterData.classes=new Map,this.filterData.trainType=new Map,this.filterData.depart=new Map,this.filterData.arival=new Map,this.filterData.depart.set("00:00 - 06:00",!0),this.filterData.depart.set("06:00 - 12:00",!0),this.filterData.depart.set("12:00 - 18:00",!0),this.filterData.depart.set("18:00 - 24:00",!0),this.filterData.arival.set("00:00 - 06:00",!0),this.filterData.arival.set("06:00 - 12:00",!0),this.filterData.arival.set("12:00 - 18:00",!0),this.filterData.arival.set("18:00 - 24:00",!0),this.filterData.departSlider=[0,100],this.filterData.arivalSlider=[0,100],this.filteredTrainList=[],this.filteredAlternateTrainList=[],this.modifySearchBar=!1,this.trainList.forEach(e=>{this.filterData.source.set(e.fromStnCode,!0),this.filterData.destination.set(e.toStnCode,!0),e.avlClasses.forEach(e=>{this.filterData.classes.set(e,""==this.trainSearch.journeyClass||e==this.trainSearch.journeyClass)}),"string"==typeof e.trainType?this.filterData.trainType.set(e.trainType,!0):e.trainType.forEach(e=>{this.filterData.trainType.set(e,!0)}),this.filteredTrainList.push(e)}),this.alternateTrainList.forEach(e=>{this.filterData.source.set(e.fromStnCode,!0),this.filterData.destination.set(e.toStnCode,!0),e.avlClasses.forEach(e=>{this.filterData.classes.set(e,""==this.trainSearch.journeyClass||e==this.trainSearch.journeyClass)}),"string"==typeof e.trainType?this.filterData.trainType.set(e.trainType,!0):e.trainType.forEach(e=>{this.filterData.trainType.set(e,!0)}),this.filteredAlternateTrainList.push(e)}),[this.filteredTrainList,this.filteredAlternateTrainList]=this.sortfilteredTrainList([this.filterTrains(this.trainList),this.filterTrains(this.alternateTrainList)]),this.totalTrainsCount=this.trainList.length+this.alternateTrainList.length,this.indirectJourney||this.setJourneyDetailDto(),this.filterData.indirectJourney=!1,this.showAdsAfterInit()}setJourneyDetailDto(){this.journeyDetailDTO=[],this.alternateJourneyDetailDTO=[],this.filteredTrainList=Array.isArray(this.filteredTrainList)?this.filteredTrainList:Array.of(this.filteredTrainList),this.filteredAlternateTrainList=Array.isArray(this.filteredAlternateTrainList)?this.filteredAlternateTrainList:Array.of(this.filteredAlternateTrainList),this.filteredTrainList.forEach(e=>{let t=new Object,n=new Array;t.totalDuration=e.duration,n.push(e),t.filteredTrainList=n,this.journeyDetailDTO.push(t)}),this.filteredAlternateTrainList.forEach(e=>{let t=new Object,n=new Array;t.totalDuration=e.duration,n.push(e),t.filteredAlternateTrainList=n,this.alternateJourneyDetailDTO.push(t)})}displayMultiTrainList(){this.filterData=new Object,this.filterData.source=new Map,this.filterData.destination=new Map,this.filterData.classes=new Map,this.filterData.trainType=new Map,this.filterData.depart=new Map,this.filterData.arival=new Map,this.filterData.depart.set("00:00 - 06:00",!0),this.filterData.depart.set("06:00 - 12:00",!0),this.filterData.depart.set("12:00 - 18:00",!0),this.filterData.depart.set("18:00 - 24:00",!0),this.filterData.arival.set("00:00 - 06:00",!0),this.filterData.arival.set("06:00 - 12:00",!0),this.filterData.arival.set("12:00 - 18:00",!0),this.filterData.arival.set("18:00 - 24:00",!0),this.filterData.viaStn=new Map,this.filterData.waitTime=[0,100],this.filterData.departSlider=[0,100],this.filterData.arivalSlider=[0,100],this.filteredMultiLapTrainList=[],this.filteredAltMultiLapTrainList=[],this.modifySearchBar=!1,null!=this.jD&&this.jD.length>0&&this.filterMultilapData(this.jD),null!=this.altJD&&this.altJD.length>0&&this.filterMultilapData(this.altJD),[this.filteredMultiLapTrainList,this.filteredAltMultiLapTrainList]=this.sortfilteredMultiTrainList([this.filterMultiTrains(this.jD),this.filterMultiTrains(this.altJD)]),this.journeyDetailDTO=this.filteredMultiLapTrainList,this.alternateJourneyDetailDTO=this.filteredAltMultiLapTrainList,this.filterData.indirectJourney=!0,this.showAdsAfterInit()}filterMultilapData(e){e.forEach(e=>{var t=null,n=null,i=null;e.trainBtwnStnsDTO.forEach(e=>{null==t&&(t=e.fromStnCode),null==i&&(i=e.toStnCode),n=e.toStnCode,e.avlClasses.forEach(e=>{null!=e&&null!=e&&""!=e&&this.filterData.classes.set(e,""==this.trainSearch.journeyClass||e==this.trainSearch.journeyClass)}),null!=e.trainType&&("string"==typeof e.trainType?this.filterData.trainType.set(e.trainType,!0):e.trainType.forEach(e=>{this.filterData.trainType.set(e,!0)}))}),this.filterData.source.set(t,!0),this.filterData.destination.set(n,!0),this.filterData.viaStn.set(i,!0)})}filterMultiTrains(e){let t=!1,n=[];this.filterData.depart.forEach((e,t)=>{if(!e){let e=t.split("-");n.push({from:e[0].trim(),to:e[1].trim()})}});let i=[];return this.filterData.arival.forEach((e,t)=>{if(!e){let e=t.split("-");i.push({from:e[0].trim(),to:e[1].trim()})}}),e.filter((e,a,s)=>{var r=null,l=null,o=null,c=null,u=null,g=!0;return e.trainBtwnStnsDTO.forEach(e=>{if(g){if(null==r&&(r=e.fromStnCode),null==o&&(o=e.toStnCode),null==c&&(c=e.departureTime),u=e.arrivalTime,l=e.toStnCode,this.onlyAvlBerth&&null!=e.classAvlDTO){let t=!1;if(e.classAvlDTO.forEach(e=>{t=t||!e.avlDayList[0].availablityStatus.toLowerCase().includes("not")&&(e.avlDayList[0].availablityStatus.toLowerCase().includes("available")||e.avlDayList[0].availablityStatus.toLowerCase().includes("curr")||e.avlDayList[0].availablityStatus.toLowerCase().includes("rac"))}),!t)return!1}if(t=!1,e.avlClasses.forEach(e=>{t=t||1==this.filterData.classes.get(e)}),!t)return g=!1,!1;if(t=!1,null!=e.trainType&&("string"==typeof e.trainType?t=t||1==this.filterData.trainType.get(e.trainType):e.trainType.forEach(e=>{t=t||1==this.filterData.trainType.get(e)}),!t))return g=!1,!1}}),!(!g||1!=this.filterData.source.get(r)||1!=this.filterData.destination.get(l)||1!=this.filterData.viaStn.get(o)||i.length>0&&this.isTimeWithIn(i,u)||n.length>0&&this.isTimeWithIn(n,c)||!this.isSliderTimeWithIn(c,this.filterData.departSlider)||!this.isSliderTimeWithIn(u,this.filterData.arivalSlider)||!this.isSliderTimeWithIn(e.waitingTime,this.filterData.waitTime))})}otherDaysTBIS(e){let t=new Date(this.trainSearch.journeyDate);t.setDate(t.getDate()+e),this.modifySearch.getTrainList(t)}filterTrains(e){let t=!1,n=[];this.filterData.depart.forEach((e,t)=>{if(!e){let e=t.split("-");n.push({from:e[0].trim(),to:e[1].trim()})}});let i=[];return this.filterData.arival.forEach((e,t)=>{if(!e){let e=t.split("-");i.push({from:e[0].trim(),to:e[1].trim()})}}),e.filter((e,a,s)=>{if(this.onlyAvlBerth&&null!=e.classAvlDTO){let t=!1;if(e.classAvlDTO.forEach(e=>{null!=e.avlDayList[0]&&(t=t||!e.avlDayList[0].availablityStatus.toLowerCase().includes("not")&&(e.avlDayList[0].availablityStatus.toLowerCase().includes("available")||e.avlDayList[0].availablityStatus.toLowerCase().includes("curr")||e.avlDayList[0].availablityStatus.toLowerCase().includes("rac")))}),!t)return!1}return 1==this.filterData.source.get(e.fromStnCode)&&1==this.filterData.destination.get(e.toStnCode)&&(t=!1,e.avlClasses.forEach(e=>{t=t||1==this.filterData.classes.get(e)}),!(!t||(t=!1,"string"==typeof e.trainType?t=t||1==this.filterData.trainType.get(e.trainType):e.trainType.forEach(e=>{t=t||1==this.filterData.trainType.get(e)}),!t||i.length>0&&this.isTimeWithIn(i,e.arrivalTime)||n.length>0&&this.isTimeWithIn(n,e.departureTime)||!this.isSliderTimeWithIn(e.departureTime,this.filterData.departSlider)||!this.isSliderTimeWithIn(e.arrivalTime,this.filterData.arivalSlider))))})}isTimeWithIn(e,t){let n=!1;return e.forEach(e=>{e.from<=t&&e.to>t&&(n=!0)}),n}isSliderTimeWithIn(e,t){let n;if(e.includes(":")){let t=e.split(":");n=60*parseInt(t[0])+parseInt(t[1])}else n=e;return n>=14.4*t[0]&&n<=14.4*t[1]}sortfilteredMultiTrainList(e){let t=e[0],n=e[1];return"departs"==this.sortedBy?(t.forEach(e=>{e.sortedOrder=this.sortedOrder}),n.forEach(e=>{e.sortedOrder=this.sortedOrder}),t.sort(this.compareByDepartureTimeForMultiLap),n.sort(this.compareByDepartureTimeForMultiLap)):"arrival"==this.sortedBy?(t.forEach(e=>{e.sortedOrder=this.sortedOrder}),n.forEach(e=>{e.sortedOrder=this.sortedOrder}),t.sort(this.compareByArrivalTimeForMultiLap),n.sort(this.compareByArrivalTimeForMultiLap)):"duration"==this.sortedBy&&(t.sort(this.compareByDurationForMultiLap),n.sort(this.compareByDurationForMultiLap)),"dessending"==this.sortedOrder&&(t.reverse(),n.reverse()),this.filterTrainsCount=t.length+n.length,[t,n]}sortfilteredTrainList(e){let t=e[0],n=e[1];return"departs"==this.sortedBy?(t.forEach(e=>{e.sortedOrder=this.sortedOrder}),n.forEach(e=>{e.sortedOrder=this.sortedOrder}),t.sort(this.compareByDepartureTime),n.sort(this.compareByDepartureTime)):"arrival"==this.sortedBy?(t.forEach(e=>{e.sortedOrder=this.sortedOrder}),n.forEach(e=>{e.sortedOrder=this.sortedOrder}),t.sort(this.compareByArrivalTime),n.sort(this.compareByArrivalTime)):"duration"==this.sortedBy?(t.sort(this.compareByDuration),n.sort(this.compareByDuration)):"fare"==this.sortedBy&&(t.forEach(e=>{e.selectedClass=this.selectedCls,e.sortedOrder=this.sortedOrder}),n.forEach(e=>{e.selectedClass=this.selectedCls,e.sortedOrder=this.sortedOrder}),t.sort(this.compareByFare),n.sort(this.compareByFare)),"dessending"!=this.sortedOrder&&"highToLow"!=this.sortedOrder||(t.reverse(),n.reverse()),this.filterTrainsCount=t.length+n.length,[t,n]}compareByFare(e,t){let n=99999,i=99999,a=e.selectedClass,s=e.sortedOrder;return null!=e.classAvlDTO&&e.classAvlDTO.forEach(e=>{e.enqClass==a&&(n=e.totalFare)}),null!=t.classAvlDTO&&t.classAvlDTO.forEach(e=>{e.enqClass==a&&(i=e.totalFare)}),"highToLow"==s&&(99999==n&&(n=-1),99999==i&&(i=-1)),parseInt(n.toString())<parseInt(i.toString())?-1:parseInt(n.toString())>parseInt(i.toString())?1:0}compareByDepartureTime(e,t){let n=e.sortedOrder,i=new Date(e.journeyDate.getFullYear(),e.journeyDate.getMonth(),e.journeyDate.getDate()),a=new Date(t.journeyDate.getFullYear(),t.journeyDate.getMonth(),t.journeyDate.getDate());if("assending"==n){if(i<a)return-1;if(i>a)return 1;if(e.journeyDate<t.journeyDate)return-1;if(e.journeyDate>t.journeyDate)return 1}else if("dessending"==n){if(i<a)return 1;if(i>a)return-1;if(e.journeyDate<t.journeyDate)return-1;if(e.journeyDate>t.journeyDate)return 1}return 0}compareByArrivalTime(e,t){let n=e.sortedOrder,i=new Date(e.arivalDate.getFullYear(),e.arivalDate.getMonth(),e.arivalDate.getDate()),a=new Date(t.arivalDate.getFullYear(),t.arivalDate.getMonth(),t.arivalDate.getDate());if("assending"==n){if(i<a)return-1;if(i>a)return 1;if(e.arivalDate<t.arivalDate)return-1;if(e.arivalDate>t.arivalDate)return 1}else if("dessending"==n){if(i<a)return 1;if(i>a)return-1;if(e.arivalDate<t.arivalDate)return-1;if(e.arivalDate>t.arivalDate)return 1}return 0}compareByDuration(e,t){return e.duration<t.duration?-1:e.duration>t.duration?1:0}compareByDepartureTimeForMultiLap(e,t){let n=e.sortedOrder;var i=null,a=null;let s=null,r=null;if(e.trainBtwnStnsDTO.forEach(e=>{null==i&&(i=e.departureTime,s=new Date(e.journeyDate.getFullYear(),e.journeyDate.getMonth(),e.journeyDate.getDate()))}),t.trainBtwnStnsDTO.forEach(e=>{null==a&&(a=e.departureTime,r=new Date(e.journeyDate.getFullYear(),e.journeyDate.getMonth(),e.journeyDate.getDate()))}),"assending"==n){if(s<r)return-1;if(s>r)return 1;if(i<a)return-1;if(i>a)return 1}else if("dessending"==n){if(s<r)return 1;if(s>r)return-1;if(i<a)return-1;if(i>a)return 1}return 0}compareByArrivalTimeForMultiLap(e,t){var n=null,i=null;let a=e.sortedOrder,s=null,r=null;if(e.trainBtwnStnsDTO.forEach(e=>{n=e.arrivalTime,s=new Date(e.arivalDate.getFullYear(),e.arivalDate.getMonth(),e.arivalDate.getDate())}),t.trainBtwnStnsDTO.forEach(e=>{i=e.arrivalTime,r=new Date(e.arivalDate.getFullYear(),e.arivalDate.getMonth(),e.arivalDate.getDate())}),"assending"==a){if(s<r)return-1;if(s>r)return 1;if(n<i)return-1;if(n>i)return 1}else if("dessending"==a){if(s<r)return 1;if(s>r)return-1;if(n<i)return-1;if(n>i)return 1}return 0}compareByDurationForMultiLap(e,t){return e.totalDuration<t.totalDuration?-1:e.totalDuration>t.totalDuration?1:0}applyFilter(e){this.filterData=e,this.indirectJourney?null==e?(this.showFilter=!1,this.displayMultiTrainList(),setTimeout(()=>{this.showFilter=!0},50)):([this.filteredMultiLapTrainList,this.filteredAltMultiLapTrainList]=this.sortfilteredMultiTrainList([this.filterMultiTrains(this.jD),this.filterMultiTrains(this.altJD)]),this.journeyDetailDTO=this.filteredMultiLapTrainList,this.alternateJourneyDetailDTO=this.filteredAltMultiLapTrainList,this.showAdsAfterInit()):null==e?(this.showFilter=!1,this.displayTrainList(),setTimeout(()=>{this.showFilter=!0},50)):([this.filteredTrainList,this.filteredAlternateTrainList]=this.sortfilteredTrainList([this.filterTrains(this.trainList),this.filterTrains(this.alternateTrainList)]),this.setJourneyDetailDto(),this.showAdsAfterInit())}filter_toggel(){this.filter_bar=!this.filter_bar}modifySearchBar_toggel(){this.modifySearchBar=!0}displayAds(e,t,n,i){if(this.langService.isAdsEnable){let a=window.googletag;a=window.googletag||{cmd:[]},a.cmd.push(()=>{var t=googletag.sizeMapping().addSize([1220,0],[970,90]).addSize([320,0],[320,50]).build();googletag.defineSlot(e,[[320,50],[970,90]],this.adIdTLT).setTargeting("Destination",this.getToString("destination")).setTargeting("Gender",[this.userService.getGender()]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",this.getToString("source")).setTargeting("Journey_Date",this.userService.formatDateYYYYMMDD(this.trainSearch.journeyDate)).defineSizeMapping(t).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),null!=t&&a.cmd.push(()=>{var e=googletag.sizeMapping().addSize([1220,0],[[970,90],[728,90]]).addSize([320,0],[320,50]).build();googletag.defineSlot(t,[[728,90],[320,50],[970,90]],this.adIdTLB).setTargeting("Destination",this.getToString("destination")).setTargeting("Gender",[this.userService.getGender()]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",this.getToString("source")).setTargeting("Journey_Date",this.userService.formatDateYYYYMMDD(this.trainSearch.journeyDate)).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),a.cmd.push(()=>{var e=googletag.sizeMapping().addSize([1024,0],[[300,250],[300,600],[160,600],[120,600]]).build();googletag.defineSlot(n,[[300,250],[300,600],[120,600],[160,600]],this.adIdTLL).setTargeting("Destination",this.getToString("destination")).setTargeting("Gender",[this.userService.getGender()]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",this.getToString("source")).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),a.cmd.push(()=>{var e=googletag.sizeMapping().addSize([1024,0],[[300,250],[300,600],[160,600],[120,600]]).build();googletag.defineSlot(i,[[300,250],[300,600],[120,600],[160,600]],this.adIdTLL2).setTargeting("Destination",this.getToString("destination")).setTargeting("Gender",[this.userService.getGender()]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",this.getToString("source")).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()})}}displayAdsCenter(e,t){if(this.langService.isAdsEnable){let n=window.googletag;n=window.googletag||{cmd:[]},n.cmd.push(()=>{var n=googletag.sizeMapping().addSize([1220,0],[[970,90],[728,90]]).addSize([320,0],[320,50]).build();googletag.defineSlot(e,[[728,90],[320,50],[970,90]],t).setTargeting("Destination",this.getToString("destination")).setTargeting("Gender",[this.userService.getGender()]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",this.getToString("source")).setTargeting("Journey_Date",this.userService.formatDateYYYYMMDD(this.trainSearch.journeyDate)).defineSizeMapping(n).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()})}}getToString(e){let t="";return"source"==e?this.filterData.source.forEach((e,n)=>{t=t+","+n}):"destination"==e&&this.filterData.destination.forEach((e,n)=>{t=t+","+n}),t=t.replace(",",""),t}trainListCenterAds(){let e=0,t=0;this.indirectJourney?(null!=this.filteredMultiLapTrainList&&null!=this.filteredMultiLapTrainList&&(t=this.filteredMultiLapTrainList.length,this.filteredMultiLapTrainList.forEach(n=>{e+=1,e%4==0&&e<t&&this.displayAdsCenter("/37179215/GPT_NWEB_TRAIN_LIST_CENTER","trainAds_"+this.refreshNo+"_"+n.trainBtwnStnsDTO[0].trainNumber+n.trainBtwnStnsDTO[1].trainNumber)})),e=1,null!=this.filteredAltMultiLapTrainList&&null!=this.filteredAltMultiLapTrainList&&(t=this.filteredAltMultiLapTrainList.length,this.filteredAltMultiLapTrainList.forEach(n=>{e+=1,e%4==0&&e<t&&this.displayAdsCenter("/37179215/GPT_NWEB_TRAIN_LIST_CENTER","trainAds_"+this.refreshNo+"_"+n.trainBtwnStnsDTO[0].trainNumber+n.trainBtwnStnsDTO[1].trainNumber)}))):(null!=this.filteredTrainList&&null!=this.filteredTrainList&&(t=this.filteredTrainList.length,this.filteredTrainList.forEach(n=>{e+=1,e%4==0&&e<t&&this.displayAdsCenter("/37179215/GPT_NWEB_TRAIN_LIST_CENTER","trainAds_"+this.refreshNo+"_"+n.trainNumber)})),e=1,null!=this.filteredAlternateTrainList&&null!=this.filteredAlternateTrainList&&this.filteredAlternateTrainList.forEach(t=>{e+=1,e%4==0&&this.displayAdsCenter("/37179215/GPT_NWEB_TRAIN_LIST_CENTER","trainAdsAlt_"+this.refreshNo+"_"+t.trainNumber)}))}userServey(){this.router.navigate(["enquiry/user-servey"],{queryParams:{sectorName:this.sectorName}})}converToHours(e){return Math.floor(e/60)+"h "+Math.round(e%60)+"m"}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a),o.Ub(u.a),o.Ub(g.b),o.Ub(i.c),o.Ub(p.k),o.Ub(d.d),o.Ub(h.a),o.Ub(b.a),o.Ub(m.a),o.Ub(f.a),o.Ub(p.f))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-train-list"]],viewQuery:function(e,t){var n;1&e&&(o.bd(on,!0),o.bd(cn,!0)),2&e&&(o.Hc(n=o.jc())&&(t.modifySearch=n.first),o.Hc(n=o.jc())&&(t.firstFocus=n.first))},decls:93,vars:73,consts:[[3,"header","closable"],["cd",""],["key","tofrom",3,"header"],["cdtofrom",""],[1,"top-header","hidden-lg","hidden-md","hidden-sm",2,"padding-top","14px","padding-bottom","14px"],[1,"top-header-content","col-xs-11"],[1,"fa","fa-long-arrow-left",2,"padding-right","5px",3,"click"],[1,"pull-right","draw-circle",3,"click"],[1,"fa","fa-pencil"],["class","level_1 hidden-xs","style","margin: -1px 15px 0px 15px;",4,"ngIf"],[1,"hidden-lg","hidden-md","hidden-sm",3,"visible","fullScreen","visibleChange"],[1,"level_1","card-new","hidden-lg","hidden-md","hidden-sm",2,"padding","0px","margin-bottom","5px","margin-top","-1px"],["modifySearch",""],[1,"clearfix",2,"margin-top","2%"],[1,"top-header","hidden-lg","hidden-md","hidden-sm",3,"click"],[1,"fa","fa-long-arrow-left",2,"padding-right","5px"],[2,"font-size","16px"],[1,"col-sm-3","hidden-xs","filter-div"],["class","border-all",4,"ngIf"],[1,"clearfix",2,"margin-top","2px"],[1,"text-center",3,"id"],[1,"text-center",2,"margin-top","20px",3,"id"],[1,"hidden-lg","hidden-md","hidden-sm",3,"visible","fullScreen","baseZIndex","visibleChange"],[1,"filter-div"],["style","height: 92vh;overflow-y: scroll;padding-bottom: 10vh;",4,"ngIf"],[1,"text-center","bottom-btn",3,"click"],[1,"col-sm-9","col-xs-12",2,"padding","0px 15px 15px 0px"],["class","no-pad col-xs-12",4,"ngIf"],[1,"no-pad","col-xs-12","blink","text-right",2,"padding-bottom","0px"],[1,""],[1,"clearfix"],[1,"tbis-div"],["tabindex","0",1,"hidden-xs"],["firstFocus",""],[1,"glyphicon","glyphicon-arrow-right"],[1,"hidden-xs","col-xs-12","clearfix",2,"margin-top","2px"],[1,"pull-left"],[3,"popup","model"],["sort",""],["type","button",1,"active","btnDefault",3,"click"],[1,"hidden-xs"],["type","button",3,"class","click",4,"ngIf"],[1,"pull-right"],["type","button",1,"btnDefault","hidden-xs",3,"keydown.enter","click"],[1,"fa","fa-chevron-left"],[1,"fa","fa-chevron-right"],[1,"fa","fa-filter","hidden-lg","hidden-md","hidden-sm",2,"font-size","3rem","padding-right","6px",3,"click"],[1,"col-xs-12","clearfix",2,"margin-top","15px"],["class","text-center col-xs-12","tabindex","0",4,"ngIf"],[4,"ngIf"],[1,"col-xs-12","clearfix",2,"margin-top","5px"],["style","width: 100%;",4,"ngIf"],[1,"text-center","form-group",3,"id"],["modal","true","draggable","false",3,"contentStyle","header","visible","visibleChange",4,"ngIf"],["appendTo","body",3,"dismissable"],["shortByOverLay",""],[1,"fare-detail-popup","form-group"],["style","width: 49.5%;padding: 3px 0px;",3,"class",4,"ngFor","ngForOf"],[1,"form-group","col-xs-12"],["modal","true","class","fareFilterClass","draggable","false",3,"style","header","visible","visibleChange",4,"ngIf"],[1,"level_1","hidden-xs",2,"margin","-1px 15px 0px 15px"],[1,"border-all"],[3,"filterData","applyFilter"],[2,"height","92vh","overflow-y","scroll","padding-bottom","10vh"],[1,"top-btn",3,"click"],[1,"fa","fa-long-arrow-left"],[2,"padding-left","20px"],[1,"no-pad","col-xs-12"],[1,"col-xs-12","remove-padding","pay-msg","sptrain",2,"font-size","18px"],[1,"fill"],["type","button",3,"click"],[1,"hidden-lg","hidden-md","hidden-sm"],["tabindex","0",1,"text-center","col-xs-12"],[1,"list_text",2,"color","darkred"],[1,"text-center","form-group","ad-min-height",3,"id"],[4,"ngFor","ngForOf"],[1,"form-group","no-pad","col-xs-12","bull-back","border-all"],[3,"journeyDetail","bookingEnable","emitEvent"],["class","text-center",3,"id",4,"ngIf"],[2,"width","100%"],[1,"col-xs-12",2,"text-align","center","background-color","#1457a7","color","#fff","width","100%"],[2,"padding","3px"],["modal","true","draggable","false",3,"contentStyle","header","visible","visibleChange"],[3,"trainNumberInput","trainJourneyDate","showTrainNumberInput","fromStation","showHeader","showAds","showSchedule"],[2,"width","49.5%","padding","3px 0px"],["type","button","style","width: 99%;",3,"class","click",4,"ngIf"],["type","button",2,"width","99%",3,"click"],[2,"font-size","1.2rem"],["modal","true","draggable","false",1,"fareFilterClass",3,"header","visible","visibleChange"],[1,"col-xs-12",2,"padding","0px"],["class","col-sm-6 col-xs-12","style","padding: 10px 0px;font-size: 11px;",4,"ngFor","ngForOf"],[1,"col-xs-12",2,"padding","10px"],[1,"col-sm-2","col-xs-1"],[1,"col-sm-4","col-xs-5"],["type","button",1,"btn","btn-primary",2,"width","99%",3,"click"],[1,"col-sm-6","col-xs-12",2,"padding","10px 0px","font-size","11px"],[1,"col-xs-3"],["type","radio","name","fareFilter",3,"id","value","checked","click"],[1,"col-xs-9",2,"padding","2px 0px 0px 0px"]],template:function(e,t){if(1&e){const e=o.bc();o.Vb(0,"p-toast"),o.Vb(1,"p-confirmDialog",0,1),o.Vb(3,"p-confirmDialog",2,3),o.ac(5,"div",4),o.ac(6,"span",5),o.ac(7,"span",6),o.ic("click",(function(){return t._location.back()})),o.Zb(),o.ac(8,"strong"),o.Tc(9),o.nc(10,"stationName"),o.nc(11,"stationName"),o.Zb(),o.ac(12,"span"),o.Tc(13),o.nc(14,"date"),o.Zb(),o.Zb(),o.ac(15,"span",7),o.ic("click",(function(){return t.modifySearchBar=!0})),o.Vb(16,"span",8),o.Zb(),o.Zb(),o.Rc(17,un,3,0,"div",9),o.ac(18,"p-sidebar",10),o.ic("visibleChange",(function(e){return t.modifySearchBar=e})),o.ac(19,"div",11),o.Vb(20,"app-modify-search",null,12),o.Vb(22,"div",13),o.ac(23,"div",14),o.ic("click",(function(){return t.modifySearchBar=!t.modifySearchBar})),o.ac(24,"span",5),o.Vb(25,"span",15),o.ac(26,"span",16),o.ac(27,"strong"),o.Tc(28),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(29,"div",17),o.Rc(30,gn,2,1,"div",18),o.Vb(31,"div",19),o.Vb(32,"div",20),o.Vb(33,"div",21),o.Zb(),o.ac(34,"p-sidebar",22),o.ic("visibleChange",(function(e){return t.filter_bar=e})),o.ac(35,"div",23),o.Rc(36,pn,6,2,"div",24),o.ac(37,"div",25),o.ic("click",(function(){return t.filter_bar=!1})),o.ac(38,"strong"),o.Tc(39),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(40,"div",26),o.Rc(41,dn,6,1,"div",27),o.ac(42,"div",28),o.ac(43,"span",29),o.Tc(44),o.Zb(),o.Zb(),o.Vb(45,"div",30),o.ac(46,"div",31),o.ac(47,"div",32,33),o.ac(49,"span"),o.Tc(50),o.ac(51,"strong"),o.Tc(52),o.nc(53,"stationName"),o.Vb(54,"span",34),o.Tc(55),o.nc(56,"stationName"),o.nc(57,"date"),o.Zb(),o.Tc(58),o.nc(59,"titlecase"),o.nc(60,"quotaName"),o.Zb(),o.Zb(),o.Vb(61,"div",35),o.ac(62,"div",29),o.ac(63,"span",36),o.Vb(64,"p-menu",37,38),o.ac(66,"button",39),o.ic("click",(function(t){return o.Kc(e),o.Ic(88).show(t)})),o.Tc(67),o.ac(68,"span",40),o.Tc(69),o.Zb(),o.Zb(),o.Rc(70,hn,5,5,"button",41),o.Zb(),o.ac(71,"span",42),o.ac(72,"button",43),o.ic("keydown.enter",(function(){return t.otherDaysTBIS(-1)}))("click",(function(){return t.otherDaysTBIS(-1)})),o.Vb(73,"span",44),o.Tc(74),o.Zb(),o.ac(75,"button",43),o.ic("keydown.enter",(function(){return t.otherDaysTBIS(1)}))("click",(function(){return t.otherDaysTBIS(1)})),o.Tc(76),o.Vb(77,"span",45),o.Zb(),o.ac(78,"span",46),o.ic("click",(function(){return t.filter_bar=!0})),o.Zb(),o.Zb(),o.Zb(),o.Vb(79,"div",47),o.Rc(80,bn,3,0,"div",48),o.Rc(81,yn,4,2,"div",49),o.Vb(82,"div",50),o.Rc(83,Tn,5,2,"div",51),o.Vb(84,"div",50),o.Vb(85,"div",52),o.Zb(),o.Zb(),o.Rc(86,In,2,11,"p-dialog",53),o.ac(87,"p-overlayPanel",54,55),o.ac(89,"div",56),o.Rc(90,An,3,5,"div",57),o.Zb(),o.Vb(91,"div",58),o.Zb(),o.Rc(92,wn,13,10,"p-dialog",59)}2&e&&(o.Cb(1),o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.tc("closable",!1),o.Cb(2),o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.Cb(6),o.Wc(" ",o.qc(10,45,t.trainSearch.origin.split("(")[0].trim().split("-")[1].trim(),"",t.langService.langChoice)," TO ",o.qc(11,49,t.trainSearch.destination.split("(")[0].split("-")[1].trim(),"",t.langService.langChoice)," "),o.Cb(4),o.Vc(" | ",o.pc(14,53,t.trainSearch.journeyDate,"EEE, dd MMM"),""),o.Cb(4),o.tc("ngIf",!t.modifySearchBar),o.Cb(1),o.tc("visible",t.modifySearchBar)("fullScreen",!0),o.Cb(10),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.modifySearch," "),o.Cb(2),o.tc("ngIf",t.showFilter),o.Cb(2),o.tc("id",t.adIdTLL),o.Cb(1),o.tc("id",t.adIdTLL2),o.Cb(1),o.tc("visible",t.filter_bar)("fullScreen",!0)("baseZIndex",1e4),o.Cb(2),o.tc("ngIf",t.showFilter),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.aplyf),o.Cb(2),o.tc("ngIf",null!=t.info),o.Cb(3),o.Uc(t.langService.messageMap.AADHAAR_BASED_BOOKING),o.Cb(3),o.Eb("aria-label","",(null==t.alternateJourneyDetailDTO?null:t.alternateJourneyDetailDTO.length)+(null==t.journeyDetailDTO?null:t.journeyDetailDTO.length),". Result for and displayed for your query"),o.Cb(3),o.Wc(" ",(null==t.alternateJourneyDetailDTO?null:t.alternateJourneyDetailDTO.length)+(null==t.journeyDetailDTO?null:t.journeyDetailDTO.length)," ",null==t.langService.lang?null:t.langService.lang.trainFound," "),o.Cb(2),o.Vc(" ",o.qc(53,56,t.trainSearch.origin.split("(")[0].trim().split("-")[1].trim(),"",t.langService.langChoice)," "),o.Cb(3),o.Wc(" ",o.qc(56,60,t.trainSearch.destination.split("(")[0].trim().split("-")[1].trim(),"",t.langService.langChoice)," | ",o.pc(57,64,t.trainSearch.journeyDate,"EEE, dd MMM yyyy")," "),o.Cb(3),o.Wc(" ",null==t.langService.lang?null:t.langService.lang.forQuota," | ",o.oc(59,67,o.pc(60,69,t.trainSearch.journeyQuota,t.langService.langChoice))," "),o.Cb(6),o.tc("popup",!0)("model",t.sortByList),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.sortBy," "),o.Cb(2),o.Vc("| ",t.langService.lang[t.sortedBy],""),o.Cb(1),o.tc("ngIf",!t.indirectJourney),o.Cb(4),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.prevDay," "),o.Cb(2),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.nextDay," "),o.Cb(4),o.tc("ngIf",t.totalTrainsCount>0&&0==t.filterTrainsCount),o.Cb(1),o.tc("ngIf",null!=t.journeyDetailDTO&&(null==t.journeyDetailDTO?null:t.journeyDetailDTO.length)>0),o.Cb(2),o.tc("ngIf",null!=t.alternateJourneyDetailDTO&&t.alternateJourneyDetailDTO.length>0),o.Cb(2),o.tc("id",t.adIdTLB),o.Cb(1),o.tc("ngIf",t.showSchedule),o.Cb(1),o.Pc(o.yc(72,Ln)),o.tc("dismissable",!0),o.Cb(3),o.tc("ngForOf",t.sortByList),o.Cb(2),o.tc("ngIf",t.showFarePopup))},directives:[v.a,y.a,p.o,C.a,G,fe,ye.a,p.n,Be,sn,rn.a,ln.a],pipes:[k.a,p.f,p.u,_e.a,p.i,I.a],styles:[".t_c1[_ngcontent-%COMP%]{color:#3c3c3c}.bottom-btn[_ngcontent-%COMP%]{bottom:0;position:absolute;background:#fb792b;width:100vw}.bottom-btn[_ngcontent-%COMP%], .top-btn[_ngcontent-%COMP%]{color:#fff;padding:12px}.top-btn[_ngcontent-%COMP%]{background:#213d77;width:-webkit-fill-available}"]}),e})();class Rn{constructor(){this.passengerSrCtznConcession=0,this.mpMemberFlag=!1,this.selected=!1,this.checkBoxFlag=!1}}class Pn{}var Bn=n("fy4W"),En=n("rg3I"),Fn=n("LuMj");function jn(e,t){if(1&e&&(o.ac(0,"span",8),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.selectOption," ")}}function Vn(e,t){if(1&e){const e=o.bc();o.ac(0,"span",9),o.ac(1,"p-radioButton",10),o.ic("click",(function(){return o.Kc(e),o.mc().clickSoftOption("A")}))("ngModelChange",(function(t){return o.Kc(e),o.mc().selectedRadio=t})),o.Zb(),o.ac(2,"label",11),o.ic("click",(function(){return o.Kc(e),o.mc().clickSoftOption("A")})),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.vc("id","",e.id,"accrual"),o.tc("ngModel",e.selectedRadio),o.Cb(1),o.vc("for","",e.id,"accrual"),o.uc("title",null==e.langService.lang?null:e.langService.lang.earnPoints),o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.accural)}}function Un(e,t){if(1&e){const e=o.bc();o.ac(0,"span",9),o.ac(1,"p-radioButton",12),o.ic("click",(function(){return o.Kc(e),o.mc().clickSoftOption("R")}))("ngModelChange",(function(t){return o.Kc(e),o.mc().selectedRadio=t})),o.Zb(),o.ac(2,"label",11),o.ic("click",(function(){return o.Kc(e),o.mc().clickSoftOption("R")})),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.vc("id","",e.id,"redemption"),o.tc("ngModel",e.selectedRadio),o.Cb(1),o.vc("for","",e.id,"redemption"),o.uc("title",null==e.langService.lang?null:e.langService.lang.redeemUrReward),o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.redemption)}}function qn(e,t){1&e&&(o.ac(0,"div",13),o.Tc(1," Accural and Redemption not allowed for the selected bank "),o.Zb())}function Gn(e,t){if(1&e){const e=o.bc();o.ac(0,"tr"),o.ac(1,"td",18),o.Tc(2),o.Zb(),o.ac(3,"td",19),o.ac(4,"input",24),o.ic("ngModelChange",(function(n){return o.Kc(e),t.$implicit.softMemberId=n})),o.Zb(),o.Zb(),o.ac(5,"td",19),o.Tc(6),o.Zb(),o.ac(7,"td",19),o.Tc(8),o.Zb(),o.ac(9,"td",19),o.Tc(10),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index;o.Cb(2),o.Uc(n+1),o.Cb(2),o.tc("ngModel",e.softMemberId)("readonly",e.softMemberFlag),o.Cb(2),o.Uc(e.passengerName),o.Cb(2),o.Uc(e.passengerGender),o.Cb(2),o.Uc(e.passengerAge)}}function _n(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.ac(1,"div",14),o.ac(2,"div",15),o.ac(3,"table",16),o.ac(4,"thead"),o.ac(5,"tr",17),o.ac(6,"th",18),o.Tc(7),o.Zb(),o.ac(8,"th",19),o.Tc(9),o.Zb(),o.ac(10,"th",19),o.Tc(11),o.Zb(),o.ac(12,"th",19),o.Tc(13),o.Zb(),o.ac(14,"th",19),o.Tc(15),o.Zb(),o.Zb(),o.Zb(),o.ac(16,"tbody"),o.Rc(17,Gn,11,6,"tr",20),o.Zb(),o.Zb(),o.ac(18,"div",21),o.ac(19,"button",22),o.ic("click",(function(){return o.Kc(e),o.mc().onReset()})),o.Tc(20),o.Zb(),o.ac(21,"button",23),o.ic("click",(function(){return o.Kc(e),o.mc().onFetchLoyaltyPsgns()})),o.Tc(22),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(7),o.Uc(null==e.langService.lang?null:e.langService.lang.sno),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.loyalityNumber),o.Cb(2),o.Vc("",null==e.langService.lang?null:e.langService.lang.name," "),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.gender),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.age),o.Cb(2),o.tc("ngForOf",e.passengerList),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.reset),o.Cb(1),o.tc("disabled",e.loading||e.noInputs),o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.fetchPasngr)}}let Jn=(()=>{class e{constructor(e){this.langService=e,this.onClickSoftOption=new o.n,this.fetchLoyaltyPsgns=new o.n,this.reset=new o.n}ngOnInit(){}ngAfterViewInit(){this.clickSoftOption("A")}clickSoftOption(e){this.selectedRadio=e,this.onClickSoftOption.emit(e)}onReset(){this.reset.emit()}onFetchLoyaltyPsgns(){this.fetchLoyaltyPsgns.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-loyalty-deatils"]],inputs:{softAccountSummary:"softAccountSummary",softPassengersFetched:"softPassengersFetched",skipStep:"skipStep",options:"options",passengerList:"passengerList",loading:"loading",noInputs:"noInputs",id:"id",multiLapBooking:"multiLapBooking",loyaltyRedemptionBooking:"loyaltyRedemptionBooking"},outputs:{onClickSoftOption:"onClickSoftOption",fetchLoyaltyPsgns:"fetchLoyaltyPsgns",reset:"reset"},decls:12,vars:8,consts:[[1,"col-xs-12",2,"font-size","1.7rem","margin-top","10px","font-stretch","ultra-expanded"],[2,"font-weight","700"],[1,"col-xs-12","nopadding","form-group",2,"margin-top","15px","font-size","1.6rem"],[1,"col-xs-12"],["style","font-stretch: ultra-expanded;",4,"ngIf"],["style","margin-left: 15px;",4,"ngIf"],["class","col-xs-12","style","color: red;",4,"ngIf"],[4,"ngIf"],[2,"font-stretch","ultra-expanded"],[2,"margin-left","15px"],["name","softOption","value","A",3,"id","ngModel","click","ngModelChange"],[2,"margin-left","10px",3,"for","title","click"],["name","softOption","value","R",3,"id","ngModel","click","ngModelChange"],[1,"col-xs-12",2,"color","red"],[1,"panel-body"],[1,"col-xs-12","nopadding",2,"background","rgb(249, 249, 249)","border-radius","0px","border","1px solid darkgray"],[1,"table","table-hover","table-responsive",2,"width","100% !important"],[2,"background-color","rgb(33, 61, 119)","color","white"],[1,"col-md-1"],[1,"col-md-2"],[4,"ngFor","ngForOf"],[1,"text-left",2,"margin","10px 0px"],["type","button",1,"btnDefault",2,"margin","0px 20px",3,"click"],["type","button",1,"btnDefault",3,"disabled","click"],["type","text","size","15","maxlength","11","onkeypress","return event.charCode >= 48 && event.charCode <= 57",3,"ngModel","readonly","ngModelChange"]],template:function(e,t){1&e&&(o.ac(0,"div",0),o.Tc(1),o.ac(2,"span",1),o.Tc(3),o.Zb(),o.Zb(),o.ac(4,"div"),o.ac(5,"div",2),o.ac(6,"div",3),o.Rc(7,jn,2,1,"span",4),o.Rc(8,Vn,4,5,"span",5),o.Rc(9,Un,4,5,"span",5),o.Zb(),o.Rc(10,qn,2,0,"div",6),o.Zb(),o.Rc(11,_n,23,9,"span",7),o.Zb()),2&e&&(o.Cb(1),o.Wc(" ",t.softAccountSummary.shortBankName," ",null==t.langService.lang?null:t.langService.lang.loyaltyDetails2,": "),o.Cb(2),o.Uc(t.softAccountSummary.totalPointsAvailable),o.Cb(4),o.tc("ngIf",t.softAccountSummary.loyaltyAccrualBookingAllowed||t.softAccountSummary.loyaltyRedemptionBookingAllowed),o.Cb(1),o.tc("ngIf",t.softAccountSummary.loyaltyAccrualBookingAllowed),o.Cb(1),o.tc("ngIf",!t.multiLapBooking&&t.softAccountSummary.loyaltyRedemptionBookingAllowed),o.Cb(1),o.tc("ngIf",!t.softAccountSummary.loyaltyAccrualBookingAllowed&&!t.softAccountSummary.loyaltyRedemptionBookingAllowed),o.Cb(1),o.tc("ngIf",!t.loyaltyRedemptionBooking&&!t.skipStep&&!t.options&&t.softAccountSummary.loyaltyAccrualBookingAllowed))},directives:[p.o,Fn.a,S.n,S.q,p.n,S.b,S.k],styles:[".det_div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}"]}),e})();const zn=["selectOptionfl"];function Kn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",32,33),o.ac(2,"app-loyalty-deatils",34),o.ic("onClickSoftOption",(function(t){return o.Kc(e),o.mc(3).onClickSoftOption(t)}))("reset",(function(){return o.Kc(e),o.mc(3).reset()}))("fetchLoyaltyPsgns",(function(){return o.Kc(e),o.mc(3).fetchLoyaltyPsgns()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(3);o.Cb(2),o.tc("softAccountSummary",e.softAccountSummary)("softPassengersFetched",e.softPassengersFetched)("skipStep",e.skipStep)("options",e.options)("passengerList",e.passengerList)("loyaltyRedemptionBooking",e.loyaltyRedemptionBooking)("multiLapBooking",e.journeyDetails.multilapBooking)("id","mobile-")}}const Hn=function(e){return{my_class:e}};function Qn(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.ac(1,"div",24),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc(2).lolity_Detail(n.loyaltyNumber)}))("keydown.Enter",(function(){o.Kc(e);const n=t.$implicit;return o.mc(2).lolity_Detail(n.loyaltyNumber)})),o.ac(2,"div",25),o.Vb(3,"img",26),o.Zb(),o.ac(4,"div",27),o.ac(5,"div",28),o.Tc(6),o.Zb(),o.ac(7,"div",29),o.ac(8,"div",30),o.Tc(9),o.Zb(),o.ac(10,"div",30),o.Tc(11),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Rc(12,Kn,3,8,"div",31),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc(2);o.Cb(1),o.tc("ngClass",o.zc(9,Hn,null!=n.softAccountSummary&&e.loyaltyNumber===n.softAccountSummary.loyaltyNumber)),o.Cb(2),o.vc("src","./assets/images/loyaltyImages/",e.bankId,".png",o.Mc),o.uc("alt",e.imageName),o.Cb(3),o.Vc(" ",e.shortBankName," "),o.Cb(3),o.Wc(" ",null==n.langService.lang?null:n.langService.lang.loyaltyMembershipId,": ",e.loyaltyNumber," "),o.Cb(2),o.Wc(" ",null==n.langService.lang?null:n.langService.lang.loyaltyDetails4,": ",e.softAccountStatus," "),o.Cb(1),o.tc("ngIf",n.showDetail&&e.bankName==n.softAccountSummary.bankName)}}function $n(e,t){if(1&e&&(o.ac(0,"div",22),o.Rc(1,Qn,13,11,"span",23),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngForOf",e.softAccountSummaryDTO)}}function Yn(e,t){if(1&e){const e=o.bc();o.ac(0,"div",35),o.ac(1,"app-loyalty-deatils",34),o.ic("onClickSoftOption",(function(t){return o.Kc(e),o.mc().onClickSoftOption(t)}))("reset",(function(){return o.Kc(e),o.mc().reset()}))("fetchLoyaltyPsgns",(function(){return o.Kc(e),o.mc().fetchLoyaltyPsgns()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.tc("softAccountSummary",e.softAccountSummary)("softPassengersFetched",e.softPassengersFetched)("skipStep",e.skipStep)("options",e.options)("passengerList",e.passengerList)("loyaltyRedemptionBooking",e.loyaltyRedemptionBooking)("multiLapBooking",e.journeyDetails.multilapBooking)("id","web-")}}function Wn(e,t){if(1&e&&(o.ac(0,"div",36),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.loyaltyDetails3," ")}}const Xn=function(){return{height:"0px"}};let ei=(()=>{class e{constructor(e,t,n,i,a,s,r){this.router=e,this.userService=t,this.store=n,this.commonService=i,this.bookingService=a,this.langService=s,this.messageService=r,this.softPassengersFetched=!1,this.loading=!1,this.loyaltyRedemptionBooking=!1,this.skipStep=!1,this.adIdT="div-gpt-ad-1595847791757-0",this.adIdB="div-gpt-ad-1595847962111-0",this.maxPsgn=0,this.options=!0,this.showDetail=!1,this.lolityDetailShow=!1,this.softAccountSummaryDTO=[],this.adIdT=this.userService.getAdsRandomId(),this.adIdB=this.userService.getAdsRandomId()}ngOnInit(){this.store.select(r.j).subscribe(e=>{void 0!==e&&(this.journeyDetails=e,this.journeyDetails.lapDetails.forEach(e=>{this.bookingConfigurables=e.avlDetails.bkgCfg,this.maxNameLength=this.bookingConfigurables.maxNameLength,(0==this.maxPsgn||this.maxPsgn>=this.bookingConfigurables.maxPassengers)&&(this.maxPsgn=this.bookingConfigurables.maxPassengers)}))}),this.initInputs(),this.loyaltyBankDetails(),1==this.softAccountSummaryDTO.length&&this.lolity_Detail(this.softAccountSummaryDTO[0].loyaltyNumber)}ngAfterViewInit(){window.scroll({top:0,left:0,behavior:"smooth"}),this.langService.isAdsEnable&&this.displayAds("/37179215/GPT_NWEB_FETCH_LOYALTY_TOP",null)}displayAds(e,t){let n=window.googletag||{cmd:[]};n.cmd.push(()=>{var t=googletag.sizeMapping().addSize([1280,0],[[1200,250],[970,250],[970,90],[728,90]]).addSize([980,0],[[970,250],[970,90],[728,90]]).addSize([768,0],[728,90]).addSize([320,0],[300,250]).build();googletag.defineSlot(e,[[970,250],[970,90],[300,250],[728,90],[1200,250]],this.adIdT).setTargeting("Gender",[this.userService.getGender]).setTargeting("Age",[this.userService.getAge()]).defineSizeMapping(t).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),n.cmd.push(()=>{var e=googletag.sizeMapping().addSize([980,0],[[970,90],[728,90]]).addSize([768,0],[728,90]).addSize([320,0],[320,50]).build();googletag.defineSlot(t,[[320,50],[970,90],[728,90]],this.adIdB).setTargeting("Gender",[this.userService.getGender]).setTargeting("Age",[this.userService.getAge()]).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),googletag.display(this.adIdT)}initInputs(){this.softDto=new Pn,this.softDto.passengerDetailDTO=new Array;for(let e=0;e<this.maxPsgn;e++)this.softDto.passengerDetailDTO.push(new Rn)}get passengerList(){return Array.isArray(this.softDto.passengerDetailDTO)?this.softDto.passengerDetailDTO:Array.of(this.softDto.passengerDetailDTO)}fetchLoyaltyPsgns(){this.loading=!0,console.log("fetchLoyaltyPassengers : "+JSON.stringify(this.passengerList)),this.bookingService.getLoyaltyPassengers(this.softDto).subscribe(e=>{console.log("Soft passengers response : "+JSON.stringify(e)),this.softDto=e,this.softDto.error&&this.messageService.add({life:this.langService.life,severity:"error",summary:"Error",detail:this.softDto.error}),this.loading=!1,this.softDto.passengerDetailDTO=this.passengerList;let t=this.softDto.passengerDetailDTO;if(null!=t){this.passengerInput=[];let e=[];for(let n=0;n<this.maxPsgn;n++)null!=t[n]&&null!=t[n].passengerName&&null!=t[n].passengerName&&""!=t[n].passengerName.trim()&&null!=t[n].passengerAge&&null!=t[n].passengerAge&&null!=t[n].passengerGender&&null!=t[n].passengerGender&&""!=t[n].passengerGender.trim()&&e.push(t[n]);e.length>0?this.journeyDetails.lapDetails.forEach(t=>{this.passengerInput.push(e)}):this.reset()}if(null!=this.passengerInput&&this.passengerInput.length>0){this.softPassengersFetched=!0;var n=JSON.parse(JSON.stringify(this.journeyDetails));n.bankId=this.softAccountSummary.bankId,this.store.dispatch(new l.l(n))}})}continueBooking(){if(this.commonService.returnJourny&&null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers&&this.commonService.initialPassengers[0].length>0&&(this.passengerInput=this.commonService.initialPassengers),this.loyaltyRedemptionBooking){const e=Object.assign({},this.journeyDetails);e.loyaltyRedemptionBooking=!0,this.store.dispatch(new l.l(e));let t=new Rn,n=null;if(this.userService.userResponse.userConfigurablesDTOs.forEach(e=>{null==n&&e.softMemberId==this.softAccountSummary.loyaltyNumber&&null!=e.name&&null!=e.name&&(n=e)}),null==n)return void this.messageService.add({life:this.langService.life,severity:"error",summary:"Error",detail:"No valid soft account found for redemption booking"});t.passengerName=n.name.substring(0,this.maxNameLength).trim(),t.passengerAge=n.age,t.passengerGender=n.gender,t.softMemberId=null,t.passengerSrCtznConcession=0,this.commonService.initialPassengers=[],this.journeyDetails.lapDetails.forEach(e=>{this.commonService.initialPassengers.push([t])}),this.commonService.accrualBooking=!1}else if(null!=this.passengerInput&&null!=this.passengerInput&&this.passengerInput.length>0&&!this.skipStep){this.commonService.initialPassengers=this.passengerInput,this.skipStep||(this.commonService.accrualBooking=!0);const e=Object.assign({},this.journeyDetails);e.numberOfPsgns=this.passengerInput[0].length,this.store.dispatch(new l.l(e))}if(this.skipStep){if(this.commonService.replan&&null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers&&this.commonService.initialPassengers.length>0){if(null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers&&this.commonService.initialPassengers.length>0)for(let e of this.commonService.initialPassengers[0])e.softMemberFlag=!1,e.softMemberId=null}else this.store.dispatch(new Bn.a(new Array)),this.commonService.initialPassengers=void 0;this.commonService.accrualBooking=!1}this.router.navigate(["booking/psgninput"])}reset(){this.initInputs(),this.softPassengersFetched=!1,this.loyaltyRedemptionBooking=!1,this.skipStep=!1,this.softDto.bankId=this.softAccountSummary.bankId}replan(){this.router.navigate(["train-search"])}skip(){this.router.navigate(["booking/psgninput"])}get noInputs(){const e=this.passengerList;for(let t=0;t<e.length;t++)if(null!=e[t].softMemberId&&""!==e[t].softMemberId.toString()&&!e[t].softMemberFlag)return!1;return!0}onClickSoftOption(e){this.options=!1,"A"==e?(this.softPassengersFetched=!1,this.loyaltyRedemptionBooking=!1,this.skipStep=!1,this.softDto.bankId=this.softAccountSummary.bankId,this.passengerList[0].softMemberId=this.softAccountSummary.loyaltyNumber):"R"==e?(this.softPassengersFetched=!0,this.loyaltyRedemptionBooking=!0,this.skipStep=!1,this.softDto.bankId=this.softAccountSummary.bankId):"S"==e&&(this.softPassengersFetched=!0,this.loyaltyRedemptionBooking=!1,this.skipStep=!0,this.continueBooking())}loyaltyBankDetails(){this.lolityDetailShow=!1,null!=this.userService.userResponse&&null!=this.userService.userResponse&&void 0!==this.userService.userResponse.userConfigurablesDTOs&&(this.softAccountSummaryDTO=[],this.softBankList=Array.isArray(this.userService.userResponse.softBankList)?this.userService.userResponse.softBankList:Array.of(this.userService.userResponse.softBankList),this.userService.userResponse.userConfigurablesDTOs.forEach(e=>{if("true"==e.softUser&&null!=e.softAccountSummaryDTO){this.lolityDetailShow=!0;let t=JSON.parse(JSON.stringify(e.softAccountSummaryDTO));const n=new Date(t.expiryDate);t.expiryDate=(n.getDate()<10?"0"+n.getDate():n.getDate())+"-"+(n.getMonth()<9?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+n.getFullYear(),t.softAccountStatus=t.softAccountStatus.split(" ").map((function(e){return e[0]})).join(""),t.shortBankName="IRCTC "+t.bankName.replace(" Bank","").replace(" Credit",""),t.imageName=t.bankName.split(" ")[0],this.softBankList.forEach(n=>{n.paymentModeName==e.softAccountSummaryDTO.loyaltyNumber&&(t.bankId=n.bankId)}),t.loyaltyAccrualBookingAllowed="true"==e.loyaltyAccrualBookingAllowed,t.loyaltyRedemptionBookingAllowed="true"==e.loyaltyRedemptionBookingAllowed,this.softAccountSummaryDTO.push(t)}}))}lolity_Detail(e){null!=this.softAccountSummary&&this.softAccountSummary.loyaltyNumber==e||(this.softAccountSummaryDTO.forEach(t=>{t.loyaltyNumber==e&&(this.softAccountSummary=t,this.showDetail=!0)}),this.reset(),this.options=!1,this.softPassengersFetched=!1,this.loyaltyRedemptionBooking=!1,this.skipStep=!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(i.c),o.Ub(u.a),o.Ub(g.b),o.Ub(f.a),o.Ub(En.a),o.Ub(c.a),o.Ub(d.d))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-fetch-loyalty-passengers"]],viewQuery:function(e,t){var n;1&e&&o.bd(zn,!0),2&e&&o.Hc(n=o.jc())&&(t.selectOptionfl=n.first)},decls:31,vars:17,consts:[[1,"container"],[1,"text-center",2,"text-align","center"],[1,"text-center",3,"id"],[1,"bth_header","heading-font","pull-left",2,"font-size","2.5rem","padding-left","0px"],[1,"col-xs-12","pull-left","zeroPadding",2,"line-height","35px","margin-bottom","20px"],[1,"pay-msg","sptrain",2,"padding-left","10px"],[1,"col-xs-12","zeroPadding",2,"height","600px","border","1px solid darkgray"],[1,"col-xs-12","col-md-4","nopadding",2,"min-height","598px","background","rgb(249, 249, 249)","border-right","1px solid darkgray"],["class","",4,"ngIf"],[1,"col-xs-12","col-md-8","nopadding"],["class","hidden-xs hidden-sm","style","min-height: 250px;",4,"ngIf"],["class","col-xs-12 noPadding","style","font-size: 2rem; margin-top: 10px; min-height: 250px;",4,"ngIf"],[1,"text-left","hidden-xs",2,"margin","10px 0px"],["type","button",1,"btnDefault",2,"margin","0px 20px",3,"click"],["type","button",1,"btn","btn-primary","btnDefault",2,"border-radius","0px !important",3,"disabled","click"],[1,"form-group","col-xs-12","t-body"],["position","bottom",1,"col-xs-12","hidden-lg","hidden-md","hidden-sm",3,"modal","visible","ngStyle"],[1,"text-center"],[1,"pull-left",2,"width","49.9%"],["type","button",1,"btn","btn-profile","form-group",2,"width","100%",3,"click"],[1,"pull-right",2,"width","49.9%"],["type","button",1,"btn","btn-profile","form-group",2,"width","100%",3,"disabled","click"],[1,""],[4,"ngFor","ngForOf"],[1,"col-xs-12",2,"cursor","pointer","margin","10px 0px","padding","10px 0px",3,"ngClass","click","keydown.Enter"],[1,"col-xs-2","nopadding","text-center",2,"line-height","69px","border-right","2px solid lightgray"],["appLazyLoad","","rel","preload","appLazyLoad","",2,"width","60%",3,"src","alt"],[1,"col-xs-10","nopadding"],[1,"col-xs-12",2,"font-size","1.5rem"],[1,"col-xs-12",2,"font-size","1.4rem"],[1,"col-xs-12","nopadding"],["class","hidden-lg hidden-md",4,"ngIf"],[1,"hidden-lg","hidden-md"],["el",""],[3,"softAccountSummary","softPassengersFetched","skipStep","options","passengerList","loyaltyRedemptionBooking","multiLapBooking","id","onClickSoftOption","reset","fetchLoyaltyPsgns"],[1,"hidden-xs","hidden-sm",2,"min-height","250px"],[1,"col-xs-12","noPadding",2,"font-size","2rem","margin-top","10px","min-height","250px"]],template:function(e,t){1&e&&(o.Vb(0,"p-toast"),o.ac(1,"div",0),o.ac(2,"div",1),o.Vb(3,"div",2),o.Zb(),o.ac(4,"div",3),o.ac(5,"span"),o.Tc(6),o.Zb(),o.Zb(),o.ac(7,"div",4),o.ac(8,"div",5),o.Tc(9),o.Zb(),o.Zb(),o.ac(10,"div",6),o.ac(11,"div",7),o.Rc(12,$n,2,1,"div",8),o.Zb(),o.ac(13,"div",9),o.Rc(14,Yn,2,8,"div",10),o.Rc(15,Wn,2,1,"div",11),o.ac(16,"div",12),o.ac(17,"button",13),o.ic("click",(function(){return t.onClickSoftOption("S")})),o.Tc(18),o.Zb(),o.ac(19,"button",14),o.ic("click",(function(){return t.continueBooking()})),o.Tc(20),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(21,"div",15),o.Vb(22,"div",2),o.Zb(),o.ac(23,"p-sidebar",16),o.ac(24,"div",17),o.ac(25,"div",18),o.ac(26,"button",19),o.ic("click",(function(){return t.onClickSoftOption("S")})),o.Tc(27),o.Zb(),o.Zb(),o.ac(28,"div",20),o.ac(29,"button",21),o.ic("click",(function(){return t.continueBooking()})),o.Tc(30),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.Cb(3),o.tc("id",t.adIdT),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.loyaltyDetails1),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.p2," "),o.Cb(3),o.tc("ngIf",t.lolityDetailShow),o.Cb(2),o.tc("ngIf",t.showDetail),o.Cb(1),o.tc("ngIf",!t.showDetail),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.skip),o.Cb(1),o.tc("disabled",!t.softPassengersFetched),o.Cb(1),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22),o.Cb(2),o.tc("id",t.adIdB),o.Cb(1),o.tc("modal",!1)("visible",!0)("ngStyle",o.yc(16,Xn)),o.Cb(4),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.skip," "),o.Cb(2),o.tc("disabled",!t.softPassengersFetched),o.Cb(1),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22," "))},directives:[v.a,p.o,C.a,p.p,p.n,p.m,Jn],styles:["table[_ngcontent-%COMP%]{border:1px #337ab7}table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], table[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border-top-color:#337ab7;border-bottom-color:#337ab7}"]}),e})();var ti=n("jq8n");function ni(e,t){if(1&e&&(o.ac(0,"span",11),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(e.message)}}function ii(e,t){if(1&e&&(o.ac(0,"span",19),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(e.message)}}function ai(e,t){if(1&e&&(o.ac(0,"b"),o.Rc(1,ni,2,1,"span",17),o.Rc(2,ii,2,1,"span",18),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf",e.isError),o.Cb(1),o.tc("ngIf",!e.isError)}}function si(e,t){if(1&e){const e=o.bc();o.ac(0,"div",22),o.ic("click",(function(){return o.Kc(e),o.mc(2).onclickResendOTP()}))("keydown.enter",(function(){return o.Kc(e),o.mc(2).onclickResendOTP()})),o.ac(1,"p"),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Db("aria-label",null==e.langService.ariaLang?null:e.langService.ariaLang.otpNotReceived),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.otpNotReceived)}}function ri(e,t){if(1&e){const e=o.bc();o.ac(0,"div",9),o.ac(1,"label",10),o.Tc(2),o.ac(3,"span",11),o.Tc(4,"*"),o.Zb(),o.Zb(),o.ac(5,"input",20),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc().otp=t})),o.Zb(),o.Rc(6,si,3,2,"div",21),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Vc("",null==e.langService.lang?null:e.langService.lang.otp," "),o.Cb(3),o.uc("placeholder",null==e.langService.lang?null:e.langService.lang.otp),o.tc("ngModel",e.otp),o.Cb(1),o.tc("ngIf",e.resendOTP)}}function li(e,t){if(1&e){const e=o.bc();o.ac(0,"div",23),o.ac(1,"button",24),o.ic("click",(function(){return o.Kc(e),o.mc().onClickSubmit()})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.submit)}}function oi(e,t){if(1&e){const e=o.bc();o.ac(0,"div",25),o.ac(1,"button",26),o.ic("click",(function(){return o.Kc(e),o.mc().back()})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.back)}}function ci(e,t){if(1&e){const e=o.bc();o.ac(0,"div",23),o.ac(1,"button",24),o.ic("click",(function(){return o.Kc(e),o.mc().onClickSubmit()})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.submitOtpButton)}}function ui(e,t){if(1&e){const e=o.bc();o.ac(0,"div",25),o.ac(1,"button",27),o.ic("click",(function(){return o.Kc(e),o.mc().edit()})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Wc("",null==e.langService.lang?null:e.langService.lang.edit," ",null==e.langService.lang?null:e.langService.lang.pnr,"")}}let gi=(()=>{class e{constructor(e,t,n,i,a,s,r){this.userService=e,this.store=t,this.langService=n,this.bookingService=i,this.commonService=a,this.router=s,this.datePipe=r,this.isError=!1,this.otpSend=!1,this.resendOTP=!1}ngOnInit(){this.store.select(r.j).subscribe(e=>{void 0!==e&&(this.jd=e)})}onclickResendOTP(){this.onClickSubmit(1)}edit(){this.message=void 0,this.otpSend=!1,this.otp=void 0,this.resendOTP=!1}back(){this.router.navigate(["/booking/train-list"])}onClickSubmit(e=0){if(this.message=void 0,""===this.pnrNumber||void 0===this.pnrNumber)return void(this.message=this.langService.errorMsg.pnrEnquiryErr1);if(isNaN(Number(this.pnrNumber)))return void(this.message=this.langService.errorMsg.pnrEnquiryErr2);let t=new ti.a;if(t.pnrNumber=this.pnrNumber,1!=e){if(this.otpSend&&(""===this.otp||void 0===this.otp))return void(this.message=this.langService.errorMsg.bookingValOtpReq);t.trainNo=this.jd.lapDetails[0].avlDetails.trainNo,t.fromStation=this.jd.lapDetails[0].avlDetails.from,t.toStation=this.jd.lapDetails[0].avlDetails.to,t.journeyDate=this.datePipe.transform(this.jd.lapDetails[0].avlDetails.journeyDate,"yyyyMMdd"),t.journeyClass=this.jd.lapDetails[0].avlDetails.enqClass,t.journeyQuota=this.jd.lapDetails[0].journeyQuota,t.journeyType=1,null!=this.otp&&(t.otpCode=this.otp)}else t.otpResend=1;this.langService.loader=!0,this.doEnq(t)}doEnq(e,t){this.bookingService.linkpnrenq(e,t).subscribe(e=>{this.langService.loader=!1,console.log(JSON.stringify(e)),null==e.errorMessage?null!=e.passengerList?(this.passengerInput=Array.isArray(e.passengerList)?e.passengerList:Array.of(e.passengerList),this.reDirectToPsgnInputPage()):(this.otpSend=!0,this.isError=!1,this.resendOTP=!1,this.message=e.status,Object(s.a)(6e3).subscribe(()=>{this.resendOTP=!0})):(this.message=e.errorMessage,this.isError=!0)})}reDirectToPsgnInputPage(){this.commonService.initialPassengers=[],this.jd.lapDetails.forEach((e,t)=>{this.commonService.initialPassengers.push(this.passengerInput)});const e=Object.assign({},this.jd);e.numberOfPsgns=this.passengerInput.length,e.nameAgeGenderReadOnly=!0,e.mainJourneyPnr=this.pnrNumber,this.store.dispatch(new l.l(e)),this.router.navigate(["/booking/psgninput"])}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(u.a),o.Ub(g.b),o.Ub(c.a),o.Ub(En.a),o.Ub(f.a),o.Ub(i.c),o.Ub(p.f))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-pnr-input"]],decls:22,vars:11,consts:[[1,"container"],["tabindex","0",1,"form-group","text-center","row"],["firstInput",""],[4,"ngIf"],[1,"",2,"max-width","600px","margin","0 auto","padding-top","10px"],[1,"pnr-detail","col-xs-12"],[1,""],["action","",1,"form-inline"],[1,"form-group",2,"min-width","100%"],[2,"padding-top","10px"],[1,"col-xs-6",2,"padding","5px","text-align","right"],[1,"mandatry"],["maxlength","10","type","text","name","pnrNumber","value","","aria-label","Enter p.n.r. Number for linking with this ticket","autocomplete","off",1,"form-control",3,"readonly","ngModel","placeholder","ngModelChange"],["style","padding-top: 10px",4,"ngIf"],[1,"form-group","col-xs-12","text-center",2,"padding-top","10px"],["class","col-xs-6 pull-right",4,"ngIf"],["class","col-xs-6",4,"ngIf"],["class","mandatry",4,"ngIf"],["class","green-text",4,"ngIf"],[1,"green-text"],["type","text","id","otp","name","otp","aria-label","Enter o.t.p. send to your mobile number linked with your P.N.R.","autocomplete","off",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["class","green-text text-center col-xs-12","style","cursor: pointer;padding-top: 10px;","tabindex","0",3,"click","keydown.enter",4,"ngIf"],["tabindex","0",1,"green-text","text-center","col-xs-12",2,"cursor","pointer","padding-top","10px",3,"click","keydown.enter"],[1,"col-xs-6","pull-right"],["type","submit","aria-label","Submit O.T.P. Code",1,"btn","btn-primary","pull-left",3,"click"],[1,"col-xs-6"],["type","submit","aria-label","Submit O.T.P. Code",1,"btn","btn-primary","pull-right",3,"click"],["type","button","aria-label","Cancel login",1,"btn","btn-primary","pull-right",3,"click"]],template:function(e,t){1&e&&(o.Vb(0,"p-toast"),o.ac(1,"div",0),o.ac(2,"div",1,2),o.Rc(4,ai,3,2,"b",3),o.Zb(),o.ac(5,"div",4),o.ac(6,"div",5),o.ac(7,"div",6),o.ac(8,"form",7),o.ac(9,"div",8),o.ac(10,"div",9),o.ac(11,"label",10),o.Tc(12),o.ac(13,"span",11),o.Tc(14,"*"),o.Zb(),o.Zb(),o.ac(15,"input",12),o.ic("ngModelChange",(function(e){return t.pnrNumber=e})),o.Zb(),o.Zb(),o.Rc(16,ri,7,4,"div",13),o.Zb(),o.ac(17,"div",14),o.Rc(18,li,3,1,"div",15),o.Rc(19,oi,3,1,"div",16),o.Rc(20,ci,3,1,"div",15),o.Rc(21,ui,3,2,"div",16),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.Cb(2),o.Db("aria-label",t.message),o.Cb(2),o.tc("ngIf",null!=t.message),o.Cb(8),o.Vc("",null==t.langService.lang?null:t.langService.lang.connectingPNRNo," "),o.Cb(3),o.vc("placeholder"," ",null==t.langService.lang?null:t.langService.lang.enterPnrnumber,""),o.tc("readonly",t.otpSend)("ngModel",t.pnrNumber),o.Cb(1),o.tc("ngIf",t.otpSend),o.Cb(2),o.tc("ngIf",!t.otpSend),o.Cb(1),o.tc("ngIf",!t.otpSend),o.Cb(1),o.tc("ngIf",t.otpSend),o.Cb(1),o.tc("ngIf",t.otpSend))},directives:[v.a,p.o,S.z,S.o,S.p,S.b,S.k,S.n,S.q],styles:[""]}),e})();var pi=n("kv8A");function di(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.mp)}}function hi(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.exMp)}}function bi(e,t){if(1&e){const e=o.bc();o.ac(0,"td",34),o.ac(1,"input",35),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc(2).mp=t}))("click",(function(t){return o.Kc(e),o.mc(2).addMptoPsgn(t)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.tc("ngModel",e.mp)}}function mi(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.disabled)}}function fi(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.block)}}function vi(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.lost)}}function yi(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.expired)}}function Ci(e,t){if(1&e&&(o.ac(0,"tr",28),o.Rc(1,bi,2,1,"td",29),o.Rc(2,mi,2,1,"td",30),o.Rc(3,fi,2,1,"td",30),o.Rc(4,vi,2,1,"td",30),o.Rc(5,yi,2,1,"td",30),o.ac(6,"td",31),o.ac(7,"span",32),o.Tc(8),o.nc(9,"titlecase"),o.Zb(),o.Zb(),o.ac(10,"td",33),o.Tc(11),o.Zb(),o.ac(12,"td",33),o.Tc(13),o.Zb(),o.ac(14,"td",33),o.Tc(15),o.nc(16,"concName"),o.Zb(),o.ac(17,"td",33),o.Tc(18),o.nc(19,"date"),o.Zb(),o.ac(20,"td",33),o.Tc(21),o.nc(22,"date"),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf",1==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",2==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",3==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",4==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",5==e.mpUserDetailsDTO.mpStatus),o.Cb(3),o.Uc(o.oc(9,11,e.mpUserDetailsDTO.bookingName)),o.Cb(3),o.Uc(e.mpUserDetailsDTO.gender),o.Cb(2),o.Uc(e.mpUserDetailsDTO.idCardNumber),o.Cb(2),o.Uc(o.oc(16,13,e.mpUserDetailsDTO.concType)),o.Cb(3),o.Uc(o.pc(19,15,e.mpUserDetailsDTO.cardExpiryDate,"dd-MMMM-yyyy")),o.Cb(3),o.Uc(o.pc(22,18,e.mpUserDetailsDTO.dateOfBirth,"dd-MMMM-yyyy"))}}function Si(e,t){if(1&e){const e=o.bc();o.ac(0,"td",34),o.ac(1,"input",35),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc(2).mps=t}))("click",(function(t){return o.Kc(e),o.mc(2).addSpouseMptoPsgn(t)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.tc("ngModel",e.mps)}}function Di(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.disabled)}}function Ti(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.block)}}function ki(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.lost)}}function Ii(e,t){if(1&e&&(o.ac(0,"td",33),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.expired)}}function Oi(e,t){if(1&e&&(o.ac(0,"tr",28),o.Rc(1,Si,2,1,"td",29),o.Rc(2,Di,2,1,"td",30),o.Rc(3,Ti,2,1,"td",30),o.Rc(4,ki,2,1,"td",30),o.Rc(5,Ii,2,1,"td",30),o.ac(6,"td",31),o.ac(7,"span",32),o.Tc(8),o.nc(9,"titlecase"),o.Zb(),o.Zb(),o.ac(10,"td",33),o.Tc(11),o.Zb(),o.ac(12,"td",33),o.Tc(13),o.Zb(),o.ac(14,"td",33),o.Tc(15),o.nc(16,"concName"),o.Zb(),o.ac(17,"td",33),o.Tc(18),o.nc(19,"date"),o.Zb(),o.ac(20,"td",33),o.Tc(21),o.nc(22,"date"),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf",1==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",2==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",3==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",4==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",5==e.mpUserDetailsDTO.spouseStatus),o.Cb(3),o.Uc(o.oc(9,11,e.mpUserDetailsDTO.spouseBookingName)),o.Cb(3),o.Uc(e.mpUserDetailsDTO.spouseGender),o.Cb(2),o.Uc(e.mpUserDetailsDTO.spouseCardNumber),o.Cb(2),o.Uc(o.oc(16,13,e.mpUserDetailsDTO.spouseConcType)),o.Cb(3),o.Uc(o.pc(19,15,e.mpUserDetailsDTO.spouseCardExpiryDate,"dd-MMMM-yyyy")),o.Cb(3),o.Uc(o.pc(22,18,e.mpUserDetailsDTO.spouseDateOfBirth,"dd-MMMM-yyyy"))}}function xi(e,t){1&e&&(o.ac(0,"span",43),o.Vb(1,"i",44),o.Zb())}function Ai(e,t){if(1&e&&(o.ac(0,"span",45),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.disabled)}}function Mi(e,t){if(1&e&&(o.ac(0,"span",45),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.block)}}function Zi(e,t){if(1&e&&(o.ac(0,"span",45),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.lost)}}function wi(e,t){if(1&e&&(o.ac(0,"span",45),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.expired)}}const Li=function(e){return{"background-color":e}};function Ni(e,t){if(1&e){const e=o.bc();o.ac(0,"div",36),o.ic("click",(function(){return o.Kc(e),o.mc().addMptoPsgn(null)})),o.Rc(1,xi,2,0,"span",37),o.Rc(2,Ai,3,1,"span",38),o.Rc(3,Mi,3,1,"span",38),o.Rc(4,Zi,3,1,"span",38),o.Rc(5,wi,3,1,"span",38),o.ac(6,"div",39),o.ac(7,"span",32),o.Tc(8,"Name"),o.Zb(),o.ac(9,"span",40),o.Tc(10),o.Zb(),o.Zb(),o.ac(11,"div",41),o.ac(12,"span",32),o.Tc(13),o.Zb(),o.ac(14,"span",40),o.Tc(15),o.Zb(),o.Zb(),o.ac(16,"div",41),o.ac(17,"span",32),o.Tc(18),o.Zb(),o.ac(19,"span",40),o.Tc(20),o.Zb(),o.Zb(),o.ac(21,"div",41),o.ac(22,"span",32),o.Tc(23),o.Zb(),o.ac(24,"span",40),o.Tc(25),o.Zb(),o.Zb(),o.ac(26,"div",41),o.ac(27,"span",32),o.Tc(28,"Card Expiry Date"),o.Zb(),o.ac(29,"span",40),o.Tc(30),o.nc(31,"date"),o.Zb(),o.Zb(),o.ac(32,"div",42),o.ac(33,"span",32),o.Tc(34),o.Zb(),o.ac(35,"span",40),o.Tc(36),o.nc(37,"date"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.tc("ngStyle",o.zc(22,Li,1!=e.mpUserDetailsDTO.mpStatus?"gainsboro":"#ffffff")),o.Cb(1),o.tc("ngIf",e.mp&&1==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",2==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",3==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",4==e.mpUserDetailsDTO.mpStatus),o.Cb(1),o.tc("ngIf",5==e.mpUserDetailsDTO.mpStatus),o.Cb(5),o.Uc(e.mpUserDetailsDTO.bookingName),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.gender),o.Cb(2),o.Uc(e.mpUserDetailsDTO.gender),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.cardNumber),o.Cb(2),o.Uc(e.mpUserDetailsDTO.idCardNumber),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.concessionType),o.Cb(2),o.Uc(e.mpUserDetailsDTO.concType),o.Cb(5),o.Uc(o.pc(31,16,e.mpUserDetailsDTO.cardExpiryDate,"dd-MMMM-yyyy")),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.doB),o.Cb(2),o.Uc(o.pc(37,19,e.mpUserDetailsDTO.dateOfBirth,"dd-MMMM-yyyy"))}}function Ri(e,t){1&e&&(o.ac(0,"span",43),o.Vb(1,"i",44),o.Zb())}function Pi(e,t){if(1&e&&(o.ac(0,"span",47),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.disabled)}}function Bi(e,t){if(1&e&&(o.ac(0,"span",47),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.block)}}function Ei(e,t){if(1&e&&(o.ac(0,"span",47),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.lost)}}function Fi(e,t){if(1&e&&(o.ac(0,"span",47),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.expired)}}function ji(e,t){if(1&e){const e=o.bc();o.ac(0,"div",36),o.ic("click",(function(){return o.Kc(e),o.mc().addSpouseMptoPsgn(null)})),o.Rc(1,Ri,2,0,"span",37),o.Rc(2,Pi,3,1,"span",46),o.Rc(3,Bi,3,1,"span",46),o.Rc(4,Ei,3,1,"span",46),o.Rc(5,Fi,3,1,"span",46),o.ac(6,"div",39),o.ac(7,"span",32),o.Tc(8,"Name"),o.Zb(),o.ac(9,"span",40),o.Tc(10),o.Zb(),o.Zb(),o.ac(11,"div",41),o.ac(12,"span",32),o.Tc(13),o.Zb(),o.ac(14,"span",40),o.Tc(15),o.Zb(),o.Zb(),o.ac(16,"div",41),o.ac(17,"span",32),o.Tc(18),o.Zb(),o.ac(19,"span",40),o.Tc(20),o.Zb(),o.Zb(),o.ac(21,"div",41),o.ac(22,"span",32),o.Tc(23),o.Zb(),o.ac(24,"span",40),o.Tc(25),o.Zb(),o.Zb(),o.ac(26,"div",41),o.ac(27,"span",32),o.Tc(28),o.Zb(),o.ac(29,"span",40),o.Tc(30),o.nc(31,"date"),o.Zb(),o.Zb(),o.ac(32,"div",42),o.ac(33,"span",32),o.Tc(34),o.Zb(),o.ac(35,"span",40),o.Tc(36),o.nc(37,"date"),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.tc("ngStyle",o.zc(23,Li,1!=e.mpUserDetailsDTO.spouseStatus?"gainsboro":"#ffffff")),o.Cb(1),o.tc("ngIf",e.mps&&1==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",2==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",3==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",4==e.mpUserDetailsDTO.spouseStatus),o.Cb(1),o.tc("ngIf",5==e.mpUserDetailsDTO.spouseStatus),o.Cb(5),o.Uc(e.mpUserDetailsDTO.spouseBookingName),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.gender),o.Cb(2),o.Uc(e.mpUserDetailsDTO.spouseGender),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.cardNumber),o.Cb(2),o.Uc(e.mpUserDetailsDTO.spouseCardNumber),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.concessionType),o.Cb(2),o.Uc(e.mpUserDetailsDTO.spouseConcType),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.cardExpiryDate),o.Cb(2),o.Uc(o.pc(31,17,e.mpUserDetailsDTO.spouseCardExpiryDate,"dd-MMMM-yyyy")),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.doB),o.Cb(2),o.Uc(o.pc(37,20,e.mpUserDetailsDTO.spouseDateOfBirth,"dd-MMMM-yyyy"))}}let Vi=(()=>{class e{constructor(e,t,n,i,a,s,r){this.userService=e,this.router=t,this.store=n,this.commonService=i,this.langService=a,this.messageService=s,this._location=r,this.passengerList=[],this.adIdT="div-gpt-ad-1595847791757-0",this.adIdB="div-gpt-ad-1595847962111-0",this.adIdT=this.userService.getAdsRandomId(),this.adIdB=this.userService.getAdsRandomId()}ngOnInit(){this.passengerList=[],this.mp=!1,this.mps=!1,this.jpInputSub=this.store.select(r.k).subscribe(e=>{this.trainSearch=e}),void 0!==this.userService.userResponse.mpUserDetailsDTO&&(console.log("mpUserDetailsDTO: "+JSON.stringify(this.userService.userResponse.mpUserDetailsDTO)),this.mpUserDetailsDTO=this.userService.userResponse.mpUserDetailsDTO),this.jdSub=this.store.select(r.j).subscribe(e=>{void 0!==e&&(this.journeyDetails=e)})}ngAfterViewInit(){window.scroll({top:0,left:0,behavior:"smooth"})}ngOnDestroy(){this.jpInputSub.unsubscribe(),this.jdSub.unsubscribe()}displayAds(e){(window.googletag||{cmd:[]}).cmd.push(()=>{var t=googletag.sizeMapping().addSize([980,0],[[970,90],[728,90]]).addSize([768,0],[728,90]).addSize([320,0],[320,50]).build();googletag.defineSlot(e,[[320,50],[970,90],[728,90]],this.adIdB).setTargeting("Gender",[this.mpUserDetailsDTO.gender]).setTargeting("Age",[this.userService.getAge()]).defineSizeMapping(t).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),googletag.display(this.adIdT)}selectAllPsgn(e){this.addMptoPsgn(e),null!=this.mpUserDetailsDTO.spouseBookingName&&null!=this.mpUserDetailsDTO.spouseBookingName&&""!=this.mpUserDetailsDTO.spouseBookingName&&this.addSpouseMptoPsgn(e)}addMptoPsgn(e){if(null!=e&&!e.target.checked||"1"!=this.mpUserDetailsDTO.mpStatus||this.mp)this.mp=!1;else{null!=this.psgn&&void 0!==this.psgn||(this.psgn=new Rn);const t=new Date(this.mpUserDetailsDTO.cardExpiryDate);if(new Date(this.journeyDetails.lapDetails[0].avlDetails.journeyDate)>t)return this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.cardExpired}),void(e.target.checked=!1);this.psgn.passengerName=this.mpUserDetailsDTO.bookingName,this.psgn.passengerGender=this.mpUserDetailsDTO.gender,this.psgn.passengerAge=this.getAge(this.mpUserDetailsDTO.dateOfBirth),this.psgn.psgnConcType=this.mpUserDetailsDTO.concType,this.psgn.psgnConcCardId=this.mpUserDetailsDTO.idCardNumber,this.psgn.psgnConcDOBP=new Date(this.mpUserDetailsDTO.dateOfBirth),this.psgn.psgnConcCardExpiryDateP=new Date(this.mpUserDetailsDTO.cardExpiryDate),this.psgn.mpMemberFlag=!0,this.mp=!0}}addSpouseMptoPsgn(e){if(null!=e&&!e.target.checked||"1"!=this.mpUserDetailsDTO.spouseStatus||this.mps)this.mps=!1;else{null!=this.psgn1&&void 0!==this.psgn1||(this.psgn1=new Rn);const t=new Date(this.mpUserDetailsDTO.cardExpiryDate);if(new Date(this.journeyDetails.lapDetails[0].avlDetails.journeyDate)>t)return this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.cardExpired}),void(e.target.checked=!1);this.psgn1.passengerName=this.mpUserDetailsDTO.spouseBookingName,this.psgn1.passengerGender=this.mpUserDetailsDTO.spouseGender,this.psgn1.passengerAge=this.getAge(this.mpUserDetailsDTO.spouseDateOfBirth),this.psgn1.psgnConcCardId=this.mpUserDetailsDTO.spouseCardNumber,this.psgn1.psgnConcType=this.mpUserDetailsDTO.spouseConcType,this.psgn1.psgnConcDOBP=new Date(this.mpUserDetailsDTO.spouseDateOfBirth),this.psgn1.psgnConcCardExpiryDateP=new Date(this.mpUserDetailsDTO.spouseCardExpiryDate),this.psgn1.mpMemberFlag=!0,this.mps=!0}console.log("passengerList: "+this.passengerList)}getAge(e){if(null==e||void 0===e)return null;let t=new Date(e),n=new Date,i=n.getFullYear()-t.getFullYear();return i-=n.getMonth()<t.getMonth()||n.getMonth()==t.getMonth()&&n.getDate()<t.getDate()?1:0,i}replan(){this.router.navigate(["train-search"])}continue(){this.commonService.initialPassengers=[],this.mp&&this.passengerList.push(this.psgn),this.mps&&this.passengerList.push(this.psgn1),this.passengerList!==[]&&this.journeyDetails.lapDetails.forEach(e=>{this.commonService.initialPassengers.push(this.passengerList)}),console.log("initialPassengers: "+this.commonService.initialPassengers.length),this.router.navigate(["/booking/psgninput"])}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(u.a),o.Ub(i.c),o.Ub(g.b),o.Ub(f.a),o.Ub(c.a),o.Ub(d.d),o.Ub(p.k))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-mppass-passenger"]],decls:53,vars:32,consts:[[1,"text-center",2,"text-align","center"],[1,"text-center",3,"id"],[1,"top-header","hidden-lg","hidden-md","hidden-sm",2,"padding-top","14px","padding-bottom","14px"],[1,"top-header-content","col-xs-11"],[1,"fa","fa-long-arrow-left",2,"padding-right","5px",3,"click"],[1,"remove-padding","container"],[1,"bth_header","heading-font","row","pull-left",2,"margin-left","0px"],[4,"ngIf"],[1,"remove-padding","col-md-12"],[1,"table-responsive","hidden-xs","hidden-sm",2,"padding-bottom","8px"],[1,"table","table-hover","text-center"],[1,"tableHead"],["id","sele",1,"text-center",2,"padding","10px 6px","min-width","100px"],["type","checkbox",2,"height","20px",3,"click"],["id","name",2,"padding","15px 15px","min-width","180px"],["id","gender",1,"text-center",2,"padding","15px 15px","min-width","80px"],["id","cardN",1,"text-center",2,"padding","15px 15px","min-width","130px"],["id","conct",1,"text-center",2,"padding","15px 15px","min-width","155px"],["id","cardE",1,"text-center",2,"padding","15px 15px","min-width","160px"],["id","dob",1,"text-center",2,"padding","15px 15px","min-width","160px"],["class","tableBody",4,"ngIf"],[1,"hidden-lg","hidden-md"],["class","col-xs-12 mobileTable",3,"ngStyle","click",4,"ngIf"],[1,"remove-padding","col-xs-12","pull-left"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-xs-12","pull-left"],[3,"innerHTML"],[1,"form-group","col-xs-12","t-body"],[1,"tableBody"],["style","padding: 10px -0px;",4,"ngIf"],["style","padding: 15px -0px;",4,"ngIf"],[2,"padding","15px 8px"],[1,"pull-left"],[2,"padding","15px -0px"],[2,"padding","10px -0px"],["type","checkbox",2,"height","20px",3,"ngModel","ngModelChange","click"],[1,"col-xs-12","mobileTable",3,"ngStyle","click"],["class","pull-right iconSpan",4,"ngIf"],["class","text-center","style","color: red;",4,"ngIf"],[1,"col-xs-12",2,"padding-top","10px"],[1,"pull-right"],[1,"col-xs-12"],[1,"col-xs-12",2,"padding-bottom","10px"],[1,"pull-right","iconSpan"],[1,"fa","fa-check-circle","icon"],[1,"text-center",2,"color","red"],["class","col-xs-12 text-center","style","color: red;",4,"ngIf"],[1,"col-xs-12","text-center",2,"color","red"]],template:function(e,t){1&e&&(o.Vb(0,"p-toast"),o.ac(1,"div",0),o.Vb(2,"div",1),o.Zb(),o.ac(3,"div",2),o.ac(4,"span",3),o.ac(5,"span",4),o.ic("click",(function(){return t._location.back()})),o.Zb(),o.ac(6,"strong"),o.Tc(7),o.nc(8,"stationName"),o.nc(9,"stationName"),o.Zb(),o.ac(10,"span"),o.Tc(11),o.nc(12,"date"),o.Zb(),o.Zb(),o.Zb(),o.ac(13,"div",5),o.ac(14,"div",6),o.Rc(15,di,2,1,"span",7),o.Rc(16,hi,2,1,"span",7),o.Tc(17),o.Zb(),o.ac(18,"div",8),o.ac(19,"div",9),o.ac(20,"table",10),o.ac(21,"thead",11),o.ac(22,"th",12),o.ac(23,"input",13),o.ic("click",(function(e){return t.selectAllPsgn(e)})),o.Zb(),o.Zb(),o.ac(24,"th",14),o.Tc(25),o.Zb(),o.ac(26,"th",15),o.Tc(27),o.Zb(),o.ac(28,"th",16),o.Tc(29),o.Zb(),o.ac(30,"th",17),o.Tc(31),o.Zb(),o.ac(32,"th",18),o.Tc(33),o.Zb(),o.ac(34,"th",19),o.Tc(35),o.Zb(),o.Zb(),o.ac(36,"tbody"),o.Rc(37,Ci,23,21,"tr",20),o.Zb(),o.ac(38,"tbody"),o.Rc(39,Oi,23,21,"tr",20),o.Zb(),o.Zb(),o.Zb(),o.ac(40,"div",21),o.Rc(41,Ni,38,24,"div",22),o.Rc(42,ji,38,25,"div",22),o.Zb(),o.ac(43,"div",23),o.ac(44,"button",24),o.ic("click",(function(){return t.replan()})),o.Tc(45),o.Zb(),o.ac(46,"button",24),o.ic("click",(function(){return t.continue()})),o.Tc(47),o.Zb(),o.Zb(),o.ac(48,"div",25),o.ac(49,"strong"),o.Vb(50,"p",26),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(51,"div",27),o.Vb(52,"div",1),o.Zb()),2&e&&(o.Cb(2),o.tc("id",t.adIdT),o.Cb(5),o.Wc(" ",o.qc(8,21,t.trainSearch.origin.split("-")[1].trim(),"",t.langService.langChoice)," TO ",o.qc(9,25,t.trainSearch.destination.split("-")[1].trim(),"",t.langService.langChoice)," "),o.Cb(4),o.Vc(" | ",o.pc(12,29,t.trainSearch.journeyDate,"EEE, dd MMM"),""),o.Cb(4),o.tc("ngIf","MP"==(null==t.mpUserDetailsDTO?null:t.mpUserDetailsDTO.memberType)),o.Cb(1),o.tc("ngIf","MP"!=(null==t.mpUserDetailsDTO?null:t.mpUserDetailsDTO.memberType)),o.Cb(1),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.psgnList,""),o.Cb(8),o.Uc(null==t.langService.lang?null:t.langService.lang.name),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.gender),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.cardNumber),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.concessionType),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.cardExpiryDate),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.doB),o.Cb(2),o.tc("ngIf",t.mpUserDetailsDTO),o.Cb(2),o.tc("ngIf",null!=t.mpUserDetailsDTO.spouseBookingName&&null!=t.mpUserDetailsDTO.spouseBookingName&&""!=t.mpUserDetailsDTO.spouseBookingName),o.Cb(2),o.tc("ngIf",t.mpUserDetailsDTO),o.Cb(1),o.tc("ngIf",null!=t.mpUserDetailsDTO.spouseBookingName&&null!=t.mpUserDetailsDTO.spouseBookingName&&""!=t.mpUserDetailsDTO.spouseBookingName),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.replan),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22),o.Cb(3),o.tc("innerHTML",null==t.langService.lang?null:t.langService.lang.mpSansadCareMsg,o.Lc),o.Cb(2),o.tc("id",t.adIdB))},directives:[v.a,p.o,S.a,S.n,S.q,p.p],pipes:[k.a,p.f,p.u,pi.a],styles:[".tableBody[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .05em #fff!important;border-color:#fff!important}.tableHead[_ngcontent-%COMP%]{background:#213d77;color:#fff}.tableBody[_ngcontent-%COMP%]{background-color:#fff;color:#337ab7;border:1px solid #ddd}.mobileTable[_ngcontent-%COMP%]{box-shadow:3px 3px 5px #555;margin-bottom:15px}.icon[_ngcontent-%COMP%]{color:#fb792b!important;font-size:20px}.iconSpan[_ngcontent-%COMP%]{margin-right:-20px;margin-top:-10px;white-space:nowrap}"]}),e})();var Ui=n("IzEk"),qi=n("wEpY"),Gi=n("MCLT"),_i=n("AytR");const Ji=new RegExp("[^A-Za-z\\s]"),zi=new RegExp("^[6-9]{1}[0-9]{9,11}$"),Ki=new RegExp("^[0-9]{4,12}$"),Hi=new RegExp("[^A-Za-z0-9]"),Qi=new RegExp("[^A-Za-z0-9]");let $i;function Yi(e){return null==e||0===e.length}class Wi{constructor(e){this.langService=e,this.langService=e}static initLang(e){$i=e}static validateName(e,t){return n=>{if(Yi(n.value))return{name_required:!0};let i="";if(i="object"==typeof n.value?n.value.masterPassengerName:n.value,null==i)return null;i=i.trim();let a=null;return(i.length<e||i.length>t)&&(a=Object.assign({},{invalid_name_length:{minLength:e,maxLength:t,actualLength:i.length}})),Ji.test(i)&&(a=Object.assign({},a,{name_only_alphabates:!0})),a}}static validatePassengerAge(e,t){return n=>{const i=Number(n.value),a=Number(e),s=Number(t);let r=null;return i>=a&&i<=s||(r=Object.assign({},{invalid_adult_age:{minAge:e,maxAge:t}})),r}}static validateGender(e){const t=e.value;return"M"===t||"F"===t||"T"===t?null:{no_gender_selected:!0}}static validateInfantAge(e){const t=e.value;return""!=t&&t>=0&&t<5?null:{invalid_infant_age:!0}}static validateNationality(e){return""!==e.value?null:{nationlty_required:!0}}static validateIdCard(e,t){return n=>{const i=n.value;return n.disabled?null:Yi(i)?{idCard_mandatory:!0}:i.length<e||i.length>t?{invalid_idCard:!0}:null}}static validateResvnChoice(e){return e.value?null:{resvn_choice_mandatory:!0}}static validatetravelInsuranceChoice(e){return null!=e.value?null:{travel_insurance_choice_mandatory:!0}}static validateFtTnCAgree(e){if(!e.value)return{ftTnC__agreemandatory:!0}}static validateMobileNo(e){return zi.test(e.value)?null:{invalid_mobile_no:!0}}static validateInternationlMobileNo(e){return Ki.test(e.value)?null:{invalid_mobile_no:!0}}static captchaRequired(e){return Yi(e.value)?{captcha_required:!0}:null}static otpRequired(e){return Yi(e.value)?{otp_required:!0}:null}static validateSrctznConcession(e){return t=>"true"===e?""!==t.value?null:{srctzn_concession_required:!0}:null}static validateFoodChoice(e,t){return n=>"true"===e?t.includes(n.value)?null:{food_choice_required:!0}:null}static validateGstIn(e){return t=>{const n=t.value;return Yi(n)?null:(console.log("gstinPattern : "+e),new RegExp(e).test(n)?null:{invalid_gstin:!0})}}static validatetForceNumber(e,t){return n=>{if(e&&Yi(n.value))return{force_number_input_empty:!0};if(!Yi(n.value)){const e=n.value.trim();if(e.length>t)return Object.assign({},{force_number_input_max_length:{maxLength:t}});if(Hi.test(e))return{force_number_input_regx:!0}}return null}}static validatetWarrantType(e){return t=>t.value<(e?1:0)||t.value>3?{warrant_type_choice_mandatory:!0}:null}static validatetPaymentType(){return e=>e.value<2||e.value>4?{payment_type_choice_mandatory:!0}:null}static validatePassUPN(e){return t=>{const n=t.value;return Yi(n)?null:n.toString().length>e?{pass_upn:!0}:null}}static validatePassBkgCode(e){return t=>{const n=t.value;return Yi(n)?null:n.length>e?{pass_booking_code:!0}:Qi.test(n)?{bkg_code_regex:!0}:null}}static validatePassengerDetails(e,t){return n=>{let i=null;const a=n.get("passengerAge").value-0,s=n.get("passengerGender"),r=n.get("passengerSrCtznConcession"),l=n.get("passengerNationality");return e.loyaltyRedemptionBooking||"true"!==t.seniorCitizenApplicable||"IN"!==l.value||t.concessionBooking&&"GENERAL"!==n.get("psgnConcType").value||("M"===s.value&&a>=t.srctznAge||"F"===s.value&&a>=t.srctnwAge||"T"===s.value&&a>=t.srctzTAge)&&Yi(r.value)&&(i=Object.assign({},i,{srctzn_concession_required:!0})),"LD"===e.quotaCode&&a>11&&("M"===s.value?i=Object.assign({},i,{no_male_in_LD:!0}):"T"===s.value&&(i=Object.assign({},i,{no_male_in_LDT:!0}))),i}}static validatePassengerInputForm(e,t){console.log("PassengerInput Form validator..........")}static getValidatorErrorMessage(e,t){return{required:$i.errorMsg.bookingValReq,invalidCreditCard:$i.errorMsg.bookingValInvalidCreditCard,invalidEmailAddress:$i.errorMsg.bookingValInvalidEmailAdrs,invalidPassword:$i.errorMsg.bookingValInvalidPassword,minlength:$i.errorMsg.bookingValMinLength+" "+t.requiredLength,maxlength:$i.errorMsg.bookingValMaxLength+" "+t.requiredLength,name_required:$i.errorMsg.bookingValNameReq,name_only_alphabates:$i.errorMsg.bookingValNameOnlyAlphabates,invalid_infant_age:$i.errorMsg.bookingValInvalidInfantAge,no_special_characters:$i.errorMsg.bookingValNoSpecialCharacters,no_contiguous_psgn_input:$i.errorMsg.bookingValNoContiguousPsgnInp,food_choice_required:$i.errorMsg.bookingValFoodChoiceReq,nationlty_required:$i.errorMsg.bookingValNationltyReq,invalid_mobile_no:$i.errorMsg.bookingValInvalidMobileNo,invalid_name_length:$i.errorMsg.bookingValInvalidNameLength1+" "+t.minLength+$i.errorMsg.bookingValInvalidNameLength2+t.maxLength+" "+$i.errorMsg.bookingValInvalidNameLength3,invalid_adult_age:$i.errorMsg.bookingValInvalidAdultAge+` ${t.minAge} `+$i.errorMsg.bookingValInvalidNameLength2+` ${t.maxAge} `+$i.errorMsg.bookingValInvalidAdultAgeLast,no_gender_selected:$i.errorMsg.bookingValNoGenderSelected,no_male_in_LD:$i.errorMsg.bookingValNoMaleInLD,no_male_in_LDT:$i.errorMsg.bookingValNoMaleInLDT,srctzn_concession_required:$i.errorMsg.bookingValSrCtznConsnReq,captcha_required:$i.errorMsg.bookingValCaptchaReq,otp_required:$i.errorMsg.bookingValOtpReq,invalid_gstin:$i.errorMsg.bookingValInvalidGstin,passport_mandatory:$i.errorMsg.bookingValPassportMandatory,invalid_passport:$i.errorMsg.bookingValInvalidPassport,idCard_mandatory:$i.errorMsg.bookingValIdCardMandatory,invalid_idCard:$i.errorMsg.bookingValInvalidIdCard,resvn_choice_mandatory:$i.errorMsg.bookingValResvnChoiceMandatory,travel_insurance_choice_mandatory:$i.errorMsg.bookingValTravelInsChoiceMdtry,ftTnC__agreemandatory:$i.errorMsg.bookingValFtTnCAgreeMdtry,force_number_input_empty:$i.errorMsg.forceNumberInput,force_number_input_max_length:$i.errorMsg.forceNumberInputMaxLength+" "+t.maxLength,force_number_input_regx:$i.errorMsg.forceNumberInputAlphaNumeric,warrant_type_choice_mandatory:$i.errorMsg.warrantType,payment_type_choice_mandatory:$i.errorMsg.paymentType,pass_upn:$i.errorMsg.passUpnReq1,pass_booking_code:$i.errorMsg.passBkgCodeReq,bkg_code_regex:$i.errorMsg.passNumberInputAlphaNumeric}[e]}}var Xi=n("kyvP"),ea=n("24ra"),ta=n("nnEn"),na=n("jIHw"),ia=n("mzFq");function aa(e,t){if(1&e&&(o.ac(0,"div",1),o.ac(1,"small"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=t.$implicit;o.Cb(2),o.Uc(e)}}let sa=(()=>{class e{constructor(e){this.langService=e,Wi.initLang(this.langService)}get errorMessage(){const e=[];for(const t in this.control.errors)if(this.control.errors.hasOwnProperty(t)&&this.control.touched){const n=Wi.getValidatorErrorMessage(t,this.control.errors[t]);e.push(n||t)}return e}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-control-messages"]],inputs:{control:"control"},decls:1,vars:1,consts:[["style","color:red",4,"ngFor","ngForOf"],[2,"color","red"]],template:function(e,t){1&e&&o.Rc(0,aa,3,1,"div",0),2&e&&o.tc("ngForOf",t.errorMessage)},directives:[p.n],encapsulation:2}),e})();var ra=n("dts7"),la=n("I5GR"),oa=n("7GdD"),ca=n("xRjm"),ua=n("DKzC"),ga=n("0EVG");const pa=["infoDialogOk"],da=["autocompletePsgn"];function ha(e,t){if(1&e&&(o.ac(0,"span",27),o.Tc(1),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.Wc("( ",null==e.langService.lang?null:e.langService.lang.loyaltyMembershipId,": ",e.psgnControlGroup.controls.softMemberId.value," )")}}function ba(e,t){1&e&&o.Vb(0,"span",29)}function ma(e,t){if(1&e&&(o.ac(0,"strong"),o.Tc(1),o.Zb(),o.Tc(2),o.nc(3,"genderName"),o.Rc(4,ba,1,0,"span",28)),2&e){const e=t.$implicit;o.Cb(1),o.Uc(e.masterPassengerName),o.Cb(1),o.Wc(" | ",e.age," yrs | ",o.oc(3,4,e.gender)," "),o.Cb(2),o.tc("ngIf","UNIQUE_ICARD"==e.idCardType&&1==e.verificationStatus)}}function fa(e,t){if(1&e&&(o.ac(0,"select",30),o.ac(1,"option",31),o.Tc(2),o.Zb(),o.ac(3,"option",32),o.Tc(4),o.Zb(),o.ac(5,"option",33),o.Tc(6),o.Zb(),o.ac(7,"option",34),o.Tc(8),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.gender),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.male),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.female),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.transgender)}}function va(e,t){if(1&e&&(o.Vb(0,"input",35),o.nc(1,"genderName")),2&e){const e=o.mc(2);o.uc("value",o.oc(1,2,e.psgnControlGroup.controls.passengerGender.value)),o.tc("readonly",e.nameAgeGenderReadOnly||e.retJrny||e.psgnControlGroup.controls.softMemberFlag.value||e.psgnControlGroup.controls.mpMemberFlag.value&&void 0!==e.psgnControlGroup.controls.passengerGender.value||e.psgnControlGroup.controls.passengerVerified.value)}}function ya(e,t){if(1&e&&(o.ac(0,"option",39),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e.countryCode),o.Cb(1),o.Uc(e.country)}}function Ca(e,t){if(1&e&&(o.ac(0,"select",36),o.ac(1,"option",37),o.Tc(2,"Nationality"),o.Zb(),o.Rc(3,ya,2,2,"option",38),o.Zb()),2&e){const e=o.mc(2);o.Cb(3),o.tc("ngForOf",e.countryList)}}function Sa(e,t){if(1&e&&(o.Vb(0,"input",40),o.nc(1,"countryName")),2&e){const e=o.mc(2);o.uc("value",o.oc(1,2,e.psgnControlGroup.controls.passengerNationality.value)),o.tc("readonly",!0)}}function Da(e,t){if(1&e&&(o.ac(0,"option",43),o.Tc(1),o.nc(2,"idCardType"),o.Zb()),2&e){const e=t.$implicit,n=o.mc(3);o.uc("value",e),o.Cb(1),o.Uc(o.pc(2,2,e,n.langService.langChoice))}}function Ta(e,t){if(1&e&&(o.ac(0,"div",6),o.ac(1,"select",41),o.Rc(2,Da,3,5,"option",42),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.tc("ngForOf",e.applicableIDCardType)}}function ka(e,t){if(1&e&&o.Vb(0,"input",47),2&e){const e=o.mc(3);o.uc("maxlength",e.bookingConfigurables.maxPassportLength),o.vc("id","",e.lapNo,"passengerCardNumber")}}function Ia(e,t){if(1&e&&o.Vb(0,"input",47),2&e){const e=o.mc(3);o.uc("maxlength",e.bookingConfigurables.maxIdCardLength),o.vc("id","",e.lapNo,"passengerCardNumber")}}function Oa(e,t){if(1&e&&(o.ac(0,"div",44),o.Rc(1,ka,1,2,"input",45),o.Rc(2,Ia,1,2,"input",45),o.ac(3,"span",46),o.Tc(4,"ID Card of passenger"),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.tc("ngIf","PASSPORT"==e.psgnControlGroup.controls.passengerCardType.value),o.Cb(1),o.tc("ngIf","PASSPORT"!=e.psgnControlGroup.controls.passengerCardType.value)}}function xa(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.Rc(1,ha,2,2,"span",14),o.ac(2,"div",15),o.ac(3,"p-autoComplete",16,17),o.ic("completeMethod",(function(t){return o.Kc(e),o.mc().searchPassneger(t)}))("onSelect",(function(t){return o.Kc(e),o.mc().selectMstPsgns(t)}))("onFocus",(function(t){return o.Kc(e),o.Ic(4).handleDropdownClick(t)})),o.Rc(5,ma,5,6,"ng-template",18),o.Zb(),o.Zb(),o.ac(6,"div",19),o.Vb(7,"input",20),o.Zb(),o.ac(8,"div",21),o.Rc(9,fa,9,4,"select",22),o.Rc(10,va,2,4,"ng-template",null,23,o.Sc),o.Zb(),o.ac(12,"div",6),o.Rc(13,Ca,4,1,"select",24),o.Rc(14,Sa,2,4,"ng-template",null,25,o.Sc),o.Zb(),o.Rc(16,Ta,3,1,"div",4),o.Rc(17,Oa,5,2,"div",26),o.Zb()}if(2&e){const e=o.Ic(11),t=o.Ic(15),n=o.mc();o.Cb(1),o.tc("ngIf",n.psgnControlGroup.controls.softMemberFlag.value),o.Cb(2),o.uc("placeholder",null==n.langService.lang?null:n.langService.lang.updateProfileLabel1),o.uc("maxlength",n.bookingConfigurables.maxNameLength),o.tc("suggestions",n.masterPsgnResults)("maxlength",n.bookingConfigurables.maxNameLength)("readonly",n.nameAgeGenderReadOnly||n.retJrny||n.psgnControlGroup.controls.mpMemberFlag.value&&!("MPSPOS"===n.psgnControlGroup.controls.psgnConcType.value)||n.psgnControlGroup.controls.softMemberFlag.value||n.psgnControlGroup.controls.passengerVerified.value),o.Cb(4),o.uc("placeholder",null==n.langService.lang?null:n.langService.lang.age),o.uc("max",n.bookingConfigurables.maxPassengerAge),o.tc("readonly",n.nameAgeGenderReadOnly||n.retJrny||n.psgnControlGroup.controls.softMemberFlag.value||n.psgnControlGroup.controls.mpMemberFlag.value&&!("MPSPOS"===n.psgnControlGroup.controls.psgnConcType.value)&&!("Invalid Date"==n.psgnControlGroup.controls.psgnConcDOBP.value)||n.psgnControlGroup.controls.passengerVerified.value||"FT"==n.quotaCode||n.showDob),o.Cb(2),o.tc("ngIf",!(n.nameAgeGenderReadOnly||n.retJrny||n.psgnControlGroup.controls.softMemberFlag.value||n.psgnControlGroup.controls.mpMemberFlag.value&&void 0!==n.psgnControlGroup.controls.passengerGender.value||n.psgnControlGroup.controls.passengerVerified.value))("ngIfElse",e),o.Cb(4),o.tc("ngIf",!(n.retJrny||n.psgnControlGroup.controls.passengerVerified.value||n.mpUser))("ngIfElse",t),o.Cb(3),o.tc("ngIf",null!=n.applicableIDCardType&&(n.showIdcard||null!=n.psgnControlGroup.controls.passengerCardNumber.value&&""!=n.psgnControlGroup.controls.passengerCardNumber.value)),o.Cb(1),o.tc("ngIf",null!=n.applicableIDCardType&&"UNIQUE_ICARD"!=n.psgnControlGroup.controls.passengerCardType.value&&(n.showIdcard||null!=n.psgnControlGroup.controls.passengerCardNumber.value&&""!=n.psgnControlGroup.controls.passengerCardNumber.value))}}function Aa(e,t){if(1&e&&(o.ac(0,"div",48),o.ac(1,"strong"),o.ac(2,"u"),o.Tc(3),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.Vc("LAP ",e.lapNo,"")}}function Ma(e,t){if(1&e&&(o.ac(0,"option",53),o.Tc(1),o.nc(2,"berthName"),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(o.oc(2,2,e))}}function Za(e,t){if(1&e&&(o.ac(0,"select",50),o.ac(1,"option",51),o.Tc(2),o.Zb(),o.Rc(3,Ma,3,4,"option",52),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.noPreference),o.Cb(1),o.tc("ngForOf",e.applicableBerthTypes)}}function wa(e,t){if(1&e&&(o.ac(0,"select",50),o.ac(1,"option",51),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.noPreference)}}function La(e,t){if(1&e&&(o.ac(0,"div",6),o.Rc(1,Za,4,2,"select",49),o.Rc(2,wa,3,1,"select",49),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf",null!=e.bookingConfigurables.applicableBerthTypes),o.Cb(1),o.tc("ngIf",null==e.bookingConfigurables.applicableBerthTypes)}}function Na(e,t){if(1&e&&(o.ac(0,"option",53),o.Tc(1),o.nc(2,"foodOptionName"),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(o.oc(2,2,e))}}function Ra(e,t){if(1&e){const e=o.bc();o.ac(0,"div",6),o.ac(1,"select",54),o.ic("change",(function(t){return o.Kc(e),o.mc().onMealSelection(t.target.value)})),o.ac(2,"option",51),o.Tc(3),o.Zb(),o.Rc(4,Na,3,4,"option",52),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.vc("id","FOOD_",e.index,""),o.Cb(2),o.Vc("",null==e.langService.lang?null:e.langService.lang.foodChoice,"*"),o.Cb(1),o.tc("ngForOf",e.foodOptions)}}function Pa(e,t){if(1&e&&(o.ac(0,"option",39),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e.value),o.Cb(1),o.Uc(e.label)}}function Ba(e,t){if(1&e&&(o.ac(0,"div",6),o.ac(1,"select",55),o.Rc(2,Pa,2,2,"option",38),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.vc("id","",e.lapNo,"srctzn-option"),o.Cb(1),o.tc("ngForOf",e.consList)}}function Ea(e,t){if(1&e){const e=o.bc();o.ac(0,"div",56),o.ac(1,"input",57),o.ic("change",(function(){return o.Kc(e),o.mc().showMsg("childBerth")})),o.Zb(),o.ac(2,"label",58),o.Tc(3,"Opt Child Berth"),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.wc("id","",e.lapNo,"childBerthFlag",e.index,""),o.Cb(1),o.wc("for","",e.lapNo,"childBerthFlag",e.index,"")}}function Fa(e,t){if(1&e&&(o.ac(0,"div",56),o.Vb(1,"input",59),o.ac(2,"label",58),o.Tc(3,"Opt Bed Roll"),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.wc("id","",e.lapNo,"passengerBedrollChoice",e.index,""),o.Cb(1),o.wc("for","",e.lapNo,"passengerBedrollChoice",e.index,"")}}function ja(e,t){if(1&e&&(o.ac(0,"option",53),o.Tc(1),o.nc(2,"concName"),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(o.oc(2,2,e))}}function Va(e,t){if(1&e&&(o.ac(0,"select",63),o.ac(1,"option",64),o.Tc(2,"--- Concession ---"),o.Zb(),o.Rc(3,ja,3,4,"option",52),o.Zb()),2&e){const e=o.mc(3);o.Cb(3),o.tc("ngForOf",e.applicableConcTypes)}}function Ua(e,t){if(1&e&&(o.Vb(0,"input",35),o.nc(1,"concName")),2&e){const e=o.mc(3);o.uc("value",o.oc(1,2,e.psgnControlGroup.controls.psgnConcType.value)),o.tc("readonly",e.psgnControlGroup.controls.mpMemberFlag.value)}}function qa(e,t){if(1&e&&(o.ac(0,"div",6),o.Rc(1,Va,4,1,"select",61),o.Rc(2,Ua,2,4,"ng-template",null,62,o.Sc),o.Zb()),2&e){const e=o.Ic(3),t=o.mc(2);o.Cb(1),o.tc("ngIf",!t.psgnControlGroup.controls.mpMemberFlag.value||null==t.psgnControlGroup.controls.psgnConcType.value)("ngIfElse",e)}}function Ga(e,t){if(1&e&&(o.ac(0,"span",46),o.Tc(1),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Wc("",null==e.langService.lang?null:e.langService.lang.idCardNumber," ",null==e.langService.lang?null:e.langService.lang.issuedByRly,"")}}function _a(e,t){if(1&e){const e=o.bc();o.ac(0,"div",65),o.ac(1,"input",66),o.ic("blur",(function(){return o.Kc(e),o.mc(2).updateConcCardDtls()})),o.Zb(),o.Rc(2,Ga,2,2,"span",67),o.Zb()}if(2&e){const e=o.mc(2);o.tc("hidden","GENERAL"===e.psgnControlGroup.controls.psgnConcType.value),o.Cb(1),o.tc("readonly",e.mpUser&&("PH"==e.quotaCode||"GN"==e.quotaCode)&&!e.bookingConfigurables.concessionBooking)("maxlength",e.bookingConfigurables.maxIdCardLength),o.Cb(1),o.tc("ngIf","HANDICAP"===e.psgnControlGroup.controls.psgnConcType.value||"ESCORT"===e.psgnControlGroup.controls.psgnConcType.value)}}const Ja=function(){return{"font-size":"11px",height:"40px"}};function za(e,t){if(1&e){const e=o.bc();o.ac(0,"p-calendar",70),o.ic("onSelect",(function(){return o.Kc(e),o.mc(3).updateConcCardDtls()})),o.Zb()}if(2&e){const e=o.mc(3);o.wc("yearRange","",e.fromToday,":",e.uptoYr,""),o.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",e.minday)("maxDate",e.maxday)("defaultDate",e.minday)("inputStyle",o.yc(8,Ja))}}function Ka(e,t){if(1&e&&(o.Vb(0,"input",71),o.nc(1,"date")),2&e){const e=o.mc(3);o.uc("value",o.pc(1,2,e.psgnControlGroup.controls.psgnConcCardExpiryDateP.value,"dd-MM-yyyy")),o.tc("readonly",e.mpUser&&("PH"==e.quotaCode||"GN"==e.quotaCode)&&!e.bookingConfigurables.concessionBooking)}}function Ha(e,t){if(1&e&&(o.ac(0,"span",46),o.Tc(1),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Wc("",null==e.langService.lang?null:e.langService.lang.validUpto," ",null==e.langService.lang?null:e.langService.lang.issuedByRly,"")}}function Qa(e,t){if(1&e&&(o.ac(0,"div",65),o.Rc(1,za,1,9,"p-calendar",68),o.Rc(2,Ka,2,5,"ng-template",null,69,o.Sc),o.Rc(4,Ha,2,2,"span",67),o.Zb()),2&e){const e=o.Ic(3),t=o.mc(2);o.tc("hidden","GENERAL"===t.psgnControlGroup.controls.psgnConcType.value),o.Cb(1),o.tc("ngIf",t.bookingConfigurables.concessionBooking||!(t.mpUser&&("PH"==t.quotaCode||"GN"==t.quotaCode))||"Invalid Date"==t.psgnControlGroup.controls.psgnConcCardExpiryDateP.value)("ngIfElse",e),o.Cb(3),o.tc("ngIf","HANDICAP"===t.psgnControlGroup.controls.psgnConcType.value||"ESCORT"===t.psgnControlGroup.controls.psgnConcType.value)}}function $a(e,t){if(1&e){const e=o.bc();o.ac(0,"p-calendar",74),o.ic("onSelect",(function(){o.Kc(e);const t=o.mc(3);return t.populateAge(),t.updateConcCardDtls()}))("change",(function(){o.Kc(e);const t=o.mc(3);return t.populateAge(),t.updateConcCardDtls()})),o.Zb()}if(2&e){const e=o.mc(3);o.wc("yearRange","",e.fromDOBYr,":",e.toDOBYr,""),o.tc("yearNavigator",!0)("monthNavigator",!0)("minDate",e.mindayDOB)("maxDate",e.maxdayDOB)("defaultDate",e.mindayDOB)("inputStyle",o.yc(8,Ja))}}function Ya(e,t){if(1&e&&(o.Vb(0,"input",75),o.nc(1,"date")),2&e){const e=o.mc(3);o.uc("value",o.pc(1,2,e.psgnControlGroup.controls.psgnConcDOBP.value,"dd-MM-yyyy")),o.tc("readonly",e.mpUser&&("PH"==e.quotaCode||"GN"==e.quotaCode)&&!e.bookingConfigurables.concessionBooking||e.retJrny)}}function Wa(e,t){if(1&e&&(o.ac(0,"span",46),o.Tc(1),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Wc("",null==e.langService.lang?null:e.langService.lang.doB," ",null==e.langService.lang?null:e.langService.lang.issuedByRly,"")}}function Xa(e,t){if(1&e&&(o.ac(0,"div",65),o.Rc(1,$a,1,9,"p-calendar",72),o.Rc(2,Ya,2,5,"ng-template",null,73,o.Sc),o.Rc(4,Wa,2,2,"span",67),o.Zb()),2&e){const e=o.Ic(3),t=o.mc(2);o.tc("hidden","GENERAL"===t.psgnControlGroup.controls.psgnConcType.value&&!t.showDob),o.Cb(1),o.tc("ngIf",(t.bookingConfigurables.concessionBooking||!(t.mpUser&&("PH"==t.quotaCode||"GN"==t.quotaCode))||"Invalid Date"==t.psgnControlGroup.controls.psgnConcDOBP.value||"FT"==t.quotaCode||t.showDob)&&!t.retJrny)("ngIfElse",e),o.Cb(3),o.tc("ngIf","HANDICAP"===t.psgnControlGroup.controls.psgnConcType.value||"ESCORT"===t.psgnControlGroup.controls.psgnConcType.value)}}function es(e,t){if(1&e&&(o.ac(0,"span"),o.Rc(1,qa,4,2,"div",4),o.Rc(2,_a,3,4,"div",60),o.Rc(3,Qa,5,4,"div",60),o.Rc(4,Xa,5,4,"div",60),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf","FT"!=e.quotaCode&&!e.showDob),o.Cb(1),o.tc("ngIf","FT"!=e.quotaCode&&!e.showDob),o.Cb(1),o.tc("ngIf","FT"!=e.quotaCode&&!e.showDob),o.Cb(1),o.tc("ngIf",!(e.mpUser&&("PH"==e.quotaCode||"GN"==e.quotaCode))||"FT"==e.quotaCode||e.showDob||!("MPSPOS"===e.psgnControlGroup.controls.psgnConcType.value||"EXCOMP"===e.psgnControlGroup.controls.psgnConcType.value||"MPCOMP"===e.psgnControlGroup.controls.psgnConcType.value))}}function ts(e,t){if(1&e&&(o.ac(0,"div",6),o.Vb(1,"input",76),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.vc("id","",e.lapNo,"psgn-force-number")}}function ns(e,t){1&e&&(o.ac(0,"option",81),o.Tc(1,"Pass Booking"),o.Zb())}function is(e,t){if(1&e&&(o.ac(0,"select",77),o.ac(1,"option",78),o.Tc(2,"--- Concession ---"),o.Zb(),o.Rc(3,ns,2,0,"option",79),o.ac(4,"option",80),o.Tc(5,"General Booking"),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.tc("ngIf",!e.isIrctcTrain)}}function as(e,t){if(1&e){const e=o.bc();o.ac(0,"div",6),o.ac(1,"input",82),o.ic("blur",(function(){return o.Kc(e),o.mc().UpdatePassDtls()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.vc("placeholder"," ",null==e.langService.lang?null:e.langService.lang.passNo,"")}}function ss(e,t){if(1&e){const e=o.bc();o.ac(0,"div",6),o.ac(1,"input",83),o.ic("blur",(function(){return o.Kc(e),o.mc().UpdatePassDtls()})),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(1),o.vc("placeholder"," ",null==e.langService.lang?null:e.langService.lang.passBookingCode," *")}}function rs(e,t){if(1&e&&(o.ac(0,"div",84),o.ac(1,"i",85),o.Tc(2,"*"),o.Zb(),o.Tc(3),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.passBookingCodeMsg," ")}}let ls=(()=>{class e{constructor(e,t,n,i,a){this.userService=e,this.langService=t,this.berthName=n,this.foodName=i,this.store=a,this.updateConc=new o.n,this.updatePass=new o.n,this.updateMessage=new o.n,this.infoMessage="",this.retJrny=!1,this.redemptionBooking=!1,this.showIdcard=!1,this.showSSConc=!1,this.nosbBooking=!1,this.nameAgeGenderReadOnly=!1,this.concVal="0",this.showDob=!1,this.masterPsgnResults=[],this.showPassConcType=!1,this.showPassBooking=!1,this.updateOnAgeChange=!0,this.psgnConcDOBP=new S.e("",[]),this.psgnConcCardExpiryDateP=new S.e("",[])}ngOnInit(){if(this.redemptionBooking=this.journeyDetails.loyaltyRedemptionBooking,this.nosbBooking=this.journeyDetails.nosbBooking,this.nameAgeGenderReadOnly=this.journeyDetails.nameAgeGenderReadOnly,this.validatePass(),"object"!=typeof this.psgnControlGroup.controls.passengerName.value&&this.psgnControlGroup.controls.passengerName.setValue({masterPassengerName:this.psgnControlGroup.controls.passengerName.value}),this.psgnControlGroup.get("passengerAge").valueChanges.subscribe(e=>{this.validateChildBerth(),this.validateSrctznConcession(),this.updateOnAgeChange&&this.updatePsgnInOtherLap(!1,null),this.updateOnAgeChange=!0}),this.psgnControlGroup.get("passengerGender").valueChanges.subscribe(e=>{this.validateSrctznConcession(),this.updatePsgnInOtherLap(!1,null)}),"IN"===this.psgnControlGroup.controls.passengerNationality.value||""===this.psgnControlGroup.controls.passengerNationality.value||this.bookingConfigurables.bonafideCountryList.indexOf(this.psgnControlGroup.controls.passengerNationality.value)>=0?(this.disablePassport(!0),this.bookingConfigurables.bonafideCountryList.indexOf(this.psgnControlGroup.controls.passengerNationality.value)>=0&&(this.showDob=!0,this.bonafideMessage=!0)):this.showDob=!0,this.psgnControlGroup.controls.passengerNationality.valueChanges.subscribe(e=>{this.psgnControlGroup.get("passengerCardTypeMaster").reset({value:"NULL_IDCARD",disabled:!1}),this.bonafideMessage=!1,"IN"===e||""===e||this.bookingConfigurables.bonafideCountryList.indexOf(e)>=0?(this.disablePassport(!0),this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!0}),this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!0}),this.showIdcard=!1,this.showDob=!1,this.validatePass(),this.bookingConfigurables.concessionBooking&&(this.psgnControlGroup.get("psgnConcType").reset({value:"0",disabled:!1}),this.showIdcard=!0),this.bookingConfigurables.bonafideCountryList.indexOf(e)>=0&&(this.bonafideMessage=!0,this.showMsg("nationality"),this.psgnControlGroup.get("psgnConcDOBP").enable(),this.showDob=!0)):(this.showMsg("nationality"),this.showIdcard=!0,this.disablePassport(!1),this.showDob=!0,"PB"===this.userService.quota&&this.psgnControlGroup.get("passConcessionType").reset({value:2,disabled:!0}),"PASSPORT"!=this.psgnControlGroup.get("passengerCardType").value&&this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!1}),this.psgnControlGroup.get("passengerCardType").reset({value:"PASSPORT",disabled:!0}),this.bookingConfigurables.concessionBooking&&(this.psgnControlGroup.get("psgnConcType").reset({value:"GENERAL",disabled:!0}),this.psgnControlGroup.get("psgnConcDOBP").enable(),this.showIdcard=!0)),this.validateSrctznConcession(),this.updatePsgnInOtherLap(!1,null)}),null==this.psgnControlGroup.get("passengerCardType").value||null==this.psgnControlGroup.get("passengerCardType").value||""==this.psgnControlGroup.get("passengerCardType").value?this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!0}):this.psgnControlGroup.get("passengerCardType").reset({value:this.psgnControlGroup.get("passengerCardType").value,disabled:!0}),null===this.psgnControlGroup.get("passengerCardType").value||""===this.psgnControlGroup.get("passengerCardType").value.trim()||"UNIQUE_ICARD"!=this.psgnControlGroup.get("passengerCardType").value||this.psgnControlGroup.get("passengerVerified").value||(this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!0}),this.psgnControlGroup.get("passengerCardTypeMaster").reset({value:"NULL_IDCARD",disabled:!0}),this.psgnControlGroup.get("passengerCardNumberMaster").reset({value:"",disabled:!0})),this.showIdcard=!1,"IN"!==this.psgnControlGroup.controls.passengerNationality.value&&this.bookingConfigurables.bonafideCountryList.indexOf(this.psgnControlGroup.controls.passengerNationality.value)<0&&(this.psgnControlGroup.get("passengerCardType").reset({value:"PASSPORT",disabled:!0}),this.showIdcard=!0),"PB"===this.userService.quota){const e=this.psgnControlGroup.get("passUPN").value;null!=e&&0!=e&&(this.psgnControlGroup.get("passConcessionType").reset({value:1,disabled:!1}),this.showPassBooking=!0),this.psgnControlGroup.get("passConcessionType").valueChanges.subscribe(e=>{if(1==this.psgnControlGroup.controls.passConcessionType.value){let e;this.showPassBooking=!0,e=this.passDtls.passDtls,e&&(console.log("Success "+e),this.psgnControlGroup.get("passUPN").setValue(e.passUPN),this.psgnControlGroup.get("passBookingCode").setValue(e.passBookingCode))}else this.showPassBooking=!1,this.psgnControlGroup.get("passUPN").reset({value:null,disabled:!1}),this.psgnControlGroup.get("passBookingCode").reset({value:null,disabled:!1})})}const e=new Date;this.minday=new Date(e.getFullYear(),e.getMonth(),e.getDate()-120),this.maxday=new Date(e.getFullYear()+120,e.getMonth(),e.getDate()),this.mindayDOB=new Date(e.getFullYear()-125,e.getMonth(),e.getDate()),this.maxdayDOB=new Date(e.getFullYear()-1,e.getMonth(),e.getDate()),this.fromDOBYr=e.getFullYear()-125,this.toDOBYr=e.getFullYear()-1,this.fromToday=this.minday.getFullYear(),this.uptoYr=e.getFullYear()+120,(this.bookingConfigurables.concessionBooking||this.mpUser)&&(console.log("asdasd >> "+this.bookingConfigurables.concessionBooking),this.passconcession(),this.psgnControlGroup.controls.psgnConcType.valueChanges.subscribe(e=>{this.passconcession()})),this.psgnSub=this.store.select(r.v).subscribe(e=>{0!==e.psgnList.length&&(console.log("resp: "+e),this.retJrny=!0)}),this.validateSrctznConcession(),this.validateChildBerth(),"MPSPOS"===this.psgnControlGroup.controls.psgnConcType.value&&(this.psgnControlGroup.get("passengerName").reset({disabled:!1}),this.psgnControlGroup.get("passengerName").setValue({masterPassengerName:"Spouse"}),this.psgnControlGroup.get("passengerAge").reset({value:99,disabled:!1})),this.psgnControlGroup.controls.passUPN.valueChanges.subscribe(e=>{this.validateSrctznConcession(),this.updatePsgnInOtherLap(!1,null)}),this.psgnControlGroup.controls.passengerCardNumber.valueChanges.subscribe(e=>{this.updatePsgnInOtherLap(!1,null)}),this.applicableIDCardTypes()}ngAfterViewInit(){this.quotaCode=this.journeyDetails.lapDetails[this.lapNo-1].quotaCode,this.masterPsgnSub=this.store.select(r.s).subscribe(e=>{null!=e&&(this.masterList=e)}),this.nameAgeGenderReadOnly&&this.validateChildBerth(),this.otherLapPsgnSub=this.store.select(r.t).subscribe(e=>{this.updatePsgnsIfLapMatched(e)}),Object(s.a)(300).subscribe(()=>{null!=this.autocompletePsgn&&this.autocompletePsgn.el.nativeElement.children[0].children[0].focus()})}ngOnDestroy(){this.psgnSub.unsubscribe(),this.masterPsgnSub.unsubscribe(),this.otherLapPsgnSub.unsubscribe()}iniConcession(){this.consList=[],this.showSSConc?(this.consList=[],this.consList.push({label:this.langService.lang.seniorCitizen,value:0}),this.consList.push({label:this.langService.lang.availConcession,value:1}),this.consList.push({label:this.langService.lang.forgoConcession,value:2}),this.consList.push({label:this.langService.lang.forgoFullConcession,value:3}),this.psgnControlGroup.get("passengerSrCtznConcession").reset({value:this.concVal,disabled:!1})):(this.consList=[],this.consList.push({label:this.langService.lang.seniorCitizen,value:0}),this.psgnControlGroup.get("passengerSrCtznConcession").reset({value:"0",disabled:!0}))}get applicableBerthTypes(){return Array.isArray(this.bookingConfigurables.applicableBerthTypes)?this.bookingConfigurables.applicableBerthTypes:Array.of(this.bookingConfigurables.applicableBerthTypes)}get applicableConcTypes(){return Array.isArray(this.bookingConfigurables.concessionalPassengerType)?this.bookingConfigurables.concessionalPassengerType:Array.of(this.bookingConfigurables.concessionalPassengerType)}applicableIDCardTypes(){this.applicableIDCardType=Array.isArray(this.bookingConfigurables.validIdCardTypes)?this.bookingConfigurables.validIdCardTypes:Array.of(this.bookingConfigurables.validIdCardTypes),"ESCORT"===this.psgnControlGroup.get("psgnConcType").value&&(this.applicableIDCardType=this.applicableIDCardType.filter(e=>"UNIQUE_ICARD"!==e))}get foodOptions(){return Array.isArray(this.bookingConfigurables.foodDetails)?this.bookingConfigurables.foodDetails:Array.of(this.bookingConfigurables.foodDetails)}getBerthLabel(e){return this.berthName.transform(e)}getFoodLabel(e){return this.foodName.transform(e)}disablePassport(e){e?this.psgnControlGroup.controls.passengerCardNumber.disable():null!=this.applicableIDCardType&&(this.showIdcard||null!=this.psgnControlGroup.controls.passengerCardNumber.value&&""!=this.psgnControlGroup.controls.passengerCardNumber.value)?this.psgnControlGroup.controls.passengerCardNumber.enable():(this.psgnControlGroup.controls.passengerCardNumber.reset({value:"",disabled:e}),this.showIdcard=!1)}validateSrctznConcession(){const e=this.psgnControlGroup.get("passengerAge").value-0,t=this.psgnControlGroup.get("passengerGender"),n=this.psgnControlGroup.get("passengerNationality"),i=this.psgnControlGroup.get("passUPN");"IN"!==n.value||!("M"===t.value&&e>=this.bookingConfigurables.srctznAge||"F"===t.value&&e>=this.bookingConfigurables.srctnwAge||"T"===t.value&&e>=this.bookingConfigurables.srctzTAge)||this.bookingConfigurables.concessionBooking&&"GENERAL"!==this.psgnControlGroup.get("psgnConcType").value||null!=i.value&&null!=i.value||this.mpPsgnPresent()?(this.psgnControlGroup.get("passengerSrCtznConcession").reset({value:"0",disabled:!0}),this.showSSConc=!1):(this.concVal=this.psgnControlGroup.get("passengerSrCtznConcession").value,this.psgnControlGroup.get("passengerSrCtznConcession").reset({value:this.concVal,disabled:!1}),this.showSSConc=!0),this.iniConcession()}validateChildBerth(){let e=this.psgnControlGroup.get("passengerAge").value-0;const t=this.psgnControlGroup.get("psgnConcType");(t.disabled||null===t.value||"0"===t.value||"GENERAL"===t.value||"ESCORT"===t.value||"HANDICAP"===t.value)&&e<=this.bookingConfigurables.maxChildAge&&e>=this.bookingConfigurables.minPassengerAge&&"true"!=this.bookingConfigurables.childBerthMandatory?this.psgnControlGroup.get("childBerthFlag").reset({value:!0,disabled:!1}):this.psgnControlGroup.get("childBerthFlag").reset({value:!0,disabled:!0}),this.nosbBooking&&this.psgnControlGroup.get("childBerthFlag").reset({value:!1,disabled:!1})}passconcession(){const e=this.psgnControlGroup.get("psgnConcType"),t=this.psgnControlGroup.get("passengerNationality");if(this.quotaCode=this.journeyDetails.lapDetails[this.lapNo-1].quotaCode,this.mpUser&&("PH"==this.quotaCode||"GN"==this.quotaCode&&!this.bookingConfigurables.concessionBooking)||!e.disabled&&null!==e.value&&"0"!==e.value&&"GENERAL"!==e.value)if(1==this.psgnControlGroup.get("mpMemberFlag").value?(this.psgnControlGroup.get("psgnConcCardId").enable(),this.psgnControlGroup.get("psgnConcDOBP").enable(),this.psgnControlGroup.get("psgnConcCardExpiryDateP").enable()):null!=this.psgnControlGroup.get("psgnConcCardId").value&&null!=this.psgnControlGroup.get("psgnConcCardId").value&&""!=this.psgnControlGroup.get("psgnConcCardId").value||(this.psgnControlGroup.get("psgnConcCardId").reset({value:null,disabled:!1}),this.psgnControlGroup.get("psgnConcDOBP").reset({value:null,disabled:!1}),this.psgnControlGroup.get("psgnConcCardExpiryDateP").reset({value:null,disabled:!1})),this.psgnControlGroup.get("passengerSrCtznConcession").reset({value:"0",disabled:!0}),this.psgnControlGroup.get("childBerthFlag").reset({value:!0,disabled:!0}),"HANDICAP"===e.value&&this.validateChildBerth(),"GENERAL"===e.value&&this.validateChildBerth(),this.validateSrctznConcession(),"ESCORT"===e.value||"PRESSS"===e.value||"PRESCH"===e.value||"PRESCO"===e.value||"MPCOMP"===e.value||"MPBLES"===e.value||"MPSPOS"===e.value||"EXCOMP"===e.value||"MPNTSP"===e.value){let t;if("ESCORT"===e.value){const e=new Date;this.maxdayDOB=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),this.toDOBYr=e.getFullYear(),t=this.concCardDtls.HANDICAP,"UNIQUE_ICARD"==this.psgnControlGroup.get("passengerCardTypeMaster").value&&this.psgnControlGroup.get("passengerCardTypeMaster").reset({value:"NULL_IDCARD",disabled:!1}),this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!1}),this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!1}),this.showIdcard=!0,this.applicableIDCardTypes(),this.validateChildBerth()}else"MPCOMP"===e.value||"MPBLES"===e.value||"EXCOMP"===e.value||"MPNTSP"===e.value||"MPSPOS"===e.value&&(null==this.userService.userResponse.mpUserDetailsDTO.spouseBookingName||null==this.userService.userResponse.mpUserDetailsDTO.spouseBookingName||""==this.userService.userResponse.mpUserDetailsDTO.spouseBookingName)?(t={cardNo:this.userService.userResponse.mpUserDetailsDTO.idCardNumber,DoB:new Date(this.userService.userResponse.mpUserDetailsDTO.dateOfBirth),DoE:this.userService.userResponse.mpUserDetailsDTO.cardExpiryDate},"MPCOMP"!==e.value&&"EXCOMP"!==e.value||(this.psgnControlGroup.get("passengerName").setValue({masterPassengerName:"Companion"}),this.psgnControlGroup.get("passengerAge").setValue(99),this.psgnControlGroup.get("passengerGender").setValue("M"))):t=this.concCardDtls.PRESSC;t&&(this.psgnControlGroup.get("psgnConcCardId").setValue(t.cardNo),"ESCORT"===e.value||this.mpUser?this.psgnControlGroup.get("psgnConcDOBP").setValue(t.DoB):this.psgnControlGroup.get("psgnConcDOBP").setValue(null),this.psgnControlGroup.get("psgnConcCardExpiryDateP").setValue(t.DoE))}else this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!0}),this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!0}),this.showIdcard=!1;else this.psgnControlGroup.get("psgnConcCardId").reset({value:null,disabled:!0}),this.psgnControlGroup.get("psgnConcDOBP").reset({value:null,disabled:!0}),this.psgnControlGroup.get("psgnConcCardExpiryDateP").reset({value:null,disabled:!0}),("IN"===t.value||""===t.value||this.bookingConfigurables.bonafideCountryList.indexOf(t.value)>=0)&&(this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!0}),this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!0}),this.showIdcard=!1),this.validateSrctznConcession(),this.validateChildBerth(),this.updatePsgnInOtherLap(!1,null)}populateAge(){const e=this.psgnControlGroup.get("psgnConcDOBP").value,t=this.psgnControlGroup.get("psgnConcType");if(void 0!==e&&null!=e&&"ESCORT"!=t.value){let t=new Date(e),n=new Date,i=n.getFullYear()-t.getFullYear();i-=n.getMonth()<t.getMonth()||n.getMonth()==t.getMonth()&&n.getDate()<t.getDate()?1:0,this.psgnControlGroup.controls.passengerAge.setValue(i),this.updatePsgnInOtherLap(!0,i)}}updateConcCardDtls(){const e=this.psgnControlGroup.get("psgnConcType");if("HANDICAP"===e.value||"PRESSC"===e.value){const t={cardNo:this.psgnControlGroup.get("psgnConcCardId").value,DoB:this.psgnControlGroup.get("psgnConcDOBP").value,DoE:this.psgnControlGroup.get("psgnConcCardExpiryDateP").value};"HANDICAP"===e.value?this.updateConc.emit({HANDICAP:t}):"PRESSC"===e.value&&this.updateConc.emit({PRESSC:t})}}UpdatePassDtls(){const e={passUPN:this.psgnControlGroup.get("passUPN").value,passBookingCode:this.psgnControlGroup.get("passBookingCode").value};this.updatePass.emit({passDtls:e})}showMsg(e){"nationality"===e?1==this.lapNo&&"IN"!==this.psgnControlGroup.controls.passengerNationality.value&&(this.displayMsg=!0,this.infoMessage=this.langService.errorMsg.passengerNationalityErr1,this.bonafideMessage&&(this.infoMessage=this.infoMessage+this.langService.lang.psgnInputPageMsg33)):"childBerth"===e&&(this.displayMsg=!0,this.infoMessage=1==this.psgnControlGroup.controls.childBerthFlag.value?this.langService.errorMsg.passengerChildBerthErr1:this.langService.errorMsg.passengerChildBerthErr2,this.iniConcession()),this.displayMsg&&Object(s.a)(300).subscribe(()=>{this.infoDialogOk.nativeElement.focus()})}hideMsg(){this.displayMsg=!1}validateAge(e){return!(e.target.value.length>=3)&&(8===e.charCode||0===e.charCode||13===e.charCode?null:e.charCode>=48&&e.charCode<=57)}searchPassneger(e){this.masterPsgnResults=null==this.masterList||null==this.masterList||null==this.masterList.passengerDetailList||this.bookingConfigurables.maxMasterListPsgn<this.masterList.passengerDetailList.length||this.nameAgeGenderReadOnly||this.retJrny||this.psgnControlGroup.controls.mpMemberFlag.value&&"MPSPOS"!==this.psgnControlGroup.controls.psgnConcType.value||this.psgnControlGroup.controls.softMemberFlag.value||this.psgnControlGroup.controls.passengerVerified.value?[]:this.masterList.passengerDetailList.filter(t=>t.masterPassengerName.toUpperCase().includes(e.query.toUpperCase())&&(null==t.clientTxnId||this.journeyDetails.clientTxnId!=t.clientTxnId)||t.masterListId==this.psgnControlGroup.controls.masterPsgnId.value)}selectMstPsgns(e){const t=Array.isArray(this.bookingConfigurables.applicableBerthTypes)?this.bookingConfigurables.applicableBerthTypes:Array.of(this.bookingConfigurables.applicableBerthTypes);let n=new Object;this.psgnControlGroup.get("passengerName").setValue({masterPassengerName:e.masterPassengerName.substring(0,this.bookingConfigurables.maxNameLength)}),n.charCount=this.psgnControlGroup.get("passengerName").value.length,n.masterListId=e.masterListId,n.relMasterListId=this.psgnControlGroup.controls.masterPsgnId.value,n.masterListId==n.relMasterListId&&(n.relMasterListId=null);let i=this.psgnControlGroup.controls.masterPsgnId.value;if(this.psgnControlGroup.controls.masterPsgnId.setValue(e.masterListId),this.psgnControlGroup.controls.passengerAge.setValue(""),this.psgnControlGroup.controls.passengerAge.setValue(Number(e.age)),this.psgnControlGroup.controls.passengerGender.setValue(e.gender),"true"==this.bookingConfigurables.foodChoiceEnabled){let t=null;"VEG"===e.foodPreference?t="V":"NON_VEG"===e.foodPreference?(t="N",this.onMealSelection(t)):t="TEA_COFFEE"===e.foodPreference?"T":"SNACKS"===e.foodPreference?"S":"D",this.bookingConfigurables.foodDetails.includes(t)&&this.psgnControlGroup.controls.passengerFoodChoice.setValue(t)}const a=t.indexOf(e.berthPreference)>-1?e.berthPreference:"";if(this.psgnControlGroup.controls.passengerBerthChoice.setValue(a),null===e.idCardType||""===e.idCardType.trim()||"IN"!=this.psgnControlGroup.controls.passengerNationality.value&&"PASSPORT"!=e.idCardType||(this.psgnControlGroup.controls.passengerCardType.setValue(e.idCardType),this.psgnControlGroup.controls.passengerCardTypeMaster.setValue(e.idCardType),this.psgnControlGroup.controls.passengerCardNumber.setValue(null!==e.idCardNumber?e.idCardNumber.trim():""),this.psgnControlGroup.controls.passengerCardNumberMaster.setValue(null!==e.idCardNumber?e.idCardNumber.trim():"")),null!==e.idCardType&&""!==e.idCardType.trim()&&"UNIQUE_ICARD"==e.idCardType&&1!=e.verificationStatus&&(this.psgnControlGroup.get("passengerCardNumber").reset({value:"",disabled:!0}),this.psgnControlGroup.get("passengerCardType").reset({value:"NULL_IDCARD",disabled:!0}),this.psgnControlGroup.get("passengerCardNumberMaster").reset({value:"",disabled:!0}),this.psgnControlGroup.get("passengerCardTypeMaster").reset({value:"NULL_IDCARD",disabled:!0})),"IN"==this.psgnControlGroup.controls.passengerNationality.value&&this.psgnControlGroup.controls.passengerVerified.setValue("UNIQUE_ICARD"===e.idCardType&&1==e.verificationStatus),null!=e.dateOfBirth&&this.psgnControlGroup.controls.psgnConcDOBP.setValue(new Date(e.dateOfBirth)),this.psgnControlGroup.controls.passengerSrCtznConcession.setValue("0"),"true"!=this.bookingConfigurables.seniorCitizenApplicable||this.bookingConfigurables.concessionBooking&&"GENERAL"!=this.psgnControlGroup.controls.psgnConcType.value||"IN"!=this.psgnControlGroup.controls.passengerNationality.value||("M"===this.psgnControlGroup.controls.passengerGender.value&&this.psgnControlGroup.controls.passengerAge.value>=this.bookingConfigurables.srctznAge||"F"===this.psgnControlGroup.controls.passengerGender.value&&this.psgnControlGroup.controls.passengerAge.value>=this.bookingConfigurables.srctnwAge||"T"===this.psgnControlGroup.controls.passengerGender.value&&this.psgnControlGroup.controls.passengerAge.value>=this.bookingConfigurables.srctzTAge)&&(null==e.srCtznConc||""==e.srCtznConc.trim()?this.psgnControlGroup.controls.passengerSrCtznConcession.setValue("0"):"SRCTZN"==e.srCtznConc.trim()||"SRCTNW"==e.srCtznConc.trim()||"SRCTZT"==e.srCtznConc.trim()?this.psgnControlGroup.controls.passengerSrCtznConcession.setValue("1"):"PSRCTN"==e.srCtznConc.trim()||"PSRCTW"==e.srCtznConc.trim()||"PSRCTT"==e.srCtznConc.trim()?this.psgnControlGroup.controls.passengerSrCtznConcession.setValue("2"):"NOCONC"==e.srCtznConc.trim()&&this.psgnControlGroup.controls.passengerSrCtznConcession.setValue("3")),"2"!=e.userType&&"3"!=e.userType||(this.psgnControlGroup.controls.psgnConcType.setValue(null!==e.srCtznConc?e.srCtznConc:""),this.psgnControlGroup.controls.psgnConcCardId.setValue(null!=e.railwayIsuedCardNo?e.railwayIsuedCardNo.trim():""),null!=e.dobOnID&&this.psgnControlGroup.controls.psgnConcDOBP.setValue(new Date(e.dobOnID)),null!=e.dateValid&&this.psgnControlGroup.controls.psgnConcCardExpiryDateP.setValue(new Date(e.dateValid))),1==this.lapNo){let t=JSON.parse(JSON.stringify(this.masterList));if(t.passengerDetailList.forEach(t=>{t.masterListId==e.masterListId?t.clientTxnId=this.journeyDetails.clientTxnId:i==t.masterListId&&(t.clientTxnId=void 0)}),this.store.dispatch(new l.r(t)),this.journeyDetails.multilapBooking){let t=new Object;t.index=this.index,t.isMasterListPassenger=!0,t.psgn=e,this.store.dispatch(new l.C(t))}this.updateConcCardDtls()}}validatePass(){"PB"===this.userService.quota&&(this.psgnControlGroup.get("passConcessionType").reset({value:0,disabled:!1}),this.showPassConcType=!0)}updatePsgnsIfLapMatched(e){if(null!=e&&e.index==this.index)return e.ageOnly?(this.updateOnAgeChange=!1,void this.psgnControlGroup.controls.passengerAge.setValue(e.age)):void(this.lapNo<2||(e.isMasterListPassenger?this.selectMstPsgns(e.psgn):(this.psgnControlGroup.controls.passengerAge.setValue(e.psgn.passengerAge),this.psgnControlGroup.controls.passengerGender.setValue(e.psgn.passengerGender),this.psgnControlGroup.controls.psgnConcDOBP.setValue(e.psgn.psgnConcDOBP),this.psgnControlGroup.controls.passengerNationality.setValue(e.psgn.passengerNationality),this.psgnControlGroup.controls.passengerCardType.setValue(e.psgn.passengerCardType),this.psgnControlGroup.controls.passengerCardTypeMaster.setValue(e.psgn.passengerCardTypeMaster),this.psgnControlGroup.controls.passengerCardNumber.setValue(e.psgn.passengerCardNumber),this.psgnControlGroup.controls.passengerVerified.setValue(e.psgn.passengerVerified),this.psgnControlGroup.controls.passengerCardNumberMaster.setValue(e.psgn.passengerCardNumberMaster))))}updatePsgnInOtherLap(e,t){if(e||1==this.lapNo&&this.journeyDetails.multilapBooking){let n=new Object;n.index=this.index,n.isMasterListPassenger=!1,n.psgn=this.psgnControlGroup.value,n.ageOnly=e,n.age=t,this.store.dispatch(new l.C(n))}}mpPsgnPresent(){const e=this.psgnControlGroup.get("psgnConcType").value;return!!this.mpUser&&("MPPASS"===e||"MPSPOS"===e||"MPCOMP"===e||"MPBLES"===e||"EXMP"===e||"EXCOMP"===e||"MPNTSP"===e)}onMealSelection(e){console.log(e),"N"==e&&this.updateMessage.emit({key:"meal"})}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(u.a),o.Ub(c.a),o.Ub(la.a),o.Ub(oa.a),o.Ub(g.b))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-passenger"]],viewQuery:function(e,t){var n;1&e&&(o.bd(pa,!0),o.bd(da,!0)),2&e&&(o.Hc(n=o.jc())&&(t.infoDialogOk=n.first),o.Hc(n=o.jc())&&(t.autocompletePsgn=n.first))},inputs:{psgnControlGroup:"psgnControlGroup",lapNo:"lapNo",bookingConfigurables:"bookingConfigurables",countryList:"countryList",concCardDtls:"concCardDtls",passDtls:"passDtls",index:"index",journeyDetails:"journeyDetails",mpUser:"mpUser",isIrctcTrain:"isIrctcTrain"},outputs:{updateConc:"updateConc",updatePass:"updatePass",updateMessage:"updateMessage"},decls:40,vars:32,consts:[["novalidate","",1,"container-fluid",3,"formGroup"],[1,"row",2,"margin-bottom","4px"],[4,"ngIf"],["class","col-pad col-xs-12",4,"ngIf"],["class","Layer_7 col-sm-3 col-xs-6",4,"ngIf"],["class","Layer_7 col-sm-3 col-xs-6","style","padding-top: 15px;padding-bottom: 6px;",4,"ngIf"],[1,"Layer_7","col-sm-3","col-xs-6"],["formControlName","passConcessionType","class","form-control",4,"ngIf"],["class","col-xs-12",4,"ngIf"],[3,"control"],["modal","true",3,"visible","visibleChange","keydown.Tab","keydown.shift.Tab"],[3,"innerHTML"],["type","button","pButton","","icon","fa fa-check","label","OK",3,"click"],["infoDialogOk",""],["class","col-xs-12","style","padding: 0px;",4,"ngIf"],[1,"Layer_7","col-sm-3","col-xs-12",2,"height","46px","margin-bottom","-6px"],["formControlName","passengerName","field","masterPassengerName","size","24",3,"suggestions","maxlength","placeholder","readonly","completeMethod","onSelect","onFocus"],["autocompletePsgn",""],["pTemplate","item"],[1,"Layer_7","col-sm-1","col-xs-6"],["maxlength","3","size","3","type","number","formControlName","passengerAge","min","1",1,"form-control",3,"readonly","placeholder","max"],[1,"Layer_7","col-sm-2","col-xs-6"],["formControlName","passengerGender","class","form-control",4,"ngIf","ngIfElse"],["genderAsReadOnly",""],["formControlName","passengerNationality","class","form-control","readonly","mpUser",4,"ngIf","ngIfElse"],["nationalityAsReadOnly",""],["class","Layer_7 col-sm-3 col-xs-6 divTooltip",4,"ngIf"],[1,"col-xs-12",2,"padding","0px"],["class","pull-right success fa fa-check-circle",4,"ngIf"],[1,"pull-right","success","fa","fa-check-circle"],["formControlName","passengerGender",1,"form-control"],["size","7","value",""],["size","7","value","M"],["size","7","value","F"],["size","7","value","T"],["maxlength","7","size","7","type","text",1,"form-control","ng-valid",3,"readonly","value"],["formControlName","passengerNationality","readonly","mpUser",1,"form-control"],["size","18","value",""],["size","18",3,"value",4,"ngFor","ngForOf"],["size","18",3,"value"],["maxlength","18","size","18","type","text",1,"form-control","ng-valid",3,"readonly","value"],["formControlName","passengerCardType",1,"form-control"],["size","16",3,"value",4,"ngFor","ngForOf"],["size","16",3,"value"],[1,"Layer_7","col-sm-3","col-xs-6","divTooltip"],["size","15","type","text","placeholder","ID Card No","formControlName","passengerCardNumber","name","passengerCardNumber","class","form-control",3,"maxlength","id",4,"ngIf"],[1,"contentToolTip"],["size","15","type","text","placeholder","ID Card No","formControlName","passengerCardNumber","name","passengerCardNumber",1,"form-control",3,"maxlength","id"],[1,"col-pad","col-xs-12"],["formControlName","passengerBerthChoice","class","form-control",4,"ngIf"],["formControlName","passengerBerthChoice",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","passengerFoodChoice",1,"form-control",3,"id","change"],["formControlName","passengerSrCtznConcession","name","srctzn-option",1,"form-control",3,"id"],[1,"Layer_7","col-sm-3","col-xs-6",2,"padding-top","15px","padding-bottom","6px"],["type","checkbox","formControlName","childBerthFlag",1,"css-checkbox",3,"id","change"],[1,"css-label_c","t_cl",3,"for"],["type","checkbox","formControlName","passengerBedrollChoice",1,"css-checkbox",3,"id"],["class","Layer_7 col-sm-3 col-xs-6 divTooltip",3,"hidden",4,"ngIf"],["formControlName","psgnConcType","class","form-control",4,"ngIf","ngIfElse"],["concessionAsReadOnly",""],["formControlName","psgnConcType",1,"form-control"],["size","27","value","0"],[1,"Layer_7","col-sm-3","col-xs-6","divTooltip",3,"hidden"],["type","text","formControlName","psgnConcCardId","placeholder","Card No",1,"form-control",3,"readonly","maxlength","blur"],["class","contentToolTip",4,"ngIf"],["formControlName","psgnConcCardExpiryDateP","placeholder","Valid Upto(dd-mm-yyyy)","dateFormat","dd-mm-yy",3,"yearRange","yearNavigator","monthNavigator","minDate","maxDate","defaultDate","inputStyle","onSelect",4,"ngIf","ngIfElse"],["psgnConcCardExpiryDatePAsReadOnly",""],["formControlName","psgnConcCardExpiryDateP","placeholder","Valid Upto(dd-mm-yyyy)","dateFormat","dd-mm-yy",3,"yearRange","yearNavigator","monthNavigator","minDate","maxDate","defaultDate","inputStyle","onSelect"],["maxlength","20","size","10","type","text","placeholder","Valid Upto(dd-mm-yyyy)",1,"form-control","ng-valid",3,"readonly","value"],["formControlName","psgnConcDOBP","placeholder","Date of Birth(dd-mm-yyyy)","dateFormat","dd-mm-yy",3,"yearRange","yearNavigator","monthNavigator","minDate","maxDate","defaultDate","inputStyle","onSelect","change",4,"ngIf","ngIfElse"],["psgnConcDOBPAsReadOnly",""],["formControlName","psgnConcDOBP","placeholder","Date of Birth(dd-mm-yyyy)","dateFormat","dd-mm-yy",3,"yearRange","yearNavigator","monthNavigator","minDate","maxDate","defaultDate","inputStyle","onSelect","change"],["maxlength","20","size","10","type","text","placeholder","Date of Birth(dd-mm-yyyy)",1,"form-control","ng-valid",3,"readonly","value"],["size","12","maxlength","12","type","text","placeholder","Force Number","formControlName","passengerForceNumber","name","psgn-force-number",1,"form-control","input-xs",3,"id"],["formControlName","passConcessionType",1,"form-control"],["size","18","value","0"],["size","18","value","1",4,"ngIf"],["size","18","value","2"],["size","18","value","1"],["size","12","type","number","formControlName","passUPN",1,"form-control","input-xs",3,"placeholder","blur"],["size","12","type","text","formControlName","passBookingCode","autocomplete","off",1,"form-control","input-xs",3,"placeholder","blur"],[1,"col-xs-12"],[2,"color","#082b71"]],template:function(e,t){1&e&&(o.ac(0,"div",0),o.ac(1,"div",1),o.Rc(2,xa,18,15,"span",2),o.Rc(3,Aa,4,1,"div",3),o.Rc(4,La,3,2,"div",4),o.Rc(5,Ra,5,3,"div",4),o.Rc(6,Ba,3,2,"div",4),o.Rc(7,Ea,4,4,"div",5),o.Rc(8,Fa,4,4,"div",5),o.Rc(9,es,5,4,"span",2),o.Rc(10,ts,2,1,"div",4),o.ac(11,"div",6),o.Rc(12,is,6,1,"select",7),o.Zb(),o.Rc(13,as,2,1,"div",4),o.Rc(14,ss,2,1,"div",4),o.Rc(15,rs,4,1,"div",8),o.Zb(),o.ac(16,"div",1),o.Vb(17,"app-control-messages",9),o.Vb(18,"app-control-messages",9),o.Vb(19,"app-control-messages",9),o.Vb(20,"app-control-messages",9),o.Vb(21,"app-control-messages",9),o.Vb(22,"app-control-messages",9),o.Vb(23,"app-control-messages",9),o.Vb(24,"app-control-messages",9),o.Vb(25,"app-control-messages",9),o.Vb(26,"app-control-messages",9),o.Vb(27,"app-control-messages",9),o.Vb(28,"app-control-messages",9),o.Vb(29,"app-control-messages",9),o.Vb(30,"app-control-messages",9),o.Vb(31,"app-control-messages",9),o.Vb(32,"app-control-messages",9),o.Zb(),o.Zb(),o.ac(33,"p-dialog",10),o.ic("visibleChange",(function(e){return t.displayMsg=e}))("keydown.Tab",(function(e){return e.preventDefault()}))("keydown.shift.Tab",(function(e){return e.preventDefault()})),o.ac(34,"p-header"),o.Tc(35," Info "),o.Zb(),o.Vb(36,"div",11),o.ac(37,"p-footer"),o.ac(38,"button",12,13),o.ic("click",(function(){return t.hideMsg()})),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.tc("formGroup",t.psgnControlGroup),o.Cb(2),o.tc("ngIf",1==t.lapNo),o.Cb(1),o.tc("ngIf",t.journeyDetails.multilapBooking),o.Cb(1),o.tc("ngIf",!t.nosbBooking&&t.psgnControlGroup.controls.childBerthFlag.value),o.Cb(1),o.tc("ngIf","true"===t.bookingConfigurables.foodChoiceEnabled),o.Cb(1),o.tc("ngIf","true"===t.bookingConfigurables.seniorCitizenApplicable&&(t.showSSConc||null!=t.psgnControlGroup.controls.passengerSrCtznConcession.value)),o.Cb(1),o.tc("ngIf",!t.psgnControlGroup.controls.childBerthFlag.disabled&&!t.nosbBooking),o.Cb(1),o.tc("ngIf","true"===t.bookingConfigurables.bedRollFlagEnabled),o.Cb(1),o.tc("ngIf",!t.nosbBooking&&(t.bookingConfigurables.concessionBooking||t.mpUser&&("PH"==t.quotaCode||"GN"==t.quotaCode))||"FT"==t.quotaCode||t.showDob),o.Cb(1),o.tc("ngIf","true"==t.bookingConfigurables.pmfInputEnable),o.Cb(2),o.tc("ngIf",t.showPassConcType),o.Cb(1),o.tc("ngIf",t.showPassBooking),o.Cb(1),o.tc("ngIf",t.showPassBooking),o.Cb(1),o.tc("ngIf",t.showPassBooking),o.Cb(2),o.tc("control",t.psgnControlGroup.controls.passengerName),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerAge),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerGender),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerNationality),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerCardNumber),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerCardType),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerSrCtznConcession),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerFoodChoice),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.psgnConcType),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.psgnConcCardId),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.psgnConcDOB),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.psgnConcCardExpiryDate),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passengerForceNumber),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passUPN),o.Cb(1),o.tc("control",t.psgnControlGroup.controls.passBookingCode),o.Cb(1),o.tc("control",t.psgnControlGroup),o.Cb(1),o.tc("visible",t.displayMsg),o.Cb(3),o.tc("innerHTML",t.infoMessage,o.Lc))},directives:[S.o,S.i,p.o,sa,rn.a,d.c,d.b,na.a,O.a,S.n,S.g,S.k,d.e,S.s,S.b,S.w,S.r,S.y,p.n,S.a,x.a],pipes:[ca.a,ua.a,ga.a,la.a,oa.a,pi.a,p.f],styles:["input.ng-invalid[_ngcontent-%COMP%], select.ng-invalid[_ngcontent-%COMP%]{border-bottom:2px solid red}input.ng-untouched[_ngcontent-%COMP%], input.ng-valid[_ngcontent-%COMP%], select.ng-untouched[_ngcontent-%COMP%], select.ng-valid[_ngcontent-%COMP%]{border-bottom:2px solid #d2d2d2!important}div.passenger-legend[_ngcontent-%COMP%]{font-size:1.4rem}"]}),e})(),os=(()=>{class e{constructor(){}ngOnInit(){}get applicableBerthTypes(){return Array.isArray(this.bookingConfigurables.applicableBerthTypes)?this.bookingConfigurables.applicableBerthTypes:Array.of(this.bookingConfigurables.applicableBerthTypes)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ob({type:e,selectors:[["app-infant"]],inputs:{psgnInputForm:["group","psgnInputForm"],bookingConfigurables:"bookingConfigurables"},decls:33,vars:4,consts:[[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"form-group"],["type","text","placeholder","Name","formControlName","name","name","infant-name","id","infant-name",1,"form-control"],["formControlName","age",1,"form-control"],["value",""],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["formControlName","gender",1,"form-control"],["value","M"],["value","F"],[1,"ticketIssu"],[3,"control"]],template:function(e,t){1&e&&(o.ac(0,"div",0),o.ac(1,"div",1),o.ac(2,"div",2),o.Vb(3,"input",3),o.Zb(),o.ac(4,"div",2),o.ac(5,"select",4),o.ac(6,"option",5),o.Tc(7,"Age"),o.Zb(),o.ac(8,"option",6),o.Tc(9,"Below one year"),o.Zb(),o.ac(10,"option",7),o.Tc(11,"One year"),o.Zb(),o.ac(12,"option",8),o.Tc(13,"Two years"),o.Zb(),o.ac(14,"option",9),o.Tc(15,"Three years"),o.Zb(),o.ac(16,"option",10),o.Tc(17,"Four years"),o.Zb(),o.Zb(),o.Zb(),o.ac(18,"div",2),o.ac(19,"select",11),o.ac(20,"option",5),o.Tc(21,"Gender*"),o.Zb(),o.ac(22,"option",12),o.Tc(23,"Male"),o.Zb(),o.ac(24,"option",13),o.Tc(25,"Female"),o.Zb(),o.Zb(),o.Zb(),o.ac(26,"div",2),o.ac(27,"span",14),o.Tc(28,"Tickets is not to be issued"),o.Zb(),o.Zb(),o.Zb(),o.ac(29,"div"),o.Vb(30,"app-control-messages",15),o.Vb(31,"app-control-messages",15),o.Vb(32,"app-control-messages",15),o.Zb(),o.Zb()),2&e&&(o.tc("formGroup",t.psgnInputForm),o.Cb(30),o.tc("control",t.psgnInputForm.controls.name),o.Cb(1),o.tc("control",t.psgnInputForm.controls.age),o.Cb(1),o.tc("control",t.psgnInputForm.controls.gender))},directives:[S.o,S.i,S.b,S.n,S.g,S.w,S.r,S.y,sa],styles:[""]}),e})();var cs=n("LRne");function us(e,t){if(1&e&&(o.ac(0,"option",12),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(e)}}function gs(e,t){if(1&e&&(o.ac(0,"option",12),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(e)}}let ps=(()=>{class e{constructor(e,t){this.langService=e,this.webService=t}ngOnInit(){this.fetchPinDetails(this.tktAddress.get("pinCode").value)}fetchPinDetails(e){null!=e&&null!=e&&""!=e&&this.webService.fetchPinDetails(e).subscribe(e=>{this.adressDetail=e;const t=Array.isArray(this.adressDetail.cityList)?this.adressDetail.cityList:Array.of(this.adressDetail.cityList);this.tktAddress.get("stateName").setValue(this.adressDetail.state),this.cityList$=Object(cs.a)(t),1===t.length?(this.tktAddress.get("city").setValue(t[0]),this.fetchPostDetails(t[0])):t.indexOf(this.tktAddress.get("city").value)>=0?this.fetchPostDetails(this.tktAddress.get("city").value):this.tktAddress.get("city").setValue("")})}fetchPostDetails(e){null!=e&&null!=e&&""!=e&&this.webService.fetchPinDetails(this.tktAddress.get("pinCode").value,e).subscribe(e=>{this.adressDetail=e;const t=Array.isArray(this.adressDetail.postofficeList)?this.adressDetail.postofficeList:Array.of(this.adressDetail.postofficeList);this.poList$=Object(cs.a)(t),1===t.length?this.tktAddress.get("postOffice").setValue(t[0]):t.indexOf(this.tktAddress.get("postOffice").value)<0&&this.tktAddress.get("postOffice").setValue("")})}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(c.a),o.Ub(m.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-address-capture"]],inputs:{tktAddress:"tktAddress"},decls:23,vars:19,consts:[[1,"container-fluid",2,"padding","5px 2px",3,"formGroup"],[1,"Layer_7","col-xs-12","col-sm-4","col-lg-3",2,"padding","5px 2px"],["type","text","maxlength","255","formControlName","address","name","aaa1","id","aaa1","autocomplete","off",1,"form-control","full-width",3,"placeholder"],["type","text","maxlength","255","formControlName","street","name","aaa2","id","aaa2","autocomplete","off",1,"form-control","full-width",3,"placeholder"],["type","text","maxlength","255","formControlName","colony","name","aaa3","id","aaa3","autocomplete","off",1,"form-control","full-width",3,"placeholder"],[1,"Layer_7","col-xs-6","col-sm-4","col-lg-3",2,"padding","5px 2px"],["type","number","maxlength","6","autocomplete","off","formControlName","pinCode","name","aaa4","id","aaa4",1,"form-control","full-width",3,"placeholder","change"],["type","text","formControlName","stateName","name","address-State","id","address-State",1,"form-control","full-width",3,"placeholder","readonly"],["formControlName","city","name","address-City","id","address-City",1,"form-control","full-width",3,"change"],["value","",3,"selected"],[3,"value",4,"ngFor","ngForOf"],["formControlName","postOffice","name","address-postOffice","id","address-postOffice",1,"form-control","full-width"],[3,"value"]],template:function(e,t){1&e&&(o.ac(0,"div",0),o.ac(1,"div",1),o.Vb(2,"input",2),o.Zb(),o.ac(3,"div",1),o.Vb(4,"input",3),o.Zb(),o.ac(5,"div",1),o.Vb(6,"input",4),o.Zb(),o.ac(7,"div",5),o.ac(8,"input",6),o.ic("change",(function(e){return t.fetchPinDetails(e.target.value)})),o.Zb(),o.Zb(),o.ac(9,"div",5),o.Vb(10,"input",7),o.Zb(),o.ac(11,"div",5),o.ac(12,"select",8),o.ic("change",(function(e){return t.fetchPostDetails(e.target.value)})),o.ac(13,"option",9),o.Tc(14),o.Zb(),o.Rc(15,us,2,2,"option",10),o.nc(16,"async"),o.Zb(),o.Zb(),o.ac(17,"div",5),o.ac(18,"select",11),o.ac(19,"option",9),o.Tc(20),o.Zb(),o.Rc(21,gs,2,2,"option",10),o.nc(22,"async"),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.tc("formGroup",t.tktAddress),o.Cb(2),o.vc("placeholder","",null==t.langService.lang?null:t.langService.lang.address," 1 *"),o.Cb(2),o.wc("placeholder","",null==t.langService.lang?null:t.langService.lang.address," 2 (",null==t.langService.lang?null:t.langService.lang.optional,")"),o.Cb(2),o.wc("placeholder","",null==t.langService.lang?null:t.langService.lang.address," 3 (",null==t.langService.lang?null:t.langService.lang.optional,")"),o.Cb(2),o.vc("placeholder","",null==t.langService.lang?null:t.langService.lang.pin," *"),o.Cb(2),o.vc("placeholder","",null==t.langService.lang?null:t.langService.lang.state," *"),o.tc("readonly",!0),o.Cb(3),o.tc("selected",!0),o.Cb(1),o.Vc("",null==t.langService.lang?null:t.langService.lang.selectcity," *"),o.Cb(1),o.tc("ngForOf",o.oc(16,15,t.cityList$)),o.Cb(4),o.tc("selected",!0),o.Cb(1),o.Vc("",null==t.langService.lang?null:t.langService.lang.postoffice," *"),o.Cb(1),o.tc("ngForOf",o.oc(22,17,t.poList$)))},directives:[S.o,S.i,S.b,S.k,S.n,S.g,S.s,S.w,S.r,S.y,p.n],pipes:[p.b],styles:[""]}),e})();class ds{constructor(){this.addressFlag=null,this.address=null,this.street=null,this.colony=null,this.city="",this.stateName="",this.pinCode=null,this.phoneNumber=null,this.validRegdAddress=null}}function hs(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc(" ",e.iTicketDetailsDTOControl.address,", ")}}function bs(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc(" ",e.iTicketDetailsDTOControl.street,", ")}}function ms(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc(" ",e.iTicketDetailsDTOControl.colony,", ")}}function fs(e,t){if(1&e&&(o.ac(0,"span"),o.Vb(1,"br"),o.Tc(2),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.Vc("",e.iTicketDetailsDTOControl.city,", ")}}function vs(e,t){if(1&e&&(o.ac(0,"span"),o.Vb(1,"br"),o.Tc(2),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.Vc("",e.iTicketDetailsDTOControl.stateName,", ")}}function ys(e,t){if(1&e&&(o.ac(0,"span"),o.Vb(1,"br"),o.Tc(2),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.Vc("PIN - ",e.iTicketDetailsDTOControl.pinCode," ")}}let Cs=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ob({type:e,selectors:[["app-delivery-address"]],inputs:{iTicketDetailsDTOControl:"iTicketDetailsDTOControl",userName:"userName"},decls:21,vars:8,consts:[["id","iTktAddrPreview",2,"border","1px solid gray","border-radius","5px","padding","10px","width","90%"],[2,"border-bottom","1px solid lightgray"],["id","iTktAddr",2,"border-bottom","1px solid lightgray"],[4,"ngIf"],["id","iTktPhone"]],template:function(e,t){1&e&&(o.ac(0,"div"),o.ac(1,"b"),o.ac(2,"label"),o.Tc(3,"Address :"),o.Zb(),o.Zb(),o.Vb(4,"br"),o.ac(5,"div",0),o.ac(6,"div",1),o.ac(7,"b"),o.Tc(8),o.Zb(),o.Zb(),o.Vb(9,"br"),o.ac(10,"div",2),o.Rc(11,hs,2,1,"span",3),o.Rc(12,bs,2,1,"span",3),o.Rc(13,ms,2,1,"span",3),o.Rc(14,fs,3,1,"span",3),o.Rc(15,vs,3,1,"span",3),o.Rc(16,ys,3,1,"span",3),o.Vb(17,"br"),o.Zb(),o.Vb(18,"br"),o.ac(19,"div",4),o.Tc(20),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.Cb(8),o.Uc(t.userName),o.Cb(3),o.tc("ngIf",t.iTicketDetailsDTOControl.address),o.Cb(1),o.tc("ngIf",t.iTicketDetailsDTOControl.street),o.Cb(1),o.tc("ngIf",t.iTicketDetailsDTOControl.colony),o.Cb(1),o.tc("ngIf",t.iTicketDetailsDTOControl.city),o.Cb(1),o.tc("ngIf",t.iTicketDetailsDTOControl.stateName),o.Cb(1),o.tc("ngIf",t.iTicketDetailsDTOControl.pinCode),o.Cb(4),o.Uc(t.iTicketDetailsDTOControl.phoneNumber))},directives:[p.o],encapsulation:2}),e})(),Ss=(()=>{class e{transform(e,t){return e&&void 0!==e&&0!==e.length?(e.sort((e,t)=>e<t?-1:e>t?1:0),e):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.Tb({name:"orderByPipe",type:e,pure:!0}),e})();function Ds(e,t){if(1&e&&(o.ac(0,"option",25),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(e)}}function Ts(e,t){if(1&e&&(o.ac(0,"option",25),o.Tc(1),o.Zb()),2&e){const e=t.$implicit;o.uc("value",e),o.Cb(1),o.Uc(e)}}function ks(e,t){if(1&e){const e=o.bc();o.ac(0,"a",26),o.ic("click",(function(){return o.Kc(e),o.mc(2).showPinDialog()})),o.Tc(1,"Pin Codes covered for delivery"),o.Zb()}}function Is(e,t){if(1&e){const e=o.bc();o.ac(0,"div",4),o.ac(1,"div"),o.ac(2,"b"),o.ac(3,"label"),o.Tc(4,"Address :"),o.Zb(),o.Zb(),o.ac(5,"div",2),o.ac(6,"div",14),o.Vb(7,"input",15),o.Zb(),o.Zb(),o.ac(8,"div",2),o.ac(9,"div",14),o.Vb(10,"input",16),o.ac(11,"label"),o.Tc(12," (Optional)"),o.Zb(),o.Zb(),o.Zb(),o.ac(13,"div",2),o.ac(14,"div",14),o.Vb(15,"input",17),o.ac(16,"label"),o.Tc(17," (Optional)"),o.Zb(),o.Zb(),o.Zb(),o.ac(18,"div",2),o.ac(19,"div",14),o.ac(20,"select",18),o.ic("change",(function(t){return o.Kc(e),o.mc().updateCityList(t)})),o.ac(21,"option",19),o.Tc(22,"- Select State - "),o.Zb(),o.Rc(23,Ds,2,2,"option",20),o.Zb(),o.Zb(),o.Zb(),o.ac(24,"div",2),o.ac(25,"div",14),o.ac(26,"select",21),o.ic("change",(function(t){return o.Kc(e),o.mc().updatePinList(t)})),o.ac(27,"option",19),o.Tc(28,"- Select City - "),o.Zb(),o.Rc(29,Ts,2,2,"option",20),o.nc(30,"orderByPipe"),o.nc(31,"async"),o.Zb(),o.Zb(),o.Zb(),o.ac(32,"div",2),o.ac(33,"div",14),o.Vb(34,"input",22),o.Tc(35,"\xa0\xa0\xa0\xa0 "),o.Rc(36,ks,2,0,"a",23),o.Zb(),o.Zb(),o.ac(37,"div",2),o.ac(38,"div",14),o.Vb(39,"input",24),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(23),o.tc("ngForOf",e.stateList),o.Cb(6),o.tc("ngForOf",o.oc(30,3,o.oc(31,5,e.cityList$))),o.Cb(7),o.tc("ngIf",e.otherAddrSelected)}}function Os(e,t){if(1&e){const e=o.bc();o.ac(0,"li",27),o.ic("click",(function(t){return o.Kc(e),o.mc().setAddrPin(t)})),o.Tc(1),o.Zb()}if(2&e){const e=t.$implicit;o.uc("value",e.pin),o.Cb(1),o.Uc(e.pin)}}const xs=function(){return{"max-height":"400px"}};let As=(()=>{class e{constructor(e,t,n,i){this.bookingService=e,this.userService=t,this.messageService=n,this.langService=i,this.otherAddrSelected=!1,this.showPinListDialog=!1}ngOnInit(){if(this.userName=`${this.userService.userResponse.firstName} ${this.userService.userResponse.middleName} ${this.userService.userResponse.lastName}`,this.localRegdAddr=new ds,this.localRegdAddr=Object.assign(this.localRegdAddr,this.regdAddress),this.regdAddress.validRegdAddress)this.setControlAddress(this.localRegdAddr),this.cityList$=Object(cs.a)(Array.of(this.localRegdAddr.city));else{console.log("INValid Registered Address......");const e=new ds;e.addressFlag=2,this.setControlAddress(e)}}setControlAddress(e){this.iTicketDetailsDTOControl.setValue(e)}click(e){let t=e.target.value;if(1===t)this.setControlAddress(this.localRegdAddr),this.otherAddrSelected=!1;else if(2===t){const e=new ds;e.addressFlag=t,this.setControlAddress(e),this.otherAddrSelected=!0}}updateCityList(e){this.cityList$=null,console.log(e.target.value),this.otherAddrState=e.target.value,this.bookingService.getCityList(e.target.value).subscribe(e=>{console.log(e);const t=e,n=t.error;if(""===n||void 0===n){const e=Array.isArray(t.cityList)?t.cityList:Array.of(t.cityList);console.log(JSON.stringify(t.cityList)),this.cityList$=Object(cs.a)(e)}else console.log(n),this.messageService.add({life:this.langService.life,severity:"error",summary:"Error",detail:n.toString()})},console.error)}updatePinList(e){this.pinList$=null,console.log(e.target.value),this.bookingService.getPinList(this.otherAddrState,e.target.value).subscribe(e=>{console.log(e);const t=e,n=Array.isArray(t.pinList)?t.pinList:Array.of(t.pinList);console.log(JSON.stringify(t.pinList)),this.pinList$=Object(cs.a)(n),this.showPinListDialog=!0},console.error)}setAddrPin(e){console.log(e.target.value),this.iTicketDetailsDTOControl.controls.pinCode.setValue(e.target.value),this.showPinListDialog=!1}showPinDialog(){this.showPinListDialog=!0}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(En.a),o.Ub(u.a),o.Ub(d.d),o.Ub(c.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-i-ticket-input"]],inputs:{iTicketDetailsDTOControl:"iTicketDetailsDTOControl",regdAddress:"regdAddress",stateList:"stateList"},decls:31,vars:10,consts:[[1,"container-fluid",3,"formGroup"],[1,"logheading"],[1,"row"],[1,"col-md-10"],[1,"col-md-6"],["formControlName","addressFlag","name","addressFlag","id","iTktAddrType-regd","value","1","type","radio",3,"click"],["for","iTktAddrType-regd"],["formControlName","addressFlag","name","addressFlag","id","iTktAddrType-other","value","2","type","radio",3,"click"],["for","iTktAddrType-other"],["class","col-md-6",4,"ngIf"],[3,"iTicketDetailsDTOControl","userName"],["modal","true","draggable","false","header","PIN options",3,"contentStyle","visible","visibleChange"],[1,"pin-list"],["style","cursor:pointer; color:#1457a7 ;list-style-type: circle;",3,"value","click",4,"ngFor","ngForOf"],[1,"form-group"],["pInputText","","formControlName","address","placeholder","Flat/Door/Block","id","address","name","address","maxlength","100","type","text",1,"form-control"],["formControlName","street","placeholder","Street/Lane","id","street","name","street","maxlength","80","type","text",1,"form-control"],["formControlName","colony","placeholder","Area/Locality","id","colony","name","colony","maxlength","100","type","text",1,"form-control"],["formControlName","stateName","placeholder","State","id","state","name","state","size","1",1,"form-control","input-sm",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","city","id","city","name","city","size","1",1,"form-control","input-sm",3,"change"],["formControlName","pinCode","placeholder","PIN Code","id","pinCode","name","pinCode","maxlength","6","type","text",1,"form-control"],["id","searchpin","class","",3,"click",4,"ngIf"],["formControlName","phoneNumber","placeholder","Phone Number","id","phone","name","phone","maxlength","10","type","text",1,"form-control"],[3,"value"],["id","searchpin",1,"",3,"click"],[2,"cursor","pointer","color","#1457a7","list-style-type","circle",3,"value","click"]],template:function(e,t){1&e&&(o.Vb(0,"br"),o.ac(1,"div",0),o.ac(2,"div",1),o.Tc(3,"I-Ticket Details"),o.Zb(),o.ac(4,"div",2),o.ac(5,"div",3),o.ac(6,"b"),o.ac(7,"label"),o.Tc(8,"Place of Delivery"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(9,"div",2),o.ac(10,"div",4),o.ac(11,"ul"),o.ac(12,"li"),o.ac(13,"input",5),o.ic("click",(function(e){return t.click(e)})),o.Zb(),o.ac(14,"label",6),o.Tc(15," Registered Address"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(16,"div",4),o.ac(17,"ul"),o.ac(18,"li"),o.ac(19,"input",7),o.ic("click",(function(e){return t.click(e)})),o.Zb(),o.ac(20,"label",8),o.Tc(21," Other"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(22,"div",2),o.Rc(23,Is,40,7,"div",9),o.ac(24,"div",4),o.Vb(25,"app-delivery-address",10),o.Zb(),o.Zb(),o.ac(26,"p-dialog",11),o.ic("visibleChange",(function(e){return t.showPinListDialog=e})),o.ac(27,"div"),o.ac(28,"ul",12),o.Rc(29,Os,2,2,"li",13),o.nc(30,"async"),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e&&(o.Cb(1),o.tc("formGroup",t.iTicketDetailsDTOControl),o.Cb(22),o.tc("ngIf",2==t.iTicketDetailsDTOControl.controls.addressFlag.value),o.Cb(2),o.tc("iTicketDetailsDTOControl",t.iTicketDetailsDTOControl.value)("userName",t.userName),o.Cb(1),o.tc("contentStyle",o.yc(9,xs))("visible",t.showPinListDialog),o.Cb(3),o.tc("ngForOf",o.oc(30,7,t.pinList$)))},directives:[S.o,S.i,S.b,S.t,S.n,S.g,p.o,Cs,rn.a,p.n,S.k,S.w,S.r,S.y],pipes:[p.b,Ss],styles:[""]}),e})();var Ms=n("buLN"),Zs=n("qxh7");const ws=["savedPassengerList"];function Ls(e,t){if(1&e){const e=o.bc();o.ac(0,"button",30),o.ic("click",(function(){return o.Kc(e),o.mc(),o.Ic(45).reject()})),o.Zb()}if(2&e){const e=o.mc();o.uc("label",e.cancel)}}function Ns(e,t){if(1&e&&o.Vb(0,"p-messages",92),2&e){const e=o.mc();o.tc("enableService",!1)("value",e.msgsRedeemTicket)("closable",!1)}}function Rs(e,t){if(1&e){const e=o.bc();o.ac(0,"span",93),o.ac(1,"label",94),o.ac(2,"p-radioButton",95),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc().loyalityChacked(n)})),o.Zb(),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc();o.Cb(1),o.vc("for","lo-",e.value,""),o.Cb(1),o.uc("value",e.value),o.vc("id","lo-",e.value,""),o.Cb(1),o.Vc(" ",n.langService.lang[e.labels]," ")}}function Ps(e,t){if(1&e&&(o.ac(0,"div",103),o.Vb(1,"img",104),o.ac(2,"span",105),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.vc("src","./assets/images/loyaltyImages/",null==e.softAcSumDtoSelected?null:e.softAcSumDtoSelected.bankId,".png",o.Mc),o.Cb(2),o.Uc(null==e.softAcSumDtoSelected?null:e.softAcSumDtoSelected.bankName)}}function Bs(e,t){if(1&e&&(o.ac(0,"div",103),o.ac(1,"span",105),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.selectCard)}}function Es(e,t){if(1&e&&(o.Rc(0,Ps,4,2,"div",102),o.Rc(1,Bs,3,1,"div",102)),2&e){const e=o.mc(2);o.tc("ngIf",e.softAcSumDtoSelected),o.Cb(1),o.tc("ngIf",!e.softAcSumDtoSelected)}}function Fs(e,t){if(1&e){const e=o.bc();o.ac(0,"div",106),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc(2).loyalityBankSelect(n)})),o.Vb(1,"img",104),o.ac(2,"span",105),o.Tc(3),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit;o.Cb(1),o.vc("src","./assets/images/loyaltyImages/",e.bankId,".png",o.Mc),o.Cb(2),o.Uc(e.bankName)}}function js(e,t){if(1&e){const e=o.bc();o.ac(0,"div",107),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Tc(3),o.ac(4,"strong"),o.Tc(5),o.nc(6,"genderName"),o.Zb(),o.Tc(7," | "),o.ac(8,"strong"),o.Tc(9),o.Zb(),o.Tc(10," Yrs "),o.ac(11,"span",108),o.ic("click",(function(){o.Kc(e);const t=o.mc(2);return t.selectSoftPsgn(t.softPsgn)})),o.Tc(12),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(2),o.Uc(null==e.softPsgn?null:e.softPsgn.passengerName),o.Cb(1),o.Vc("(",null==e.softPsgn?null:e.softPsgn.softMemberId,") | "),o.Cb(2),o.Uc(o.oc(6,5,null==e.softPsgn?null:e.softPsgn.passengerGender)),o.Cb(4),o.Uc(null==e.softPsgn?null:e.softPsgn.passengerAge),o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.addLoyalityPassenger)}}function Vs(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc(4);o.Cb(1),o.Wc(" ",null==e.langService.lang?null:e.langService.lang.noLoyaltyAcntExist," ",e.softPsgn.bankName,".")}}function Us(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc(4);o.Cb(1),o.Xc(" ",null==e.langService.lang?null:e.langService.lang.noLoyaltyAcntExist1," ",e.softPsgn.bankName," ",null==e.langService.lang?null:e.langService.lang.noLoyaltyAcntExist2,"")}}function qs(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.Tc(1),o.ac(2,"strong",111),o.ic("click",(function(){return o.Kc(e),o.mc(3).redirectTo("profile/add-loyalty-account")})),o.Tc(3),o.Zb(),o.Vb(4,"br"),o.Rc(5,Vs,2,2,"span",47),o.Rc(6,Us,2,3,"span",47),o.ac(7,"strong"),o.ac(8,"a",112),o.Tc(9),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc(3);o.Cb(1),o.Wc(" ",e.softPsgn.bankName," ",null==e.langService.lang?null:e.langService.lang.noLoyaltyAcnt," "),o.Cb(2),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.clickToLink,""),o.Cb(2),o.tc("ngIf","en"==e.langService.langChoice),o.Cb(1),o.tc("ngIf","hi"==e.langService.langChoice),o.Cb(3),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.clickToApply,"")}}function Gs(e,t){if(1&e&&(o.ac(0,"div",109),o.ac(1,"span",110),o.Tc(2),o.Zb(),o.Rc(3,qs,10,6,"span",47),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.Vc("",e.softPsgn.error," "),o.Cb(1),o.tc("ngIf",e.softPsgn.registerLoyality)}}const _s=function(){return{width:"100%"}};function Js(e,t){if(1&e){const e=o.bc();o.ac(0,"span"),o.ac(1,"div",96),o.ac(2,"p-dropdown",97),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc().softAcSumDtoSelected=t})),o.Rc(3,Es,2,2,"ng-template",98),o.Rc(4,Fs,4,2,"ng-template",99),o.Zb(),o.Zb(),o.Rc(5,js,13,7,"div",100),o.Rc(6,Gs,4,2,"div",101),o.Vb(7,"div",39),o.Zb()}if(2&e){const e=o.mc();o.Cb(2),o.Pc(o.yc(7,_s)),o.uc("placeholder",null==e.langService.lang?null:e.langService.lang.selectCard),o.tc("options",e.softAccountSummaryDTO)("ngModel",e.softAcSumDtoSelected),o.Cb(3),o.tc("ngIf",null!=e.softPsgn&&null==e.softPsgn.error),o.Cb(1),o.tc("ngIf",null!=e.softPsgn&&null!=e.softPsgn.error)}}function zs(e,t){if(1&e&&(o.ac(0,"div",113),o.ac(1,"strong"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.Uc(e.foodChoiceMsgConfirm.message)}}function Ks(e,t){if(1&e){const e=o.bc();o.ac(0,"a",118),o.ic("click",(function(){o.Kc(e);const t=o.mc().index;return o.mc().removePassenger(t)})),o.Zb()}}function Hs(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"app-passenger",119),o.ic("updateConc",(function(t){return o.Kc(e),o.mc(2).updateConcCardList(t)}))("updatePass",(function(t){return o.Kc(e),o.mc(2).updatePassDtls(t)}))("updateMessage",(function(t){return o.Kc(e),o.mc(2).updateMessage(t)})),o.Zb(),o.Zb()}if(2&e){const e=t.index,n=t.$implicit,i=o.mc(),a=i.index,s=i.$implicit,r=o.mc();o.Cb(1),o.tc("mpUser",r.mpUser)("index",a)("psgnControlGroup",s.controls.passenger.value.controls[e])("bookingConfigurables",n.avlDetails.bkgCfg)("countryList",r.countryList)("concCardDtls",r.lastConcCardDtls)("isIrctcTrain",1==n.trainOwner)("journeyDetails",r.multiLapJourneyDetails)("lapNo",e+1)("passDtls",r.lastPassDtls)}}function Qs(e,t){if(1&e&&(o.ac(0,"div"),o.ac(1,"div",114),o.Rc(2,Ks,1,0,"a",115),o.Zb(),o.ac(3,"div",116),o.Rc(4,Hs,2,10,"div",54),o.Zb(),o.ac(5,"div",117),o.Vb(6,"hr"),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.tc("ngIf",!(e.nameAgeGenderReadOnly||e.retJrny)),o.Cb(2),o.tc("ngForOf",e.multiLapJourneyDetails.lapDetails)}}function $s(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"div",120),o.ac(2,"span",121),o.ac(3,"a",122),o.ic("click",(function(){o.Kc(e);const n=t.index;return o.mc().removeInfant(n)})),o.Zb(),o.Zb(),o.Zb(),o.Vb(4,"app-infant",123),o.ac(5,"div",117),o.Vb(6,"hr"),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=o.mc();o.Cb(4),o.tc("group",e)("bookingConfigurables",n.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg)}}function Ys(e,t){if(1&e){const e=o.bc();o.ac(0,"div",124),o.ac(1,"a",125),o.ic("click",(function(){return o.Kc(e),o.mc().addPassenger()}))("keydown.Enter",(function(){return o.Kc(e),o.mc().addPassenger()})),o.ac(2,"span",126),o.Tc(3),o.Zb(),o.ac(4,"span",126),o.Tc(5),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(3),o.Vc("+ ",null==e.langService.lang?null:e.langService.lang.addPassenger,""),o.Cb(2),o.Vc("/ ",null==e.langService.lang?null:e.langService.lang.addInfantWithBerth,"")}}function Ws(e,t){if(1&e){const e=o.bc();o.ac(0,"div",127),o.ac(1,"a",125),o.ic("click",(function(){return o.Kc(e),o.mc().addInfant()}))("keydown.Enter",(function(){return o.Kc(e),o.mc().addInfant()})),o.ac(2,"span",126),o.Tc(3),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc();o.Cb(3),o.Vc("+ ",null==e.langService.lang?null:e.langService.lang.addInfantWithoutBerth,"")}}function Xs(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.nc(2,"mask"),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Uc(o.qc(2,1,e.userResponse.mobile,2,e.userResponse.mobile.length-2))}}const er=function(){return{"margin-bottom":"10px"}};function tr(e,t){if(1&e&&(o.ac(0,"div",48),o.ac(1,"p-panel",41),o.ac(2,"p-header",42),o.ac(3,"div",43),o.ac(4,"span",52),o.Tc(5),o.Zb(),o.Zb(),o.Zb(),o.Vb(6,"app-address-capture",128),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Pc(o.yc(5,er)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.captureAddress),o.Cb(1),o.tc("tktAddress",e.addPsgnInputForm.controls.tktAddress)}}function nr(e,t){1&e&&o.Vb(0,"div",39)}function ir(e,t){if(1&e&&(o.ac(0,"div",129),o.ac(1,"p-panel",41),o.ac(2,"p-header",130),o.ac(3,"div",43),o.ac(4,"span",52),o.Tc(5),o.Zb(),o.Zb(),o.Zb(),o.ac(6,"b"),o.ac(7,"span",131),o.Tc(8),o.Zb(),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.addMeal),o.Cb(3),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.mealPopupMsg,"")}}function ar(e,t){1&e&&o.Vb(0,"div",39)}function sr(e,t){if(1&e&&(o.ac(0,"div",132),o.Vb(1,"app-i-ticket-input",133),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("iTicketDetailsDTOControl",e.addPsgnInputForm.controls.iTicketDetailsDTO)("regdAddress",null==e.journeyDetails?null:e.journeyDetails.itTicketDetailsDTO)("stateList",e.stateListSorted)}}function rr(e,t){1&e&&o.Vb(0,"div",39)}function lr(e,t){if(1&e&&(o.ac(0,"div",134),o.Vb(1,"app-gst-input",135),o.Vb(2,"app-control-messages",66),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("gstControl",e.addPsgnInputForm.controls.gstDetails),o.Cb(1),o.tc("control",e.addPsgnInputForm.controls.gstDetails.controls.gstIn)}}function or(e,t){1&e&&o.Vb(0,"div",39)}function cr(e,t){if(1&e&&(o.ac(0,"p-header",42),o.ac(1,"div",43),o.ac(2,"span",52),o.Tc(3),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.otherPre)}}function ur(e,t){if(1&e&&(o.ac(0,"div",143),o.Vb(1,"input",144),o.ac(2,"label",145),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg4)}}function gr(e,t){if(1&e&&(o.ac(0,"div",143),o.Vb(1,"input",146),o.ac(2,"label",147),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg5)}}function pr(e,t){if(1&e&&(o.ac(0,"div",150),o.ac(1,"label",94),o.Vb(2,"p-radioButton",151),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=t.$implicit;o.Cb(1),o.uc("for",e.label),o.Cb(1),o.uc("value",e.value),o.uc("id",e.label),o.Cb(1),o.Vc(" ",e.desc," ")}}function dr(e,t){if(1&e&&(o.ac(0,"div",148),o.ac(1,"div",49),o.ac(2,"div",143),o.ac(3,"label",23),o.Tc(4),o.Zb(),o.Zb(),o.Zb(),o.ac(5,"div",49),o.Rc(6,pr,4,4,"div",149),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.lapBookingChoice),o.Cb(2),o.tc("ngForOf",e.multiLapJourneyDetails.bookingChoice.options)}}function hr(e,t){if(1&e&&(o.ac(0,"div",150),o.ac(1,"label",94),o.Vb(2,"p-radioButton",152),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=t.$implicit;o.Cb(1),o.uc("for",e.label),o.Cb(1),o.uc("value",e.value),o.uc("id",e.label),o.Cb(1),o.Vc(" ",e.label," ")}}function br(e,t){if(1&e&&(o.ac(0,"div",148),o.ac(1,"div",49),o.ac(2,"div",143),o.ac(3,"label",23),o.Tc(4),o.Zb(),o.Zb(),o.Zb(),o.ac(5,"div",49),o.Rc(6,hr,4,4,"div",149),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.Cb(4),o.Uc(null==e.langService.lang?null:e.langService.lang.confirmBerthChoice),o.Cb(2),o.tc("ngForOf",e.cnfList)}}function mr(e,t){if(1&e&&(o.ac(0,"div",156),o.Vb(1,"p-dropdown",157),o.Vb(2,"app-control-messages",66),o.Zb()),2&e){const e=o.mc(),t=e.$implicit,n=e.index,i=o.mc(3);o.tc("formGroup",t),o.Cb(1),o.Pc(o.yc(5,_s)),o.tc("options",i.rsvnChoice[n]),o.Cb(1),o.tc("control",t.controls.reservationChoice)}}function fr(e,t){if(1&e&&(o.ac(0,"span",158),o.ac(1,"span"),o.Tc(2),o.Zb(),o.Zb()),2&e){const e=o.mc(4);o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.psgnIconTitle)}}function vr(e,t){if(1&e&&(o.ac(0,"div",153),o.Rc(1,mr,3,6,"div",154),o.Rc(2,fr,3,1,"span",155),o.Zb()),2&e){const e=t.index,n=o.mc(3);o.Cb(1),o.tc("ngIf",n.multiLapJourneyDetails.lapDetails[e].avlNotWL),o.Cb(1),o.tc("ngIf",n.multiLapJourneyDetails.lapDetails[e].avlNotWL)}}function yr(e,t){if(1&e&&(o.ac(0,"div",156),o.Vb(1,"input",159),o.Zb()),2&e){const e=o.mc(),t=e.$implicit,n=e.index,i=o.mc(3);o.tc("formGroup",t),o.Cb(1),o.wc("placeholder","",null==i.langService.lang?null:i.langService.lang.psgnInputPageMsg6," ",i.multiLapJourneyDetails.multilapBooking?"For Lap "+(n+1):"","")}}function Cr(e,t){if(1&e&&(o.ac(0,"div",153),o.Rc(1,yr,2,3,"div",154),o.Zb()),2&e){const e=t.index,n=o.mc(3);o.Cb(1),o.tc("ngIf",n.multiLapJourneyDetails.lapDetails[e].avlNotWL)}}function Sr(e,t){if(1&e&&(o.ac(0,"span"),o.ac(1,"div",139),o.Rc(2,ur,4,1,"div",140),o.Rc(3,gr,4,1,"div",140),o.Zb(),o.Rc(4,dr,7,2,"div",141),o.Rc(5,br,7,2,"div",141),o.ac(6,"div",49),o.ac(7,"div",49),o.Rc(8,vr,3,2,"div",142),o.Zb(),o.Rc(9,Cr,2,1,"div",142),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(2),o.tc("ngIf",e.multiLapJourneyDetails.autoUpgrade),o.Cb(1),o.tc("ngIf",!e.multiLapJourneyDetails.multilapBooking&&e.multiLapJourneyDetails.lapDetails[0].avlNotWL),o.Cb(1),o.tc("ngIf",null!=e.multiLapJourneyDetails.bookingChoice),o.Cb(1),o.tc("ngIf",e.multiLapJourneyDetails.multilapBooking),o.Cb(3),o.tc("ngForOf",e.addPsgnInputForm.get("lapAvlRequestDTO").controls),o.Cb(1),o.tc("ngForOf",e.addPsgnInputForm.get("lapAvlRequestDTO").controls)}}function Dr(e,t){if(1&e&&(o.ac(0,"div",160),o.ac(1,"div",60),o.ac(2,"strong"),o.Tc(3,"TYPE OF WARRANT "),o.Zb(),o.Zb(),o.ac(4,"div",161),o.ac(5,"label",162),o.Vb(6,"p-radioButton",163),o.Tc(7," FLP "),o.Zb(),o.Zb(),o.ac(8,"div",161),o.ac(9,"label",164),o.Vb(10,"p-radioButton",165),o.Tc(11," ADFLP "),o.Zb(),o.Zb(),o.ac(12,"div",161),o.ac(13,"label",166),o.Vb(14,"p-radioButton",167),o.Tc(15," Government Duty "),o.Zb(),o.Zb(),o.ac(16,"div",161),o.ac(17,"label",168),o.Vb(18,"p-radioButton",169),o.Tc(19," NONE "),o.Zb(),o.Zb(),o.ac(20,"div",117),o.Vb(21,"app-control-messages",66),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Cb(21),o.tc("control",e.addPsgnInputForm.controls.warrentType)}}function Tr(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc(2).index;o.Cb(1),o.Vc("For Lap ",e+1," ")}}function kr(e,t){if(1&e&&(o.ac(0,"div",175),o.ac(1,"label",94),o.Vb(2,"p-radioButton",179),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc(2).index,t=o.mc(2);o.Cb(1),o.vc("for","travelInsuranceOptedNo-",e,""),o.Cb(1),o.vc("id","travelInsuranceOptedNo-",e,""),o.vc("name","travelInsuranceOpted-",e,""),o.Cb(1),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.psgnInputPageMsg17," ")}}function Ir(e,t){if(1&e&&(o.ac(0,"div",171),o.ac(1,"div",172),o.ac(2,"strong"),o.Tc(3),o.Rc(4,Tr,2,1,"span",47),o.Zb(),o.ac(5,"span",173),o.Vb(6,"br"),o.Zb(),o.ac(7,"span",174),o.Tc(8),o.Zb(),o.Zb(),o.ac(9,"div",175),o.ac(10,"label",94),o.Vb(11,"p-radioButton",176),o.Tc(12),o.ac(13,"a",177),o.Tc(14),o.Zb(),o.Tc(15),o.Zb(),o.Zb(),o.Rc(16,kr,4,4,"div",178),o.ac(17,"div",117),o.Vb(18,"app-control-messages",66),o.Zb(),o.Zb()),2&e){const e=o.mc(),t=e.$implicit,n=e.index,i=o.mc(2);o.tc("formGroup",t),o.Cb(3),o.Vc("",null==i.langService.lang?null:i.langService.lang.travelInsurance," "),o.Cb(1),o.tc("ngIf",i.multiLapJourneyDetails.multilapBooking),o.Cb(4),o.Uc(i.multiLapJourneyDetails.lapDetails[n].avlDetails.bkgCfg.travelInsuranceFareMsg),o.Cb(2),o.vc("for","travelInsuranceOptedYes-",n,""),o.Cb(1),o.vc("id","travelInsuranceOptedYes-",n,""),o.vc("name","travelInsuranceOpted-",n,""),o.Cb(1),o.Wc(" ",null==i.langService.lang?null:i.langService.lang.psgnInputPageMsg14," ",null==i.langService.lang?null:i.langService.lang.psgnInputpageMsg31,""),o.Cb(1),o.wc("href","http://contents.irctc.co.in/",i.langService.langChoice,"/",1==i.multiLapJourneyDetails.lapDetails[n].trainOwner?"IRCTC_Trains_Insurance_TnC.pdf":"InsuranceTermCondition.pdf","",o.Mc),o.Cb(1),o.Vc(" ",null==i.langService.lang?null:i.langService.lang.psgnInputPageMsg15,""),o.Cb(1),o.Vc(" ",null==i.langService.lang?null:i.langService.lang.psgnInputPageMsg29," "),o.Cb(1),o.tc("ngIf",i.multiLapJourneyDetails.lapDetails[n].travelInsuranceValue>0),o.Cb(2),o.tc("control",t.controls.travelInsuranceOpted)}}function Or(e,t){if(1&e&&(o.ac(0,"div",49),o.Rc(1,Ir,19,15,"div",170),o.Zb()),2&e){const e=t.index,n=o.mc(2);o.Cb(1),o.tc("ngIf","true"==n.multiLapJourneyDetails.lapDetails[e].avlDetails.bkgCfg.travelInsuranceEnabled&&(n.multiLapJourneyDetails.lapDetails[e].avlNotWL||n.multiLapJourneyDetails.lapDetails[e].racNotWL||0==n.multiLapJourneyDetails.lapDetails[e].travelInsuranceValue))}}function xr(e,t){if(1&e&&(o.ac(0,"p-panel",41),o.Rc(1,cr,4,1,"p-header",136),o.Rc(2,Sr,10,6,"span",47),o.Rc(3,Dr,22,1,"div",137),o.Rc(4,Or,2,1,"div",138),o.Zb()),2&e){const e=o.mc();o.Pc(o.yc(7,er)),o.tc("toggleable",!0),o.Cb(1),o.tc("ngIf",!e.multiLapJourneyDetails.nosbBooking),o.Cb(1),o.tc("ngIf",!e.multiLapJourneyDetails.nosbBooking&&"true"!=e.multiLapJourneyDetails.beyondArpBooking),o.Cb(1),o.tc("ngIf",!e.multiLapJourneyDetails.nosbBooking&&"true"==e.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.pmfInputEnable),o.Cb(1),o.tc("ngForOf",e.addPsgnInputForm.get("lapAvlRequestDTO").controls)}}function Ar(e,t){if(1&e&&(o.ac(0,"span",186),o.Tc(1),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.Uc(null==e.langService.errorMsg?null:e.langService.errorMsg.passengerInputErr34)}}function Mr(e,t){if(1&e&&(o.ac(0,"tr",182),o.ac(1,"label",94),o.Vb(2,"p-radioButton",183),o.Tc(3),o.Zb(),o.Vb(4,"br"),o.ac(5,"span",184),o.Tc(6),o.Zb(),o.Vb(7,"br"),o.Rc(8,Ar,2,1,"span",185),o.Zb()),2&e){const e=t.$implicit,n=o.mc(2);o.Cb(1),o.uc("for",e.value),o.Cb(1),o.uc("value",e.value),o.uc("id",e.value),o.Cb(1),o.Vc(" ",e.label," "),o.Cb(3),o.Uc(e.desc),o.Cb(2),o.tc("ngIf",n.preventBhim&&2==e.value)}}function Zr(e,t){if(1&e&&(o.ac(0,"div",48),o.ac(1,"p-panel",41),o.ac(2,"p-header",42),o.ac(3,"div",43),o.ac(4,"span",52),o.Tc(5),o.Zb(),o.Zb(),o.Zb(),o.ac(6,"table",180),o.Rc(7,Mr,9,6,"tr",181),o.Zb(),o.Vb(8,"div",84),o.Vb(9,"app-control-messages",66),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Pc(o.yc(6,er)),o.tc("toggleable",!0),o.Cb(4),o.Uc(e.multiLapJourneyDetails.paymentOption.header),o.Cb(2),o.tc("ngForOf",e.paymentOption),o.Cb(2),o.tc("control",e.addPsgnInputForm.controls.paymentType)}}function wr(e,t){1&e&&o.Vb(0,"div",39)}function Lr(e,t){if(1&e&&(o.ac(0,"div",187),o.Vb(1,"input",188),o.ac(2,"label",189),o.Tc(3),o.ac(4,"a",177),o.Tc(5),o.Zb(),o.Tc(6),o.Zb(),o.Vb(7,"app-control-messages",66),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.Vc("",null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg30," "),o.Cb(1),o.wc("href","http://contents.irctc.co.in/",e.langService.langChoice,"/",e.ftTCURL,"",o.Mc),o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg15),o.Cb(1),o.Vc(" ",null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg16," "),o.Cb(1),o.tc("control",e.addPsgnInputForm.controls.ftTnCAgree)}}function Nr(e,t){if(1&e&&(o.ac(0,"div",117),o.Vb(1,"input",190),o.ac(2,"label",191),o.Tc(3),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(3),o.Uc(null==e.langService.lang?null:e.langService.lang.psgnInputPageMsg7)}}function Rr(e,t){if(1&e){const e=o.bc();o.ac(0,"div",21),o.ac(1,"span",194),o.ac(2,"input",195),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc(2).securityAnswer=t})),o.Zb(),o.Zb(),o.ac(3,"button",196),o.ic("click",(function(){return o.Kc(e),o.mc(2).answer("")})),o.Tc(4),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(2),o.tc("ngModel",e.securityAnswer),o.Cb(2),o.Uc(null==e.langService.lang?null:e.langService.lang.submit)}}function Pr(e,t){if(1&e){const e=o.bc();o.ac(0,"div",198),o.ac(1,"button",199),o.ic("click",(function(){o.Kc(e);const n=t.$implicit;return o.mc(3).answer(n.value)})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=t.$implicit,n=t.index;o.Cb(1),o.Kb("btn btn-primary ",n%2==0?"pull-right":"pull-left",""),o.Cb(1),o.Uc(e.label)}}function Br(e,t){if(1&e&&(o.ac(0,"div"),o.Rc(1,Pr,3,4,"div",197),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.tc("ngForOf",e.secQ.options)}}const Er=function(){return{width:"650px"}};function Fr(e,t){if(1&e){const e=o.bc();o.ac(0,"p-dialog",192),o.ic("visibleChange",(function(t){return o.Kc(e),o.mc().showSecQ=t})),o.ac(1,"p"),o.Tc(2),o.Zb(),o.Rc(3,Rr,5,2,"div",193),o.Rc(4,Br,2,1,"div",47),o.Zb()}if(2&e){const e=o.mc();o.Pc(o.yc(8,Er)),o.uc("header",null==e.langService.lang?null:e.langService.lang.securityQuestion),o.tc("visible",e.showSecQ)("closable",!1),o.Cb(2),o.Vc(" ",e.secQ.header," "),o.Cb(1),o.tc("ngIf",e.ansInputType),o.Cb(1),o.tc("ngIf",!e.ansInputType)}}const jr=function(){return{height:"0px"}};let Vr=(()=>{class e{constructor(e,t,n,i,a,s,r,l,o,c,u,g,p,d){this.router=e,this.fb=t,this.rollesPipe=n,this.langService=i,this.userService=a,this.store=s,this.commonService=r,this.bookingService=l,this.confirmationService=o,this.webService=c,this.ga=u,this.messageService=g,this.datePipe=p,this._location=d,this.showMasterPassengers=!1,this.masterPassengersFetched=!1,this.ansInputType=!1,this.otpBooking=!1,this.reReq=!0,this.twoSSEligible=!1,this.mpUser=!0,this.seqDone=!1,this.passportDone=!1,this.garibRathDone=!1,this.bedRollDone=!0,this.foodMsgDone=!1,this.garibRathMsg=!1,this.retJrny=!1,this.reloadnlpcaptcha=!0,this.ftBooking=!1,this.userResponse=null,this.psgnGroupArray=[],this.infantGroupArray=[],this.addMealInputControl=[],this.stateListSorted=[],this.ok="OK",this.cancel="Cancel",this.securityAnswer="",this.emailId="",this.lastConcCardDtls={},this.lastPassDtls={},this.initialPassengersCount=0,this.maxPassengersToSelect=0,this.totalFare=0,this.singleDayAvlEnqDtls={},this.avlRequestDTO=new Fe.a,this.msgsSeniorCitizenApplicable=[],this.msgsConcessionBooking=[],this.msgsBedRollFlagEnabled=[],this.msgsRedeemTicket=[],this.jrnyDetailSidebar=!1,this.nameAgeGenderReadOnly=!1,this.isPaymentTypeEnable=!1,this.itkt=!1,this.address=!1,this.adIdPT="div-gpt-ad-1548238235480-0",this.adIdPB="div-gpt-ad-1548235209183-0",this.adIdRM="div-gpt-ad-1595846335546-0",this.ftTCURL="FtTermCondition.pdf",this.insuranceUrl="InsuranceTermCondition.pdf",this.preventBhim=!1,this.charCount=0,this.rsvnChoice=[],this.page="psgn-input",this.mealChoiceEnable=!1,this.selectedMeal=new Array,this.isMobile=!1,this.maxPassengers=10,this.bonafideMessage=!1,this.mobileLength=10,this.loyalityOperation=[{value:1,labels:"accural"},{value:2,labels:"redemption"},{value:3,labels:"skip"}],this.lastLoyalityChacked=this.loyalityOperation[this.loyalityOperation.length-1],this.fetchedLoyalityData={},this.softPsgn=null,this.editablePsgnForSoftBank=["101","106"],this.adIdPT=this.userService.getAdsRandomId(),this.adIdPB=this.userService.getAdsRandomId(),this.adIdRM=this.userService.getAdsRandomId(),this.charCount=1e4,this.testUserAgent()}ngOnInit(){if(this.userResponse=this.userService.userResponse,console.log("UserResponse : "+this.userResponse),this.mpUser=1==this.userService.userResponse.rolles[this.rollesPipe.transform("MP_USER")-1],this.jdSub=this.store.select(r.j).subscribe(e=>{null!=e&&(this.multiLapJourneyDetails=e,this.multiLapJourneyDetails.lapDetails.forEach(e=>{this.ftBooking=this.ftBooking||"FT"==e.quotaCode,this.twoSSEligible||"2S"==e.classCode||"FC"==e.classCode||"CC"==e.classCode||"1A"==e.classCode||"EC"==e.classCode||(this.twoSSEligible=!0),null!=e.avlDetails.bkgCfg.informationMessageDTO&&null!=e.avlDetails.bkgCfg.informationMessageDTO&&(Array.isArray(e.avlDetails.bkgCfg.informationMessageDTO)?e.avlDetails.bkgCfg.informationMessageDTO:Array.of(e.avlDetails.bkgCfg.informationMessageDTO)).forEach(e=>{"FOOD_ALERT_LABEL"==e.paramName&&(this.foodChoiceMsgConfirm=e),"NON_VEG_SELECTION"==e.paramName&&(this.nonVegSelectionMsg=e)})}),this.initData(),this.conName=this.multiLapJourneyDetails.conName,this.secQ=e.boardingData.secQ,this.mealChoiceEnable="true"==e.boardingData.mealChoiceenable,this.mealChoiceEnable&&(this.mealDtls=JSON.parse(JSON.stringify(e.boardingData.mealDetailsDTO)),this.mealDtls=Array.isArray(this.mealDtls)?this.mealDtls:Array.of(this.mealDtls)))}),this.isdCode="0"==this.userResponse.isdCode&&94==this.userResponse.countryId?"91":this.userResponse.isdCode,"0"!=this.isdCode&&"91"!=this.isdCode&&(this.mobileLength=12),this.otpBooking=4==this.userResponse.otpLogin,this.SELECT_MASTER_LIST=1==this.userService.userResponse.rolles[this.rollesPipe.transform("SELECT_MASTER_LIST")-1],this.bookingService.reCaptcha=1,this.conName=this.multiLapJourneyDetails.conName,this.isPaymentTypeEnable=!(null==this.multiLapJourneyDetails.paymentOption||null==this.multiLapJourneyDetails.paymentOption||this.multiLapJourneyDetails.loyaltyRedemptionBooking),this.loginSub=this.store.select(r.a).pipe(Object(Ui.a)(1)).subscribe(e=>{void 0===e?console.log("PassengerInputComponent >> Access Token not found......."):(console.log("PassengerInputComponent >> AccessToken1 = "+e),this.acc_token=e)}),this.psgnGroupArray.push(this.initPassenger()),this.addPsgnInputForm=this.fb.group({wsUserLogin:[this.userResponse.userName],moreThanOneDay:[!1],clientTransactionId:[this.multiLapJourneyDetails.clientTxnId],boardingStation:[this.multiLapJourneyDetails.boardingStation],reservationUptoStation:[this.multiLapJourneyDetails.upToStation],mobileNumber:[this.userResponse.mobile,"91"==this.isdCode||"0"==this.isdCode?[Wi.validateMobileNo]:[Wi.validateInternationlMobileNo]],ticketType:[this.multiLapJourneyDetails.ticketType],mainJourneyTxnId:[this.multiLapJourneyDetails.mainJourneyTxnId],clusterFlag:["N"],onwardFlag:["N"],mainJourneyPnr:[this.multiLapJourneyDetails.mainJourneyPnr],cod:["false"],reservationMode:["WS_TA_B2C"],captcha:[null],generalistChildConfirm:[!1],ftBooking:[this.multiLapJourneyDetails.ftBooking],loyaltyRedemptionBooking:[this.multiLapJourneyDetails.loyaltyRedemptionBooking],loyaltyBankId:[this.multiLapJourneyDetails.loyaltyBankId],loyaltyNumber:[this.multiLapJourneyDetails.loyaltyNumber],nosbBooking:[this.multiLapJourneyDetails.nosbBooking],warrentType:[0,"true"===this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.pmfInputEnable?Wi.validatetWarrantType("true"===this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.pmfInputMandatory):null],ftTnCAgree:[!1,this.ftBooking?[Wi.validateFtTnCAgree]:null],bookingChoice:[1],bookingConfirmChoice:[1],autoUpgradationSelected:[!1],bookOnlyIfCnf:[!1],returnJourney:[this.multiLapJourneyDetails.returnJourney],connectingJourney:["CONNECTING"==this.multiLapJourneyDetails.journeyType||"RTPR"==this.multiLapJourneyDetails.journeyType],paymentType:[this.isPaymentTypeEnable?this.multiLapJourneyDetails.paymentOption.defaultValue:1]}),this.addPsgnInputForm.addControl("lapAvlRequestDTO",this.fb.array(this.initLapDetails())),this.charCount=this.charCount+this.userResponse.mobile.length,this.multiLapJourneyDetails.gstDetailInputFlag){const e=this.fb.group({gstIn:[null,[Wi.validateGstIn(this.multiLapJourneyDetails.gstinPattern)]],nameOnGst:[null],flat:[null],street:[null],area:[null],pin:[null],state:[null],city:[null],error:[null]});this.addPsgnInputForm.addControl("gstDetails",e)}if(this.itkt="U"===this.multiLapJourneyDetails.ticketType&&null!=this.multiLapJourneyDetails.itTicketDetailsDTO,this.address=this.multiLapJourneyDetails.captureAddress>0,console.log("Ticket Type ====== "+this.multiLapJourneyDetails.ticketType),this.itkt){const e=this.fb.group({addressFlag:[],address:[null],street:[null],colony:[null],city:[""],stateName:[""],pinCode:[null],phoneNumber:[null],validRegdAddress:[!0]});this.addPsgnInputForm.addControl("iTicketDetailsDTO",e);for(let t of this.multiLapJourneyDetails.addressDTO.stateList)this.stateListSorted.push(t.toString());this.stateListSorted.sort((e,t)=>e<t?-1:1)}if(this.address){const e=this.fb.group({address:[""],street:[""],colony:[""],city:[""],stateName:[""],pinCode:[null],postOffice:[""]});this.addPsgnInputForm.addControl("tktAddress",e)}console.log("Initial passengers : "+JSON.stringify(this.commonService.initialPassengers));for(let t=1;(null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers[0]&&t<this.commonService.initialPassengers[0].length||t<this.multiLapJourneyDetails.numberOfPsgns)&&t<(this.multiLapJourneyDetails.ssAvl?2:this.maxPassengers);t++)this.psgnGroupArray.push(this.initPassenger());if(null!=this.commonService.initialPassengers&&null!=this.commonService.initialPassengers[0]&&this.commonService.initialPassengers[0].length>0&&(this.commonService.initialPassengers=JSON.parse(JSON.stringify(this.commonService.initialPassengers)),this.psgnGroupArray.forEach((e,t)=>{e.value.passenger.controls.forEach((e,n)=>{var i,a;this.multiLapJourneyDetails.acuralBookingFlag&&this.editablePsgnForSoftBank.includes(null===(a=null===(i=this.commonService)||void 0===i?void 0:i.addPsgnInputFormValue)||void 0===a?void 0:a.loyaltyBankId)&&(this.commonService.initialPassengers[n][t].softMemberFlag=!1,this.commonService.initialPassengers[n][t].softMemberId=null),e.patchValue(this.commonService.initialPassengers[n][t]),this.charCount=this.charCount+e.value.passengerName.length})}),console.log("this.charCount = "+this.charCount)),this.multiLapJourneyDetails.numberOfInfants>0)for(let t=0;t<this.multiLapJourneyDetails.numberOfInfants&&t<this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.maxInfants;t++){const e=this.initInfant();this.infantGroupArray.push(e)}this.countrySub=this.bookingService.getCountryList().subscribe(e=>{this.countryList=e}),(94!=this.userResponse.countryId||this.ftBooking)&&this.userResponse.mobile&&this.userResponse.mobile.length>0&&this.addPsgnInputForm.controls.mobileNumber.reset({value:this.userResponse.mobile,disabled:!0}),this.commonService.backToPsgnInput&&(this.commonService.backToPsgnInput=!1,this.multiLapJourneyDetails.nosbBooking||this.addPsgnInputForm.patchValue(this.commonService.addPsgnInputFormValue),this.secQ=void 0,this.seqDone=!0,this.charCount=1e6),this.emailId=this.userResponse.email,this.nameAgeGenderReadOnly=this.multiLapJourneyDetails.nameAgeGenderReadOnly,Object(s.a)(300).subscribe(()=>{var e;null===(e=this.savedPassengerList)||void 0===e||e.nativeElement.focus()}),this.labelSub=this.store.select(r.m).subscribe(e=>{null!=e&&null!=e&&this.initRsvnChoice()}),this.psgnStateSub=this.store.select(r.v).subscribe(e=>{e&&e.psgnList&&0!==e.psgnList.length&&(console.log("resp: "+e),this.retJrny=!0)}),this.mpUser&&null!=this.commonService.initialPassengers&&0==this.commonService.initialPassengers.length&&this.addCompanionForMP(),this.softAccountSummaryDTO=this.userService.loyaltyBankDetails();let e=!1;for(const t of this.softAccountSummaryDTO)if(1==t.loyaltyAccrualBookingAllowed){e=t.loyaltyAccrualBookingAllowed;break}this.loyalityInputForm=this.fb.group({choice:[e?1:3],bank:[""],selectedBank:[null],bankName:[null]})}ngAfterViewInit(){if(window.scroll({top:0,left:0,behavior:"smooth"}),this.masterPsgnSub=this.store.select(r.s).subscribe(e=>{null!=e&&(this.masterList=e)}),this.paymentOption=this.multiLapJourneyDetails.paymentOption.options,this.cnfList=[],this.multiLapJourneyDetails.lapDetails.length>1&&(this.multiLapJourneyDetails.lapDetails[0].avlNotWL&&this.multiLapJourneyDetails.lapDetails[1].avlNotWL&&this.cnfList.push({label:this.langService.lang.allLap,value:1}),this.multiLapJourneyDetails.lapDetails[0].avlNotWL&&this.cnfList.push({label:this.langService.lang.lap1,value:2}),this.multiLapJourneyDetails.lapDetails[1].avlNotWL&&this.cnfList.push({label:this.langService.lang.lap2,value:3}),(this.multiLapJourneyDetails.lapDetails[0].avlNotWL||this.multiLapJourneyDetails.lapDetails[1].avlNotWL)&&this.cnfList.push({label:this.langService.lang.anyLap,value:4}),this.cnfList.push({label:this.langService.lang.none,value:0})),this.langService.isAdsEnable&&this.displayAds("/37179215/GPT_NWEB_PASSENGER_TOP","/37179215/GPT_NWEB_PASSENGER_BOTTOM","/37179215/GPT_NWEB_PASSENGER_RIGHT1"),this.loyalityOperation=[..."RTPR"!=this.multiLapJourneyDetails.journeyType?[{value:1,labels:"accural"}]:[],{value:2,labels:"redemption"},{value:3,labels:"skip"}],this.multiLapJourneyDetails.loyalityInputForm){this.loyalityInputForm.patchValue(this.multiLapJourneyDetails.loyalityInputForm),this.loyalityInputForm.patchValue({selectedBank:null,bank:null});let e=this.multiLapJourneyDetails.loyalityInputForm.selectedBank;this.softAccountSummaryDTO.forEach(t=>{t.bankId==e.bankId&&(e=t,console.log("data is matched for bankID: "+t.bankId))}),1==this.multiLapJourneyDetails.loyalityInputForm.choice&&(this.paymentOption=[this.multiLapJourneyDetails.paymentOption.options[0]],this.avlRequestDTO.bankId=e.bankId),setTimeout(()=>{this.loyalityInputForm.patchValue({selectedBank:null,bank:e}),this.loyalityBankSelect(e,!1),this.softAcSumDtoSelected=e},500),this.fetchedLoyalityData=JSON.parse(JSON.stringify(this.multiLapJourneyDetails.fetchedLoyalityData))}}ngOnDestroy(){this.store.dispatch(new l.C(null)),this.jdSub.unsubscribe(),this.loginSub.unsubscribe(),null!=this.countrySub&&this.countrySub.unsubscribe(),this.labelSub.unsubscribe(),null!=this.masterPsgnSub&&this.masterPsgnSub.unsubscribe(),this.langService.isAdsEnable&&googletag.destroySlots(),null!=this.psgnStateSub&&this.psgnStateSub.unsubscribe()}initRsvnChoice(){this.rsvnChoice=[];let e=this.multiLapJourneyDetails.multilapBooking;this.multiLapJourneyDetails.lapDetails.forEach((t,n)=>{var i,a,s,r,l;let o=[];this.rsvnChoice.push(o),o.push({label:(null===(i=this.langService.lang)||void 0===i?void 0:i.psgnInputPageMsg9)+(e?` ${null===(a=this.langService.lang)||void 0===a?void 0:a.forLap} ${n+1}`:""),value:99}),this.psgnGroupArray.length>1&&o.push({label:null===(s=this.langService.lang)||void 0===s?void 0:s.psgnInputPageMsg10,value:1}),"true"==t.avlDetails.bkgCfg.lowerBerthApplicable&&(o.push({label:null===(r=this.langService.lang)||void 0===r?void 0:r.psgnInputPageMsg11,value:2}),this.psgnGroupArray.length>1&&o.push({label:null===(l=this.langService.lang)||void 0===l?void 0:l.psgnInputPageMsg12,value:3}))})}testUserAgent(){[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{let t=navigator.userAgent.match(e);return this.isMobile=this.isMobile||null!=t,t})}initData(){this.msgsSeniorCitizenApplicable=[],this.msgsConcessionBooking=[],this.msgsBedRollFlagEnabled=[],this.msgsRedeemTicket=[],this.totalFare=0,this.multiLapJourneyDetails.lapDetails.forEach((e,t)=>{if(this.mpUser&&"PH"===e.quotaCode){let t=0;null!=this.commonService.initialPassengers&&(t=this.commonService.initialPassengers[0].length),null!=e.avlDetails.bkgCfg.concessionalPassengerType&&(t+=(Array.isArray(e.avlDetails.bkgCfg.concessionalPassengerType)?e.avlDetails.bkgCfg.concessionalPassengerType:Array.of(e.avlDetails.bkgCfg.concessionalPassengerType)).length),this.maxPassengers>t&&(this.maxPassengers=t)}else this.maxPassengers>e.avlDetails.bkgCfg.maxPassengers&&(this.maxPassengers=e.avlDetails.bkgCfg.maxPassengers);"true"!==e.avlDetails.bkgCfg.seniorCitizenApplicable&&(this.msgsSeniorCitizenApplicable[t]=this.langService.errorMsg.passengerInputErr1),"HP"===e.quotaCode&&(this.msgsConcessionBooking[t]=this.langService.errorMsg.passengerInputErr2),"true"===e.avlDetails.bkgCfg.bedRollFlagEnabled&&(this.msgsBedRollFlagEnabled[t]=this.langService.errorMsg.passengerInputErr3),Object(Gi.isArray)(e.trainType)&&e.trainType.forEach(t=>{"G"===t&&(this.garibRathMsg="HP"===e.quotaCode)}),this.totalFare=this.totalFare+parseFloat(e.avlDetails.totalCollectibleAmount)}),this.totalFare=Math.round(100*this.totalFare)/100,this.multiLapJourneyDetails.loyaltyRedemptionBooking&&this.msgsRedeemTicket.push({severity:"info",detail:this.langService.errorMsg.inforedeemTktWithNonLoginUser}),1==this.multiLapJourneyDetails.lapDetails[0].trainOwner?(this.ftTCURL="IRCTC_Trains_FT_TnC.pdf",this.insuranceUrl="IRCTC_Trains_Insurance_TnC.pdf"):(this.ftTCURL="FtTermCondition.pdf",this.insuranceUrl="InsuranceTermCondition.pdf")}buttonClick(){this.isPaymentTypeEnable&&this.paymentOption.length>0&&Wi.validatetPaymentType();let e=!1,t=[!1,!1],n=[!1,!1],i=[!1,!1],a=[!1,!1],r=[!1,!1],l=!1,o=!1,c=!1,u=!1,g=!1,p=null;this.lowerBerthCount=[0,0],this.commonService.addPsgnInputFormValue=this.addPsgnInputForm.value;let d=0;console.log("Form valid = "+this.addPsgnInputForm.valid),this.addPsgnInputForm.valid||(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr4}),e=!0,this.markFormGroupTouched(this.addPsgnInputForm)),this.psgnGroupArray.length<1&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr35}),e=!0,this.markFormGroupTouched(this.addPsgnInputForm));let h=0,b=JSON.parse(JSON.stringify(this.addPsgnInputForm.value));Object.assign(this.avlRequestDTO,b),this.commonService.selectedMealDetails=[];let m=this.loyalityInputForm.value;if(1==m.choice){let t=null;(null==m.selectedBank||b.loyaltyBankId!=m.selectedBank.bankId)&&(t=this.langService.lang.accuralSelected),t&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:t}),e=!0,this.markFormGroupTouched(this.addPsgnInputForm))}this.avlRequestDTO.lapAvlRequestDTO.forEach(e=>{this.mealChoiceEnable&&this.mealDtls.forEach((t,n)=>{if(e.trainNo==t.trainNo){this.chooseSelectedMeal(this.addMealInputControl[n].value.mealDtlsArr),e.addMealDetail=this.selectedMeal;let t=new Object;t.trainNo=e.trainNo,t.mealDtlsArr=this.addMealInputControl[n].value.mealDtlsArr,this.commonService.selectedMealDetails.push(t)}}),e.concessionBooking=!1}),this.numberOfPassengers=0;let f=null;if(this.psgnGroupArray.forEach((s,m)=>{let v;this.numberOfPassengers=m+1,s.controls.passenger.value.controls.forEach((s,y)=>{s.valid||(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr4}),e=!0,this.markFormGroupTouched(s));let C=s.value,S=this.multiLapJourneyDetails.lapDetails[y],D=this.avlRequestDTO.lapAvlRequestDTO[y];if(null==D.passengerList&&(D.passengerList=[]),D.passengerList.push(C),0==y?v=C:(C.passengerSerialNumber=v.passengerSerialNumber,C.passengerName=v.passengerName,C.passengerAge=v.passengerAge,C.passengerGender=v.passengerGender,C.passengerNationality=v.passengerNationality,C.passengerCardType=v.passengerCardType,C.passengerCardNumber=v.passengerCardNumber,C.masterPsgnId=v.masterPsgnId),C.passengerSerialNumber=m+1,C.passengerName&&("object"==typeof C.passengerName&&(C.passengerName=C.passengerName.masterPassengerName),C.passengerName=C.passengerName.trim(),null!=C.masterPsgnId&&null!=C.masterPsgnId||0!=y||(h+=C.passengerName.length)),this.editablePsgnForSoftBank.includes(b.loyaltyBankId)&&(C.softMemberId=b.loyaltyNumber,C.softMemberFlag=!0),"NC"==C.passengerBerthChoice&&(C.passengerBerthChoice=""),"LB"!=C.passengerBerthChoice&&"SL"!=C.passengerBerthChoice||this.lowerBerthCount[y]++,"true"!=S.avlDetails.bkgCfg.seniorCitizenApplicable||S.avlDetails.bkgCfg.concessionBooking&&"GENERAL"!=C.psgnConcType||"IN"!=C.passengerNationality||null!=C.passUPN&&null!=C.passUPN||this.mpPsgnPresent(C)||("M"===C.passengerGender&&Number(C.passengerAge)>=S.avlDetails.bkgCfg.srctznAge||"F"===C.passengerGender&&Number(C.passengerAge)>=S.avlDetails.bkgCfg.srctnwAge||"T"===C.passengerGender&&Number(C.passengerAge)>=S.avlDetails.bkgCfg.srctzTAge?(1==C.passengerSrCtznConcession?(o=!0,C.concessionOpted=!0):2==C.passengerSrCtznConcession?(c=!0,C.concessionOpted=!0,C.forGoConcessionOpted=!0):3==C.passengerSrCtznConcession?(u=!0,C.concessionOpted=!1,C.forGoConcessionOpted=!1):(e=!0,this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr5+" "+C.passengerSerialNumber})),console.log(`${C.concessionOpted} :::: ${C.forGoConcessionOpted}`)):void 0!==C.passengerSrCtznConcession&&""!==C.passengerSrCtznConcession.toString()&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr6+""+C.passengerSerialNumber}),e=!0)),"true"!=S.avlDetails.bkgCfg.bedRollFlagEnabled?C.passengerBedrollChoice=null:null!=C.passengerBedrollChoice&&"true"==C.passengerBedrollChoice.toString()&&(g=!0),"true"!=S.avlDetails.bkgCfg.foodChoiceEnabled?C.passengerFoodChoice=null:S.avlDetails.bkgCfg.foodDetails.includes(C.passengerFoodChoice)||(f="FOOD_"+m,null==S.avlDetails.bkgCfg.informationMessageDTO||null==S.avlDetails.bkgCfg.informationMessageDTO)||(Array.isArray(S.avlDetails.bkgCfg.informationMessageDTO)?S.avlDetails.bkgCfg.informationMessageDTO:Array.of(S.avlDetails.bkgCfg.informationMessageDTO)).forEach(e=>{"FOOD_ALERT"==e.paramName&&(p=e)}),"M"===C.passengerGender&&C.passengerAge>=60||"F"===C.passengerGender&&C.passengerAge>=45||(this.twoSSEligible=!1),null==C.childBerthFlag&&(C.childBerthFlag=!0),"IN"!==C.passengerNationality&&S.avlDetails.bkgCfg.bonafideCountryList.indexOf(C.passengerNationality)<0&&""!==C.passengerNationality?null==C.passengerCardNumber||""===C.passengerCardNumber.trim()?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr7+" "+C.passengerSerialNumber}),e=!0):(C.passengerCardNumber=C.passengerCardNumber.trim().toLocaleUpperCase(),C.passengerCardType="PASSPORT",C.passengerIcardFlag=!0,l=!0):void 0!==C.passengerCardType&&"NULL_IDCARD"!==C.passengerCardType?(void 0!==C.passengerCardNumber&&""!==C.passengerCardNumber.trim()||"UNIQUE_ICARD"!=C.passengerCardType&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr8+" "+C.passengerSerialNumber}),e=!0),void 0===C.passengerCardNumber?C.passengerCardNumber="":null!=C.passengerCardNumber&&(C.passengerCardNumber=C.passengerCardNumber.trim().toLocaleUpperCase(),C.passengerIcardFlag=!0)):(C.passengerCardType="NULL_IDCARD",C.passengerIcardFlag=!1,C.passengerCardNumber=null,null!=C.passengerCardTypeMaster&&"NULL_IDCARD"!=C.passengerCardTypeMaster&&(C.passengerCardType=C.passengerCardTypeMaster,C.passengerIcardFlag=!0,null!=C.passengerCardNumberMaster&&null!=C.passengerCardNumberMaster&&""!=C.passengerCardNumberMaster.trim()&&(C.passengerCardNumber=C.passengerCardNumberMaster))),S.avlDetails.bkgCfg.concessionBooking||this.mpUser&&("PH"===S.avlDetails.quota||"GN"===S.avlDetails.quota&&!this.multiLapJourneyDetails.lapDetails[0].ssAvl))if("IN"!==C.passengerNationality&&!this.mpUser||this.multiLapJourneyDetails.nosbBooking)C.psgnConcType="GENERAL";else if(null==C.psgnConcType||"0"===C.psgnConcType)this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr9+" "+C.passengerSerialNumber}),e=!0;else if("GENERAL"!==C.psgnConcType){if("IN"===C.passengerNationality||this.mpUser||(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr10+" "+C.passengerSerialNumber}),e=!0),null!==C.psgnConcCardId&&""!==C.psgnConcCardId||(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr11+" "+C.passengerSerialNumber}),e=!0),null!=C.psgnConcDOBP||"MPSPOS"==C.psgnConcType&&"EXCOMP"!==C.psgnConcType.value&&"MPCOMP"!==C.psgnConcType.value){let e=new Date(C.psgnConcDOBP);C.psgnConcDOB=e.getFullYear()+""+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+(e.getDate()<10?"0"+e.getDate():e.getDate()),console.log("p.psgnConcDOB new : "+C.psgnConcDOB),"NaNNaNNaN"==C.psgnConcDOB&&"MPSPOS"==C.psgnConcType&&(C.psgnConcDOB=null)}else this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr12+" "+C.passengerSerialNumber}),e=!0;if(null==C.psgnConcCardExpiryDateP)this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr13+" "+C.passengerSerialNumber}),e=!0;else{let e=new Date(C.psgnConcCardExpiryDateP);C.psgnConcCardExpiryDate=e.getFullYear()+""+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+(e.getDate()<10?"0"+e.getDate():e.getDate())}C.concessionOpted&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr14+" "+C.passengerSerialNumber}),e=!0),"ESCORT"!==C.psgnConcType||C.passengerIcardFlag||(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr15+" "+C.passengerSerialNumber}),e=!0),"PRESCH"===C.psgnConcType&&(r[y]=!0),"HANDICAP"===C.psgnConcType&&(t[y]=!0),"ESCORT"===C.psgnConcType&&(n[y]=!0),t||n||(C.childBerthFlag=!0),t||n||(i[y]=!0),D.concessionBooking=!0,this.mpUser&&!S.avlDetails.bkgCfg.concessionBooking&&(D.concessionBooking=!1)}else a[y]=!0,C.psgnConcCardId=null,C.psgnConcDOB=null,C.psgnConcCardExpiryDate=null;else C.psgnConcType=null,C.psgnConcCardId=null,C.psgnConcDOB=null,C.psgnConcCardExpiryDate=null;"FT"!=S.quotaCode&&"IN"==C.passengerNationality||(null==C.psgnConcDOBP||null==C.psgnConcDOBP?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr12+" "+C.passengerSerialNumber}),e=!0):C.psgnConcDOB=this.datePipe.transform(new Date(C.psgnConcDOBP),"yyyyMMdd")),"PB"===this.userService.quota?null==C.passUPN&&null==C.passUPN||null==C.passBookingCode&&null==C.passBookingCode||d++:(C.passUPN=null,C.passBookingCode=null)})}),this.infantGroupArray.forEach((e,t)=>{let n=e.value;n.infantSerialNumber=t+1,h+=n.name.length,this.avlRequestDTO.lapAvlRequestDTO.forEach(e=>{null==e.infantList&&(e.infantList=[]),e.infantList.push(n)})}),console.log(this.avlRequestDTO),"PB"===this.userService.quota&&d<1&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passUpnReq}),e=!0),this.twoSSEligible&&2!=this.numberOfPassengers&&(this.twoSSEligible=!1),this.preventBhim&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr33}),e=!0),this.multiLapJourneyDetails.lapDetails.forEach((s,l)=>{e||(s.avlDetails.bkgCfg.concessionBooking&&("HP"==s.quotaCode&&(i[l]||a[l])&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr16}),e=!0),n[l]&&!t[l]&&(null==this.avlRequestDTO.lapAvlRequestDTO[l].infantList||null==this.avlRequestDTO.lapAvlRequestDTO[l].infantList||this.avlRequestDTO.lapAvlRequestDTO[l].infantList.length<=0)&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr17}),e=!0)),1==this.psgnGroupArray.length&&(1!=this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice&&3!=this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice||(this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice=99)),2==this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice&&this.lowerBerthCount[l]<1&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr18}),e=!0),3==this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice&&this.lowerBerthCount[l]<2&&(this.messageService.add(this.numberOfPassengers<2?{life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr19}:{life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr20}),e=!0),r[l]&&!this.avlRequestDTO.generalistChildConfirm?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr21}),e=!0):!r[l]&&this.avlRequestDTO.generalistChildConfirm&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr22}),e=!0),99==this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice&&(this.avlRequestDTO.lapAvlRequestDTO[l].bookOnlyIfCnf=!1,this.addPsgnInputForm.controls.bookOnlyIfCnf.value&&(this.avlRequestDTO.lapAvlRequestDTO[l].reservationChoice=4,this.avlRequestDTO.lapAvlRequestDTO[l].bookOnlyIfCnf=!0)))}),this.address){let t=this.avlRequestDTO.tktAddress;""==t.address||t.address.length<3?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:"Invalid Address 1"}),e=!0):t.street.length>1&&t.street.length<3?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:"Invalid Address 2"}),e=!0):t.colony.length>1&&t.colony.length<3?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:"Invalid Address 3"}),e=!0):null==t.pinCode?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.updateProfileErr17}),e=!0):""==t.stateName?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.updateProfileErr19}),e=!0):""==t.city?(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.updateProfileErr21}),e=!0):""==t.postOffice&&(this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.updateProfileErr22}),e=!0),h=h+t.address.length+t.street.length+t.colony.length}if(this.avlRequestDTO.captcha=""===this.securityAnswer?"":this.securityAnswer,this.avlRequestDTO.lapAvlRequestDTO[0].ignoreChoiceIfWl=!this.addPsgnInputForm.value.bookOnlyIfCnf,null!=this.avlRequestDTO.gstDetails&&null!=this.avlRequestDTO.gstDetails.gstIn&&this.avlRequestDTO.gstDetails.gstIn.length>0){let e=this.avlRequestDTO.gstDetails;h=h+e.gstIn.length+e.nameOnGst==null||e.nameOnGst.length+e.flat==null||e.flat.length+e.street==null||e.street.length+e.area==null?0:e.area.length}return this.multiLapJourneyDetails.nosbBooking&&this.avlRequestDTO.lapAvlRequestDTO.forEach((e,t)=>{e.quota="SS"==this.multiLapJourneyDetails.lapDetails[t].journeyQuota?"GN":this.multiLapJourneyDetails.lapDetails[t].journeyQuota}),console.log("actualCharCount="+h+", this.charCount="+this.charCount),h>this.charCount&&!this.mpUser?(this.ga.emitEvent("pageview","reviewBooking","redirect",1),this.userService.logout(),this.store.dispatch({type:qi.e}),void this.router.navigate(["/logout"])):(console.log("this.avlRequestDTO.ignoreChoiceIfWl ::: "+this.avlRequestDTO.ignoreChoiceIfWl),e?(this.seqDone=!1,this.passportDone=!1,this.garibRathDone=!1,this.bedRollDone=!1,this.foodMsgDone=!1,void(this.langService.loader=!1)):null==this.secQ||void 0===this.secQ||this.seqDone?(l&&!this.passportDone&&(this.langService.loader=!1,this.ok="ok",this.cancel=null,this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr23,accept:()=>(this.passportDone=!0,this.langService.loader=!0,console.log("Foreigner should carry the same passport while travelling."),void this.buttonClick())})),this.garibRathMsg&&!this.garibRathDone&&(this.langService.loader=!1,this.ok="YES",this.cancel="CANCEL",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr24,accept:()=>(this.garibRathDone=!0,this.langService.loader=!0,void this.buttonClick())})),g&&!this.bedRollDone&&(this.langService.loader=!1,this.ok="OK",this.cancel="Cancel",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr25,accept:()=>{if(!(o||c||o))return this.bedRollDone=!0,this.langService.loader=!0,void this.buttonClick()},reject:()=>{console.log("User rejected Bedroll Service")}})),null==p||this.foodMsgDone||(this.langService.loader=!1,this.ok=p.acceptButton,this.cancel=p.rejectButton,this.confirmationService.confirm({message:p.message,accept:()=>{Object(s.a)(300).subscribe(()=>{let e=document.getElementById(f);console.log(f,e),null!=e&&e.focus()})},reject:()=>{if(!(o||c||o))return this.foodMsgDone=!0,this.langService.loader=!0,void this.buttonClick()}})),u?(this.langService.loader=!1,this.ok="OK",this.cancel="Cancel",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr26,accept:()=>{this.langService.loader=!0,this.ssSplit()},reject:()=>{console.log("User rejected ForgoFull senior citizen concession booking")}})):c?(this.langService.loader=!1,this.ok="OK",this.cancel="Cancel",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr27,accept:()=>{this.langService.loader=!0,this.ssSplit()},reject:()=>{console.log("User rejected Forgo 50 senior citizen concession booking")}})):o&&(this.langService.loader=!1,this.ok="OK",this.cancel="Cancel",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr28,accept:()=>{console.log("User accepted senior citizen concession booking"),console.log("Enq Req Dto = "+JSON.stringify(this.avlRequestDTO)),this.langService.loader=!0,this.ssSplit()},reject:()=>{console.log("User rejected senior citizen concession booking")}})),void(o||c||u||l&&!this.passportDone||this.garibRathMsg&&!this.garibRathDone||g&&!this.bedRollDone||null!=p&&!this.foodMsgDone||(console.log("Enq Req Dto = "+JSON.stringify(this.avlRequestDTO)),this.ssSplit()))):(console.log("verification done: IN show aSQSTION"),this.langService.loader=!1,this.showSecQ=!0,this.seqDone=!0,void this.showSeqQuestion()))}showSeqQuestion(){this.ansInputType="text"===this.secQ.type}answer(e){""!==e?this.securityAnswer=e:this.ansInputType||(this.securityAnswer=""),this.showSecQ=!1,this.buttonClick()}ssSplit(){this.seqDone=!1;let e=!1;for(let t of this.multiLapJourneyDetails.lapDetails)e=e||t.avlDetails.bkgCfg.twoSSReleaseFlag;e&&this.twoSSEligible&&(e=!1,this.avlRequestDTO.lapAvlRequestDTO.forEach(t=>{1!=t.reservationChoice?(t.ssQuotaSplitCoach="Y",e=!0):t.ssQuotaSplitCoach="N"})),1==e?(this.langService.loader=!1,this.ok="Yes",this.cancel="No",this.confirmationService.confirm({message:this.langService.errorMsg.passengerInputErr29,key:"ssSplit",accept:()=>{this.langService.loader=!0,this.timeWait()},reject:()=>{this.langService.loader=!0,this.avlRequestDTO.lapAvlRequestDTO.forEach(e=>{e.ssQuotaSplitCoach="N"}),this.timeWait()}})):(this.langService.loader=!0,this.avlRequestDTO.lapAvlRequestDTO.forEach(e=>{e.ssQuotaSplitCoach="N"}),this.timeWait())}setSecurityAnswer(e){this.securityAnswer=e}procedeForBooking(){if(this.langService.loader=!0,console.log("Enq Req Dto = "+JSON.stringify(this.avlRequestDTO)),this.reloadnlpcaptcha=!1,0!=this.userService.captchaPocEnable){let e=_i.a.lso,t=this.userService.captchaYTime;1==this.userService.captchaPocEnable&&(e=_i.a.lsoPSGN,t=this.userService.captchaPocTime),this.doEnq()}else this.doEnq()}doEnq(e){(94!=this.userResponse.countryId||this.ftBooking)&&this.userResponse.mobile&&this.userResponse.mobile.length>0&&(this.avlRequestDTO.mobileNumber=this.userResponse.mobile),this.webService.allLapAvlFareEnq(this.avlRequestDTO,!0,"Y",e).subscribe(e=>{if(null!==e&&"true"==e.reTry)Object(s.a)(5e3).subscribe(()=>{this.procedeForBooking()});else if(this.langService.loader=!1,console.log("singleDayAvlEnqDtls > "+JSON.stringify(e)),this.singleDayAvlEnqDtls=e,null!==e&&void 0===e.errorMessage){const t=JSON.parse(JSON.stringify(this.multiLapJourneyDetails));t.adult=[],t.infant=[],e.avlFareResponseDTO=Array.isArray(e.avlFareResponseDTO)?e.avlFareResponseDTO:Array.of(e.avlFareResponseDTO),e.avlFareResponseDTO.forEach((e,n)=>{null==e.errorMessage&&null==e.errorMessage&&(e.avlDayList=this.commonService.processAvlList(e.avlDayList),t.lapDetails[n].avl=e.avlDayList[0],t.lapDetails[n].avlDetailsY=e,t.adult.push(this.avlRequestDTO.lapAvlRequestDTO[n].passengerList))}),e.captchaDto.captchaQuestion="data:image/jpg;base64,"+e.captchaDto.captchaQuestion,t.captchaGenerateTime=new Date,t.emailId=this.emailId,t.mobileNumber=this.isdCode+"-"+this.avlRequestDTO.mobileNumber,t.adultCount=0,t.childCount=0,t.adult[0].forEach(e=>{e.passengerAge>=12?t.adultCount++:t.childCount++}),this.infantGroupArray.forEach(e=>{t.infant.push(e.value)}),t.numberOfPsgns=this.psgnGroupArray.length,t.loyalityInputForm=this.loyalityInputForm.value,t.fetchedLoyalityData=this.fetchedLoyalityData,t.acuralBookingFlag=1==t.loyalityInputForm.choice,t.loyaltyRedemptionBooking=2==t.loyalityInputForm.choice,this.store.dispatch(new l.l(t)),this.bookingService.clientTxnId=t.clientTxnId,this.commonService.addPsgnView=t.adult,this.commonService.singleDayAvlEnqDtls=e,this.bookingService.captchaGenerateTime=t.captchaGenerateTime,null!=e.confirmation&&null!=e.confirmation?(this.langService.loader=!1,this.ok="YES",this.cancel="NO",this.confirmationService.confirm({message:e.confirmation,accept:()=>{this.ga.emitEvent("proceedWithoutChoice","confirmation","YES",1),this.router.navigate(["booking/reviewBooking"])},reject:()=>{this.ga.emitEvent("proceedWithoutChoice","confirmation","YES",1),console.log("User rejected Forgo 50 senior citizen concession booking")}})):this.router.navigate(["booking/reviewBooking"])}else if(null!==e&&(void 0!==e.errorMessage||null!=e.captchaDto)){let t="";this.secQ=e.secQ,this.seqDone=!1,t=void 0!==e.errorMessage?e.errorMessage:e.captchaDto.error,this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+t})}})}disableCoachId(e){this.addPsgnInputForm.controls.coachId.setValue(null)}initLapDetails(){let e=[];this.addMealInputControl=[];for(let t of this.multiLapJourneyDetails.lapDetails)this.mealChoiceEnable&&this.mealDtls.forEach(e=>{t.avlDetails.trainNo==e.trainNo&&this.addMealInputControl.push(this.fb.group({mealDtlsArr:[""]}))}),e.push(this.fb.group({trainNo:[t.avlDetails.trainNo],journeyDate:[this.datePipe.transform(t.avlDetails.journeyDate,"yyyyMMdd")],fromStation:[t.avlDetails.from],toStation:[t.avlDetails.to],journeyClass:[t.classCode],quota:[t.quotaCode],coachId:[null],reservationChoice:["99",Wi.validateResvnChoice],ignoreChoiceIfWl:[!0],travelInsuranceOpted:[(1==t.trainOwner||!("false"==t.avlDetails.bkgCfg.travelInsuranceEnabled||"FT"===t.quotaCode||!t.avlNotWL&&!t.racNotWL))&&"true",Wi.validatetravelInsuranceChoice],warrentType:[0],coachPreferred:[!1],autoUpgradation:[!1],bookOnlyIfCnf:[!1],addMealInput:[null],concessionBooking:[!this.multiLapJourneyDetails.nosbBooking&&void 0!==t.avlDetails.bkgCfg.concessionalPassengerType]},{validator:Wi.validatePassengerInputForm(t,t.avlDetails.bkgCfg)}));return e}initPassenger(){let e=[],t=0;for(let n of this.multiLapJourneyDetails.lapDetails)e.push(this.fb.group({passengerName:["",0==t?[Wi.validateName(n.avlDetails.bkgCfg.minNameLength,n.avlDetails.bkgCfg.maxNameLength)]:null],passengerAge:[null,0==t?[Wi.validatePassengerAge(this.multiLapJourneyDetails.nosbBooking?n.avlDetails.bkgCfg.minPassengerAge:1,n.avlDetails.bkgCfg.maxPassengerAge)]:null],passengerGender:["",0==t?[Wi.validateGender]:null],passengerBerthChoice:[""],passengerFoodChoice:["",Wi.validateFoodChoice(n.avlDetails.bkgCfg.foodChoiceEnabled,n.avlDetails.bkgCfg.foodDetails)],passengerSrCtznConcession:["0"],childBerthFlag:[!0],passengerBedrollChoice:[null],passengerNationality:["FT"==n.quotaCode?"ZZ":"IN",[Wi.validateNationality]],passengerCardType:["FT"==n.quotaCode?"PASSPORT":"NULL_IDCARD"],passengerCardNumber:[null,Wi.validateIdCard(n.avlDetails.bkgCfg.minIdCardLength,n.avlDetails.bkgCfg.maxIdCardLength)],passengerCardTypeMaster:[null],passengerCardNumberMaster:[null],psgnConcType:["0"],psgnConcCardId:[null],psgnConcDOB:[null],psgnConcCardExpiryDate:[null],psgnConcDOBP:[null],softMemberId:[null],softMemberFlag:[null],psgnConcCardExpiryDateP:[null],passengerVerified:[!1],masterPsgnId:[null],mpMemberFlag:[null],passengerForceNumber:[null,"true"===n.avlDetails.bkgCfg.pmfInputEnable?Wi.validatetForceNumber("true"===n.avlDetails.bkgCfg.pmfInputMandatory,n.avlDetails.bkgCfg.pmfInputMaxLength):null],passConcessionType:["0"],passUPN:[null,Wi.validatePassUPN(10)],passBookingCode:[null,Wi.validatePassBkgCode(6)]},{validator:Wi.validatePassengerDetails(n,n.avlDetails.bkgCfg)})),t++;return this.fb.group({passenger:[this.fb.array(e)]})}initInfant(){return this.fb.group({name:[null,[S.x.required,Wi.validateName(this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.minNameLength,this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.maxNameLength)]],gender:["",[Wi.validateGender]],age:["",[Wi.validateInfantAge]]})}addPassenger(){const e=Object.assign({},this.multiLapJourneyDetails);if(this.psgnGroupArray.length<(this.retJrny?0:this.maxPassengers)){let t=this.initPassenger();return this.psgnGroupArray.push(t),e.numberOfPsgns=this.psgnGroupArray.length,this.store.dispatch(new l.l(e)),this.mpUser&&"PH"===this.multiLapJourneyDetails.lapDetails[0].quotaCode&&this.addCompanionForMP(),this.initRsvnChoice(),!0}return this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr30}),!1}removePassenger(e){this.store.dispatch(new l.C(null));let t=this.psgnGroupArray[e].controls.passenger.value.controls[0].value;if(null!=t.masterPsgnId&&null!=t.masterPsgnId){let e=JSON.parse(JSON.stringify(this.masterList));e.passengerDetailList.forEach(e=>{e.masterListId==t.masterPsgnId&&(e.clientTxnId=void 0)}),this.store.dispatch(new l.r(e))}this.psgnGroupArray.splice(e,1);const n=Object.assign({},this.multiLapJourneyDetails);n.numberOfPsgns=this.psgnGroupArray.length,this.initRsvnChoice(),this.charCount=this.charCount-t.controls.passengerName.value.length,console.log("this.charCount = "+this.charCount),this.store.dispatch(new l.l(n))}addInfant(){this.infantGroupArray.length<this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.maxInfants?this.infantGroupArray.push(this.initInfant()):this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr31})}removeInfant(e){this.infantGroupArray.splice(e,1)}changeBoardingStn(e){if(null!=e){const t=e.stnNameCode,n=e.departureTime.split(":");let i=new Date(e.boardingDate);i.setHours(+n[0],+n[1],0,0);let a=new Date(this.multiLapJourneyDetails.lapDetails[0].avlDetails.arivalDate);const s=Object.assign({},this.multiLapJourneyDetails);if(s.boardingStation=t.split("-")[1].trim(),s.duration=this.converToHours((a.getTime()-i.getTime())/36e3),this.multiLapJourneyDetails.multilapBooking){let e=s.duration.split(":"),t=s.lapDetails[1].duration.split(":"),n=+e[1]+ +t[1]+ +s.waitTime,i=+e[0]+ +t[0],a=n/60;i+=+a.toString().split(".")[0],a-=+a.toString().split(".")[0],n=Math.round(60*a),s.totalDuration=i+"h "+n+"m"}this.addPsgnInputForm.controls.boardingStation.setValue(s.boardingStation),this.store.dispatch(new l.l(s))}}markFormGroupTouched(e){Object.keys(e.controls).forEach(t=>{const n=e.get(t);if(n instanceof S.e)n.markAsTouched({onlySelf:!0});else if(n instanceof S.h)n.markAsTouched({onlySelf:!0}),this.markFormGroupTouched(n);else if(n instanceof S.c)for(let e=0;e<n.length;e++){const t=n.at(e);t instanceof S.e?t.markAsTouched({onlySelf:!0}):t instanceof S.h&&(t.markAsTouched({onlySelf:!0}),this.markFormGroupTouched(t))}})}timeWait(){if(!this.reReq)return void this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErr32});this.reReq=!1,this.langService.loader=!0;let e=this.userResponse.mobileAppConfigDTO.formFillCheckStartTime,t=this.userResponse.mobileAppConfigDTO.formFillCheckEndTime,n=this.userResponse.mobileAppConfigDTO.formFillCheckEnable,i=this.userResponse.mobileAppConfigDTO.minmPsgnInputTime.split("#");this.multiLapJourneyDetails.boardingData.minPsgnInputTime&&(e=0,t=2e3,n=1,i=this.multiLapJourneyDetails.boardingData.minPsgnInputTime.split("#"));let a=+i[0];i.length>1&&(a=+i[this.avlRequestDTO.lapAvlRequestDTO[0].passengerList.length-1]),a=a;let r=new Date((new Date).getTime()+this.langService.srvTimeDiff),l=60*r.getHours()+r.getMinutes(),o=1==n;(l<e-5||l>=t+5||a<=0)&&(o=!1);let c=(new Date).getTime()-this.multiLapJourneyDetails.bookingInItTime;o&&c<a?Object(s.a)(a-c).subscribe(()=>{this.procedeForBooking(),this.reReq=!0}):this.reReq||(this.procedeForBooking(),this.reReq=!0)}updateConcCardList(e){e&&(this.lastConcCardDtls=Object.assign({},this.lastConcCardDtls,e))}updatePassDtls(e){this.lastPassDtls=Object.assign({},this.lastPassDtls,e)}validateMobileNumber(e){return 8===e.charCode||0===e.charCode||13===e.charCode||8===e.charCode||0===e.charCode||13===e.charCode?null:e.charCode>=48&&e.charCode<=57}buttonReplan(){this.commonService.replan=!0,this.router.navigate(["train-search"])}displayAds(e,t,n){let i=this.multiLapJourneyDetails.lapDetails[0],a=window.googletag||{cmd:[]};a.cmd.push(()=>{var t=googletag.sizeMapping().addSize([1280,0],[970,90]).addSize([980,0],[970,90]).addSize([768,0],[320,50]).addSize([320,0],[320,50]).build();googletag.defineSlot(e,[[320,50],[970,90]],this.adIdPT).setTargeting("Destination",[i.toStnCode]).setTargeting("Quota",[i.quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(i.departureDateTime)]).setTargeting("Meal",["0"]).setTargeting("Gender",[this.userService.getGender()]).setTargeting("TrainType",i.trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(i.arrivalDateTime)]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",[i.fromStnCode]).setTargeting("Classes",[i.classCode]).defineSizeMapping(t).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),a.cmd.push(()=>{var e=googletag.sizeMapping().addSize([980,0],[[970,90],[728,90]]).addSize([768,0],[728,90]).addSize([320,0],[320,50]).build();googletag.defineSlot(t,[[320,50],[970,90],[728,90]],this.adIdPB).setTargeting("Destination",[i.toStnCode]).setTargeting("Quota",[i.quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(i.departureDateTime)]).setTargeting("Meal",["0"]).setTargeting("Gender",[this.userService.getGender()]).setTargeting("TrainType",i.trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(i.arrivalDateTime)]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",[i.fromStnCode]).setTargeting("Classes",[i.classCode]).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),a.cmd.push(()=>{var e=googletag.sizeMapping().addSize([980,0],[[300,600],[120,600],[160,600]]).addSize([320,0],[300,250]).build();googletag.defineSlot(n,[[160,600],[300,600],[300,250],[120,600]],this.adIdRM).setTargeting("Destination",[i.toStnCode]).setTargeting("Quota",[i.quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(i.avlDetails.journeyDate)]).setTargeting("Meal",["0"]).setTargeting("Gender",[this.userService.getGender()]).setTargeting("TrainType",i.trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(i.avlDetails.arivalDate)]).setTargeting("Age",[this.userService.getAge()]).setTargeting("Source",[i.avlDetails.from]).setTargeting("Classes",[i.classCode]).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),googletag.display(this.adIdPT)}preventClick(e){this.preventBhim=!(2!=e||!this.commonService.accrualBooking)}addCompanionForMP(){let e=this.userService.userResponse.mpUserDetailsDTO;this.psgnGroupArray[this.psgnGroupArray.length-1].controls.passenger.value.controls.forEach(t=>{t.controls.psgnConcCardId.setValue(e.idCardNumber),t.controls.psgnConcDOBP.setValue(new Date(e.dateOfBirth)),t.controls.psgnConcCardExpiryDateP.setValue(new Date(e.cardExpiryDate)),t.controls.passengerName.setValue({masterPassengerName:"Companion"}),t.controls.passengerAge.setValue(99),t.controls.passengerGender.setValue("M")})}chooseSelectedMeal(e){for(var t=new Array,n=0;n<e.length;n++){for(var i=0;i<e[n].mealDetailList.length;i++)e[n].mealDetailList[i].quantity>0&&(new Xi.a,t.push(e[n].mealDetailList[i]));null!=t&&null!=t&&t.length>0&&(this.selectedMeal=Array.isArray(t)?t:Array.of(t))}}converToHours(e){var t=(e/100).toString().split(".")[0],n=Math.round(e%100*.6).toString();return 1==t.toString().length&&(t="0"+t),1==n.length&&(n="0"+n),t+":"+n}mpPsgnPresent(e){const t=e.psgnConcType;return!!this.mpUser&&("MPPASS"===t||"MPSPOS"===t||"MPCOMP"===t||"MPBLES"===t||"EXMP"===t||"EXCOMP"===t||"MPNTSP"===t)}updateMessage(e){console.log(e),"meal"==e.key?this.foodSellectionPopup(e):"showBonafideCountryMsg"==e.key?this.bonafideMessage=!0:"hideBonafideCountryMsg"==e.key&&(this.bonafideMessage=!1)}foodSellectionPopup(e){null!=this.nonVegSelectionMsg&&this.confirmationService.confirm({message:this.nonVegSelectionMsg.message,rejectVisible:!1})}loyalityChacked(e){console.log(e),this.lastLoyalityChacked.value!=e.value&&(this.lastLoyalityChacked=e,this.isPaymentTypeEnable=!(null==this.multiLapJourneyDetails.paymentOption||null==this.multiLapJourneyDetails.paymentOption||2==e.value),this.addPsgnInputForm.patchValue({paymentType:this.isPaymentTypeEnable?this.multiLapJourneyDetails.paymentOption.defaultValue:1}),this.softPsgn=null,this.softAcSumDtoSelected=null,this.resetLoyalityData(2==e.value))}resetLoyalityData(e=!1){let t=0;this.psgnGroupArray.forEach(e=>{e.value.passenger.controls.forEach(e=>{e.value.softMemberId&&(console.log(e.value),this.psgnGroupArray[t]=this.initPassenger())}),t+=1}),this.addPsgnInputForm.patchValue({loyaltyRedemptionBooking:e,loyaltyBankId:null,loyaltyNumber:null}),this.avlRequestDTO.bankId=null,this.paymentOption=this.multiLapJourneyDetails.paymentOption.options}loyalityBankSelect(e,t=!0){var n;if(null!=e&&(null===(n=this.loyalityInputForm.value.selectedBank)||void 0===n?void 0:n.bankId)!=e.bankId)if(t&&this.resetLoyalityData(),this.softAcSumDtoSelected=e,this.loyalityInputForm.patchValue({selectedBank:e}),null==this.fetchedLoyalityData[e.bankId])if(console.log(e.loyaltyNumber),e.loyaltyNumber){let t={cls:this.multiLapJourneyDetails.lapDetails[0].classCode,bankId:e.bankId,passengerDetailDTO:[{softMemberId:e.loyaltyNumber}]};this.langService.loader=!0,this.bookingService.getLoyaltyPassengers(t).subscribe(t=>{console.log(t),this.langService.loader=!1,t.bankId=e.bankId,t.bankName=e.bankName,this.fetchedLoyalityData[e.bankId]=t,this.processLoyalityBankData(this.fetchedLoyalityData[e.bankId])})}else this.processLoyalityBankData({bankName:e.bankName,error:" ",registerLoyality:!0});else this.processLoyalityBankData(this.fetchedLoyalityData[e.bankId]),this.avlRequestDTO.bankId=e.bankId}processLoyalityBankData(e){if(console.log(e),e.error)this.softPsgn={},this.softPsgn=e,e.error.trim().length>0&&this.messageService.add({life:this.langService.life,severity:"error",summary:"Error",detail:e.error});else{let t=e.passengerDetailDTO[0];null!=t&&(null!=t.passengerName&&null!=t.passengerName&&""!=t.passengerName.trim()&&null!=t.passengerAge&&null!=t.passengerAge&&null!=t.passengerGender&&null!=t.passengerGender&&""!=t.passengerGender.trim()?this.softPsgn=t:this.messageService.add({life:this.langService.life,severity:"error",summary:"Error",detail:"Incomplete Loyality Details"}))}}selectSoftPsgn(e){let t;if((e=JSON.parse(JSON.stringify(e))).passengerName=e.passengerName.substring(0,this.multiLapJourneyDetails.lapDetails[0].avlDetails.bkgCfg.maxNameLength).trim(),this.editablePsgnForSoftBank.includes(this.loyalityInputForm.value.selectedBank.bankId)&&(e={passengerName:e.passengerName,passengerAge:e.passengerAge,passengerGender:e.passengerGender,softMemberId:null,softMemberFlag:null}),this.editablePsgnForSoftBank.includes(this.loyalityInputForm.value.selectedBank.bankId))t=this.addPassenger();else{let e=!1;0==this.psgnGroupArray.length?t=this.addPassenger():(this.psgnGroupArray.forEach(t=>{null!=t.value.passenger.value[0].softMemberId&&(e=!0)}),e?this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.langService.errorMsg.passengerInputErrLoyalty}):t=this.addPassenger())}if(t){let t=this.psgnGroupArray.length;this.psgnGroupArray[t-1].value.passenger.controls.forEach((n,i)=>{e.passengerBerthChoice=n.value.passengerBerthChoice,e.passengerFoodChoice=n.value.passengerFoodChoice,e.passengerName={masterPassengerName:e.passengerName},n.patchValue(e),this.charCount=this.charCount+n.value.passengerName.length;let a=this.langService.lang.loyalityPaxAdded;a=a.replace("{{1}}",""+t),this.messageService.add({life:this.langService.life,severity:"info",summary:"Info",detail:a})});let n=this.loyalityInputForm.value.selectedBank;this.addPsgnInputForm.patchValue({loyaltyRedemptionBooking:!1,loyaltyBankId:n.bankId,loyaltyNumber:n.loyaltyNumber,paymentType:this.multiLapJourneyDetails.paymentOption.defaultValue}),this.avlRequestDTO.bankId=n.bankId,this.paymentOption=[this.multiLapJourneyDetails.paymentOption.options[0]]}}redirectTo(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(i.c),o.Ub(S.d),o.Ub(b.a),o.Ub(c.a),o.Ub(u.a),o.Ub(g.b),o.Ub(f.a),o.Ub(En.a),o.Ub(d.a),o.Ub(m.a),o.Ub(ea.a),o.Ub(d.d),o.Ub(p.f),o.Ub(p.k))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-passenger-input"]],viewQuery:function(e,t){var n;1&e&&o.bd(ws,!0),2&e&&o.Hc(n=o.jc())&&(t.savedPassengerList=n.first)},decls:181,vars:104,consts:[[1,"top-header","hidden-lg","hidden-md","hidden-sm"],[1,"top-header-content","col-xs-12"],[1,"fa","fa-long-arrow-left",2,"width","10%","margin-top","12px",3,"click"],[1,"pull-right",2,"width","90%"],[1,"t_2",2,"color","#fff"],[1,"clearfix"],[1,"text-center","ad-min-height",3,"id"],[1,"col-xs-12","hidden-xs",2,"padding","30px 0 60px 0"],[1,"col-xs-push-2","col-xs-8"],[1,"text-center",2,"margin-top","-42px"],[1,"col-xs-4",2,"padding","0px"],[1,"progress-active","progress-step"],[1,"progress-val"],[1,"pull-left","progress-text",2,"margin-left","-36px"],[1,"col-xs-push-6","progress-step"],[1,"col-xs-push-5","progress-text"],[1,"pull-right"],[1,"progress-step"],[1,"progress-text"],["id","app-journey-details","position","bottom",3,"visible","visibleChange"],[3,"avlY","journeyDetails"],[1,"text-center"],["type","button",1,"search_btn",3,"click"],[1,""],[2,"max-width","95% !important",3,"header"],["cd",""],["type","button","pButton","","icon","fa fa-close",3,"label","click",4,"ngIf"],["type","button","pButton","","icon","fa fa-check",3,"label","click"],["icon","fa fa-question-circle","key","ssSplit",2,"max-width","95% !important",3,"header","closeOnEscape","closable"],["c",""],["type","button","pButton","","icon","fa fa-close",3,"label","click"],["id","psgn-form",1,"col-xs-12",2,"padding","0px"],[1,"form-inline",3,"formGroup","ngSubmit"],["f","ngForm"],[1,"body_div"],[1,"col-lg-9","col-md-9","col-sm-12","remove-padding"],[3,"enableService","value","closable",4,"ngIf"],[1,"form-group","col-xs-12","border-all","zeroPadding"],[3,"page","mpUser","msgsConcessionBooking","msgsSeniorCitizenApplicable","msgsBedRollFlagEnabled","changeBoardingStn"],[1,"col-xs-12","margin"],[1,"form-group","col-xs-12","border-all","zeroPadding",3,"formGroup"],["expandIcon","fa fa-angle-down","collapseIcon","fa fa-angle-up",3,"toggleable"],[1,"col-xs-11",2,"padding","0px 0px"],[1,"ui-helper-clearfix"],[1,"ui-panel-title","p-heading",2,"padding-right","16px"],["style","padding-right: 16px;",4,"ngFor","ngForOf"],[1,"orange-text","t_2"],[4,"ngIf"],[1,"form-group","col-xs-12","border-all",2,"padding","0px"],[1,"no-pad","col-xs-12"],[1,"col-xs-12","remove-padding","pay-msg","sptrain"],[1,"fill"],[1,"ui-panel-title","p-heading"],["class","blink col-xs-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"form-group","col-xs-12","padding"],["class","zeroPadding pull-left",4,"ngIf"],["class","zeroPadding text-right",4,"ngIf"],[1,"form-group","col-xs-12","padding","text-right",2,"font-size","12px"],[1,"ui-panel-title"],[1,"p-heading"],[1,"col-xs-12",2,"padding","0px 0px 10px 0px"],[1,"header","col-xs-12"],[1,"input-group","col-xs-12","col-sm-6","col-md-3","pull-left"],[1,"input-group-addon",2,"font-weight","lighter"],["type","text","formControlName","mobileNumber","placeholder","Passenger mobile number *","id","mobileNumber","name","mobileNumber","autocomplete","off",1,"form-control",3,"maxlength","keypress"],[3,"control"],["class","form-group col-xs-12 border-all","style","padding: 0px;",4,"ngIf"],["class","col-xs-12 margin",4,"ngIf"],["id","addMeal","class","form-group col-xs-12 border-all","style","padding: 0px;",4,"ngIf"],["class","form-group col-xs-12 border-all",4,"ngIf"],["class","form-group col-xs-12 border-all dull-back",4,"ngIf"],[1,"form-group","col-xs-12","border-all","dull-back",2,"padding","0px"],["expandIcon","fa fa-angle-down","collapseIcon","fa fa-angle-up",3,"toggleable","style",4,"ngIf"],["class","col-xs-12 form-group",4,"ngIf"],["class","col-xs-12",4,"ngIf"],[1,"col-xs-12","hidden-xs",2,"margin","20px auto"],["type","button",1,"btnDefault",3,"click"],["type","submit",1,"train_Search","btnDefault",3,"click"],["position","bottom",1,"col-xs-12","hidden-lg","hidden-md","hidden-sm",3,"modal","visible","ngStyle"],[1,"pull-left",2,"width","49.9%"],["type","button",1,"mob-bot-btn","search_btn",3,"click"],[1,"pull-right",2,"width","49.9%"],["type","submit",1,"mob-bot-btn","search_btn",2,"background","#fb792b",3,"click"],[1,"clearfix",2,"margin-top","1px"],[1,"text-center",3,"id"],[1,"col-lg-3","col-md-3","col-sm-12","hidden-xs"],[1,"col-xs-12","text-center",2,"margin-top","20px",3,"id"],[1,"hidden-sm","hidden-xs","text-center"],[1,"col-xs-12","bottomDiv"],[1,"require"],["modal","true",3,"header","style","visible","closable","visibleChange",4,"ngIf"],[3,"enableService","value","closable"],[2,"padding-right","16px"],[3,"for"],["formControlName","choice","name","loyalityOperationType",1,"form-group",3,"value","id","click"],[1,"nopadding","col-sm-4","col-xs-12"],[3,"options","placeholder","ngModel","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["class","col-sm-8 col-xs-12","style","padding-top: 8px;",4,"ngIf"],["class","col-sm-8 col-xs-12","style","color: red;",4,"ngIf"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],[2,"width","18px",3,"src"],[2,"padding-left","12px"],[1,"flex","align-items-center","gap-2",3,"click"],[1,"col-sm-8","col-xs-12",2,"padding-top","8px"],[1,"a",2,"padding-left","8px",3,"click"],[1,"col-sm-8","col-xs-12",2,"color","red"],[2,"padding-top","8px"],[1,"a",3,"click"],["target","_blank","rel","noopener noreferrer","href","https://contents.irctc.co.in/en/allcards.html"],[1,"blink","col-xs-12"],[1,"col-sm-1","col-xs-12","remove-padding","pull-right"],["class","fa fa-remove fa-lg","style","float:right;margin: 0px 0px; color:#a7a7a7",3,"click",4,"ngIf"],[1,"col-sm-11","col-xs-12","remove-padding","pull-left",2,"padding","0px"],[1,"col-xs-12"],[1,"fa","fa-remove","fa-lg",2,"float","right","margin","0px 0px","color","#a7a7a7",3,"click"],[3,"mpUser","index","psgnControlGroup","bookingConfigurables","countryList","concCardDtls","isIrctcTrain","journeyDetails","lapNo","passDtls","updateConc","updatePass","updateMessage"],[1,"panel-heading"],[2,"float","right","margin","0px 15px"],["tabindex","0","alt","Remove Infant",1,"fa","fa-remove","fa-lg",2,"color","#a7a7a7",3,"click"],[3,"group","bookingConfigurables"],[1,"zeroPadding","pull-left"],["tabindex","0",3,"click","keydown.Enter"],[1,"prenext"],[1,"zeroPadding","text-right"],[3,"tktAddress"],["id","addMeal",1,"form-group","col-xs-12","border-all",2,"padding","0px"],[1,"col-xs-11",2,"padding","13px 0px 0px 0px"],[1,"col-xs-12","dull-back",2,"padding","15px"],[1,"form-group","col-xs-12","border-all"],[3,"iTicketDetailsDTOControl","regdAddress","stateList"],[1,"form-group","col-xs-12","border-all","dull-back"],[3,"gstControl"],["class","col-xs-11","style","padding: 0px 0px;",4,"ngIf"],["class","col-xs-12","style","padding: 0;",4,"ngIf"],["class","no-pad col-xs-12",4,"ngFor","ngForOf"],[1,"col-xs-12",2,"padding","0","padding-bottom","10px"],["class","col-sm-6 col-xs-12","style","padding: 0;",4,"ngIf"],["class","no-pad col-xs-12","style","padding-bottom: 10px",4,"ngIf"],["class","col-sm-6 col-xs-12","style","padding: 12px 0;",4,"ngFor","ngForOf"],[1,"col-sm-6","col-xs-12",2,"padding","0"],["type","checkbox","formControlName","autoUpgradationSelected","name","autoUpgradation","id","autoUpgradation",1,"css-checkbox"],["for","autoUpgradation",1,"css-label_c","t_cl"],["type","checkbox","formControlName","bookOnlyIfCnf","name","confirmberths","id","confirmberths",1,"css-checkbox"],["for","confirmberths",1,"css-label_c","t_cl"],[1,"no-pad","col-xs-12",2,"padding-bottom","10px"],["class","no-pad col-sm-4 col-xs-12",4,"ngFor","ngForOf"],[1,"no-pad","col-sm-4","col-xs-12"],["formControlName","bookingChoice","name","bookingChoice",1,"form-group",3,"value","id"],["formControlName","bookingConfirmChoice","name","confirmberths",1,"form-group",3,"value","id"],[1,"col-sm-6","col-xs-12",2,"padding","12px 0"],["class","no-pad col-sm-11 col-xs-12",3,"formGroup",4,"ngIf"],["class","tip fare-icon fa fa-info-circle fa-lg",4,"ngIf"],[1,"no-pad","col-sm-11","col-xs-12",3,"formGroup"],["formControlName","reservationChoice",3,"options"],[1,"tip","fare-icon","fa","fa-info-circle","fa-lg"],["type","text","maxlength","4","formControlName","coachId",1,"form-control",3,"placeholder"],[1,"col-xs-12",2,"padding","0"],[1,"col-sm-3","col-xs-6",2,"padding","0px"],["for","FLP"],["formControlName","warrentType","value","1","id","FLP","name","warrentType",1,"form-group"],["for","ADFLP"],["formControlName","warrentType","value","2","id","ADFLP","name","warrentType",1,"form-group"],["for","GD"],["formControlName","warrentType","value","3","id","GD","name","warrentType",1,"form-group"],["for","NONE"],["formControlName","warrentType","value","0","id","NONE","name","warrentType",1,"form-group"],["class","col-xs-12","style","padding: 0;",3,"formGroup",4,"ngIf"],[1,"col-xs-12",2,"padding","0",3,"formGroup"],[1,"travel-header"],[1,"hidden-lg","hidden-md","hidden-sm"],[1,"t_2"],[1,"col-sm-6","col-xs-12",2,"padding","0px"],["formControlName","travelInsuranceOpted","value","true",1,"form-group",3,"id","name"],["target","_blank","rel","noopener noreferrer",3,"href"],["class","col-sm-6 col-xs-12","style","padding: 0px;",4,"ngIf"],["formControlName","travelInsuranceOpted","value","false",1,"form-group",3,"id","name"],[2,"width","100%"],["class","span3 col-xs-12 link",4,"ngFor","ngForOf"],[1,"span3","col-xs-12","link"],["formControlName","paymentType","name","paymentType",1,"form-group",3,"value","id"],[1,"t_2",2,"padding-left","18px"],["class","t_2","style","color:red;",4,"ngIf"],[1,"t_2",2,"color","red"],[1,"col-xs-12","form-group"],["type","checkbox","formControlName","ftTnCAgree","name","ftTnCAgree","id","ftTnCAgree",1,"css-checkbox"],["for","ftTnCAgree",1,"css-label_c","t_cl"],["type","checkbox","formControlName","generalistChildConfirm","name","generalistChildConfirm","id","generalistChildConfirm",1,"css-checkbox"],["for","generalistChildConfirm",1,"css-label_c","t_cl"],["modal","true",3,"header","visible","closable","visibleChange"],["class","text-center",4,"ngIf"],[1,"col-sm-6","col-xs-12"],["type","text","maxlength","40",1,"form-control","col-sm-5","col-xs-12",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","col-sm-3","col-xs-12",3,"click"],["class","col-xs-6",4,"ngFor","ngForOf"],[1,"col-xs-6"],[3,"click"]],template:function(e,t){if(1&e){const e=o.bc();o.ac(0,"div",0),o.ac(1,"div",1),o.ac(2,"div",2),o.ic("click",(function(){return t._location.back()})),o.Zb(),o.ac(3,"div",3),o.ac(4,"strong"),o.Tc(5),o.Zb(),o.Vb(6,"br"),o.ac(7,"span",4),o.Tc(8),o.nc(9,"stationName"),o.nc(10,"stationName"),o.nc(11,"date"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(12,"div",5),o.Vb(13,"div",6),o.ac(14,"div",7),o.ac(15,"div",8),o.Vb(16,"hr"),o.ac(17,"div",9),o.ac(18,"div",10),o.ac(19,"div",11),o.ac(20,"div",12),o.Tc(21,"1"),o.Zb(),o.Zb(),o.ac(22,"div",13),o.Tc(23),o.Zb(),o.Zb(),o.ac(24,"div",10),o.ac(25,"div",14),o.ac(26,"div",12),o.Tc(27,"2"),o.Zb(),o.Zb(),o.ac(28,"div",15),o.Tc(29),o.Zb(),o.Zb(),o.ac(30,"div",10),o.ac(31,"div",16),o.ac(32,"div",17),o.ac(33,"div",12),o.Tc(34,"3"),o.Zb(),o.Zb(),o.ac(35,"div",18),o.Tc(36),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(37,"p-toast"),o.ac(38,"p-sidebar",19),o.ic("visibleChange",(function(e){return t.jrnyDetailSidebar=e})),o.Vb(39,"app-fare-summary",20),o.ac(40,"div",21),o.ac(41,"button",22),o.ic("click",(function(){return t.jrnyDetailSidebar=!t.jrnyDetailSidebar})),o.Tc(42),o.Zb(),o.Zb(),o.Zb(),o.ac(43,"div",23),o.ac(44,"p-confirmDialog",24,25),o.ac(46,"p-footer"),o.Rc(47,Ls,1,1,"button",26),o.ac(48,"button",27),o.ic("click",(function(){return o.Kc(e),o.Ic(45).accept()})),o.Zb(),o.Zb(),o.Zb(),o.ac(49,"p-confirmDialog",28,29),o.ac(51,"p-footer"),o.ac(52,"button",30),o.ic("click",(function(){return o.Kc(e),o.Ic(50).reject()})),o.Zb(),o.ac(53,"button",27),o.ic("click",(function(){return o.Kc(e),o.Ic(50).accept()})),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(54,"div",31),o.ac(55,"form",32,33),o.ic("ngSubmit",(function(){return o.Kc(e),o.Ic(56).form.valid})),o.ac(57,"div",34),o.ac(58,"div",35),o.ac(59,"div"),o.Rc(60,Ns,1,3,"p-messages",36),o.Zb(),o.ac(61,"div",37),o.ac(62,"app-train-header",38),o.ic("changeBoardingStn",(function(e){return t.changeBoardingStn(e)})),o.Zb(),o.Zb(),o.Vb(63,"div",39),o.ac(64,"div",40),o.ac(65,"p-panel",41),o.ac(66,"p-header",42),o.ac(67,"div",43),o.ac(68,"span",44),o.Tc(69),o.Zb(),o.Rc(70,Rs,4,4,"span",45),o.Zb(),o.ac(71,"strong"),o.ac(72,"span",46),o.Tc(73),o.Zb(),o.Zb(),o.Zb(),o.Rc(74,Js,8,8,"span",47),o.Zb(),o.Zb(),o.Vb(75,"div",39),o.ac(76,"div",48),o.ac(77,"div",49),o.ac(78,"div",50),o.ac(79,"ol",51),o.ac(80,"li"),o.Tc(81),o.Zb(),o.ac(82,"li"),o.Tc(83),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(84,"p-panel",41),o.ac(85,"p-header",42),o.ac(86,"div",43),o.ac(87,"span",52),o.Tc(88),o.Zb(),o.Zb(),o.Zb(),o.Rc(89,zs,3,1,"div",53),o.Rc(90,Qs,7,2,"div",54),o.Rc(91,$s,7,2,"div",54),o.ac(92,"div",55),o.Rc(93,Ys,6,2,"div",56),o.Rc(94,Ws,4,1,"div",57),o.Zb(),o.ac(95,"div",58),o.ac(96,"span"),o.ac(97,"strong"),o.Tc(98),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(99,"div",39),o.ac(100,"div",48),o.ac(101,"p-panel",41),o.ac(102,"p-header",42),o.ac(103,"div",43),o.ac(104,"span",59),o.ac(105,"span",60),o.Tc(106),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(107,"div",61),o.ac(108,"span"),o.ac(109,"b"),o.Tc(110),o.nc(111,"mask"),o.Rc(112,Xs,3,5,"span",47),o.Tc(113,")"),o.Zb(),o.Zb(),o.Zb(),o.ac(114,"div",62),o.ac(115,"div",63),o.ac(116,"span",64),o.Tc(117),o.Zb(),o.ac(118,"input",65),o.ic("keypress",(function(e){return t.validateMobileNumber(e)})),o.Zb(),o.Zb(),o.Vb(119,"app-control-messages",66),o.Zb(),o.Zb(),o.Zb(),o.Vb(120,"div",39),o.Rc(121,tr,7,6,"div",67),o.Rc(122,nr,1,0,"div",68),o.Rc(123,ir,9,3,"div",69),o.Rc(124,ar,1,0,"div",68),o.Rc(125,sr,2,3,"div",70),o.Rc(126,rr,1,0,"div",68),o.Rc(127,lr,3,2,"div",71),o.Rc(128,or,1,0,"div",68),o.ac(129,"div",72),o.Rc(130,xr,5,8,"p-panel",73),o.Zb(),o.Vb(131,"div",39),o.Rc(132,Zr,10,7,"div",67),o.Rc(133,wr,1,0,"div",68),o.Rc(134,Lr,8,6,"div",74),o.Rc(135,Nr,4,1,"div",75),o.ac(136,"div",76),o.ac(137,"div",23),o.ac(138,"button",77),o.ic("click",(function(){return t.buttonReplan()})),o.Tc(139),o.Zb(),o.ac(140,"button",78),o.ic("click",(function(){return t.buttonClick()})),o.Tc(141),o.Zb(),o.Zb(),o.Zb(),o.ac(142,"p-sidebar",79),o.ac(143,"div",21),o.ac(144,"div",80),o.ac(145,"button",81),o.ic("click",(function(){return t.jrnyDetailSidebar=!t.jrnyDetailSidebar})),o.Tc(146),o.ac(147,"span",4),o.Tc(148," per person"),o.Zb(),o.Zb(),o.Zb(),o.ac(149,"div",82),o.ac(150,"button",83),o.ic("click",(function(){return t.buttonClick()})),o.Tc(151),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(152,"div",84),o.ac(153,"div",21),o.Vb(154,"div",85),o.Zb(),o.Zb(),o.ac(155,"div",86),o.Vb(156,"app-fare-summary",20),o.Vb(157,"div",87),o.Zb(),o.Zb(),o.Zb(),o.Vb(158,"div",88),o.ac(159,"div",89),o.ac(160,"p"),o.ac(161,"span",90),o.Tc(162,"*"),o.Zb(),o.Tc(163),o.Zb(),o.ac(164,"p"),o.ac(165,"span",90),o.Tc(166,"*"),o.Zb(),o.Tc(167),o.Zb(),o.ac(168,"p"),o.ac(169,"span",90),o.Tc(170,"*"),o.Zb(),o.Tc(171),o.Zb(),o.ac(172,"p"),o.ac(173,"span",90),o.Tc(174,"*"),o.Zb(),o.Tc(175),o.Zb(),o.ac(176,"p"),o.ac(177,"span",90),o.Tc(178,"*"),o.Zb(),o.Tc(179),o.Zb(),o.Zb(),o.Zb(),o.Rc(180,Fr,5,9,"p-dialog",91)}2&e&&(o.Cb(5),o.Uc(null==t.langService.lang?null:t.langService.lang.passengerDetails),o.Cb(3),o.Xc(" ",o.qc(9,86,t.multiLapJourneyDetails.fromStation,"",t.langService.langChoice)," to ",o.qc(10,90,t.multiLapJourneyDetails.upToStation,"",t.langService.langChoice)," | ",o.pc(11,94,t.multiLapJourneyDetails.lapDetails[0].avlDetails.journeyDate,"EEE, dd MMM")," "),o.Cb(5),o.tc("id",t.adIdPT),o.Cb(10),o.Uc(null==t.langService.lang?null:t.langService.lang.passengerDetails),o.Cb(6),o.Uc(null==t.langService.lang?null:t.langService.lang.reviewBooking),o.Cb(7),o.Uc(null==t.langService.lang?null:t.langService.lang.payment),o.Cb(2),o.tc("visible",t.jrnyDetailSidebar),o.Cb(1),o.tc("avlY",!1)("journeyDetails",t.multiLapJourneyDetails),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.ok," "),o.Cb(2),o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.Cb(3),o.tc("ngIf",null!=t.cancel),o.Cb(1),o.uc("label",t.ok),o.Cb(1),o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.tc("closeOnEscape",!1)("closable",!1),o.Cb(3),o.uc("label",t.cancel),o.Cb(1),o.uc("label",t.ok),o.Cb(2),o.tc("formGroup",t.addPsgnInputForm),o.Cb(5),o.tc("ngIf",t.multiLapJourneyDetails.loyaltyRedemptionBooking),o.Cb(2),o.tc("page",t.page)("mpUser",t.mpUser)("msgsConcessionBooking",t.msgsConcessionBooking)("msgsSeniorCitizenApplicable",t.msgsSeniorCitizenApplicable)("msgsBedRollFlagEnabled",t.msgsBedRollFlagEnabled),o.Cb(2),o.tc("formGroup",t.loyalityInputForm),o.Cb(1),o.tc("toggleable",!1),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.irctcLoyaltyProgram),o.Cb(1),o.tc("ngForOf",t.loyalityOperation),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.irctcLoyaltyProgramDesc),o.Cb(1),o.tc("ngIf",1==t.loyalityInputForm.controls.choice.value),o.Cb(7),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputPageMsg31),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputPageMsg),o.Cb(1),o.Pc(o.yc(101,er)),o.tc("toggleable",!0),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.passengerDetails),o.Cb(1),o.tc("ngIf",null!=t.foodChoiceMsgConfirm),o.Cb(1),o.tc("ngForOf",t.psgnGroupArray),o.Cb(1),o.tc("ngForOf",t.infantGroupArray),o.Cb(2),o.tc("ngIf",!(t.retJrny||t.nameAgeGenderReadOnly)),o.Cb(1),o.tc("ngIf",!t.multiLapJourneyDetails.nosbBooking),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.infantMsg),o.Cb(3),o.Pc(o.yc(102,er)),o.tc("toggleable",!0),o.Cb(5),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.contactDetails," "),o.Cb(4),o.Xc("(",null==t.langService.lang?null:t.langService.lang.psngmailMsg," ",o.qc(111,97,t.emailId,2,t.emailId.indexOf("@"))," ",null==t.langService.lang?null:t.langService.lang.psngSmsMsg," "),o.Cb(2),o.tc("ngIf",t.userResponse.mobile&&t.userResponse.mobile.length>4),o.Cb(5),o.Uc(t.isdCode),o.Cb(1),o.uc("maxlength",t.mobileLength),o.Cb(1),o.tc("control",t.addPsgnInputForm.controls.mobileNumber),o.Cb(2),o.tc("ngIf",t.address),o.Cb(1),o.tc("ngIf",t.address),o.Cb(1),o.tc("ngIf",t.mealChoiceEnable),o.Cb(1),o.tc("ngIf",t.mealChoiceEnable),o.Cb(1),o.tc("ngIf",t.itkt),o.Cb(1),o.tc("ngIf",t.itkt),o.Cb(1),o.tc("ngIf",t.multiLapJourneyDetails.gstDetailInputFlag),o.Cb(1),o.tc("ngIf",t.multiLapJourneyDetails.gstDetailInputFlag),o.Cb(2),o.tc("ngIf","true"!=t.multiLapJourneyDetails.beyondArpBooking),o.Cb(2),o.tc("ngIf",t.isPaymentTypeEnable),o.Cb(1),o.tc("ngIf",t.isPaymentTypeEnable),o.Cb(1),o.tc("ngIf",t.ftBooking),o.Cb(1),o.tc("ngIf",!t.multiLapJourneyDetails.nosbBooking&&"true"!=t.multiLapJourneyDetails.beyondArpBooking&&t.multiLapJourneyDetails.conBookingJournalist),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg23),o.Cb(2),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22," "),o.Cb(1),o.tc("modal",!1)("visible",!0)("ngStyle",o.yc(103,jr)),o.Cb(4),o.Vc(" \u20b9 ",t.totalFare," "),o.Cb(5),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22," "),o.Cb(3),o.tc("id",t.adIdPB),o.Cb(2),o.tc("avlY",!1)("journeyDetails",t.multiLapJourneyDetails),o.Cb(1),o.tc("id",t.adIdRM),o.Cb(6),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg24),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg25),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg26),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg27),o.Cb(4),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg28," "),o.Cb(1),o.tc("ngIf",t.showSecQ))},directives:[v.a,C.a,ta.a,y.a,d.b,p.o,na.a,S.z,S.o,S.i,ia.a,Ce.a,d.c,p.n,S.b,S.n,S.g,S.k,sa,p.p,ra.a,Fn.a,A.a,S.q,d.e,ls,os,ps,As,Ms.a,S.a,rn.a],pipes:[k.a,p.f,Zs.a,ca.a],styles:["@media (max-width:768px){[_nghost-%COMP%] #app-journey-details .ui-sidebar.ui-widget.ui-widget-content.ui-shadow.ui-sidebar-active.ui-sidebar-right{top:50px;overflow:scroll;max-height:504px;width:284px}}.infant_box[_ngcontent-%COMP%]{padding:0 0 10px 10px;box-shadow:0 1px 7px 0 grey}.padding[_ngcontent-%COMP%]{padding:10px}body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]   .ui-panel[_ngcontent-%COMP%]   .ui-panel-titlebar[_ngcontent-%COMP%]{border:1px solid transparent!important;background-color:transparent!important}.blink[_ngcontent-%COMP%]{padding:5px 2px;color:green;animation:blink 1s linear infinite}"]}),e})();var Ur=n("8IZO"),qr=n("Arih"),Gr=n("lZMd");class _r{}class Jr{}var zr=n("mINc"),Kr=n("jo8z"),Hr=n("xlun"),Qr=n("5uzR"),$r=n("5XMG"),Yr=n("7vGX"),Wr=n("tq7a");const Xr=["backRB"],el=["aadhaarOtp"];function tl(e,t){if(1&e){const e=o.bc();o.ac(0,"button",73),o.ic("click",(function(){return o.Kc(e),o.mc(),o.Ic(17).reject()})),o.Zb()}if(2&e){const e=o.mc(),t=o.Ic(17);o.uc("label",null!=t.rejectLabel?t.rejectLabel:null==e.langService.lang?null:e.langService.lang.cancel)}}function nl(e,t){if(1&e&&(o.ac(0,"div",74),o.ac(1,"app-train-header",75),o.ic("changeBoardingStn",(function(){return null})),o.Zb(),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("page",e.page)}}function il(e,t){if(1&e&&(o.ac(0,"div"),o.Vb(1,"app-psgn-detail",76),o.Vb(2,"div",5),o.Zb()),2&e){const e=t.$implicit,n=t.index,i=o.mc();o.Cb(1),o.tc("psgnDtlList",i.journeyDetails.adult[n])("bookingConfigurables",e.avlDetails.bkgCfg)("page",i.page)("lap",i.journeyDetails.multilapBooking?"For Lap "+(n+1):"")}}function al(e,t){1&e&&o.Vb(0,"div",77)}function sl(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Vc("Train ",e.trainNo,"")}}function rl(e,t){if(1&e&&(o.ac(0,"div"),o.ac(1,"p-panel",79),o.ac(2,"p-header",80),o.ac(3,"div",81),o.ac(4,"span",82),o.ac(5,"strong"),o.Tc(6),o.Zb(),o.Rc(7,sl,2,1,"span",40),o.Zb(),o.Zb(),o.Zb(),o.Vb(8,"app-meal-opted",83),o.Zb(),o.Zb()),2&e){const e=t.$implicit,n=o.mc(2);o.Cb(1),o.tc("toggleable",!0),o.Cb(5),o.Uc(null==n.langService.lang?null:n.langService.lang.mealOpted),o.Cb(1),o.tc("ngIf",n.journeyDetails.multilapBooking),o.Cb(1),o.tc("selectedMeal",e.mealDtlsArr)("totalAmount",e.totalAmount)}}function ll(e,t){if(1&e&&(o.ac(0,"div",78),o.Rc(1,rl,9,5,"div",34),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngForOf",e.mealDtlsArr)}}function ol(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.nc(2,"mask"),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc("/ ",o.qc(2,1,e.userResponse.mobile,2,e.userResponse.mobile.length-2),"")}}function cl(e,t){if(1&e){const e=o.bc();o.ac(0,"div",89),o.ac(1,"app-captcha",90),o.ic("reCaptchaResponse",(function(t){return o.Kc(e),o.mc(3).reCaptchaResponse(t)})),o.Zb(),o.Zb()}if(2&e){const e=o.mc(3);o.Cb(1),o.tc("captcha",e.captchaDto)("captchaInputForm",e.captchaInputForm)("type",e.captchaType)("loadOnInit",e.loadCaptcaOnInit)}}function ul(e,t){if(1&e&&(o.ac(0,"div"),o.Vb(1,"app-nlp-captcha",91),o.Zb()),2&e){const e=o.mc(3);o.Cb(1),o.tc("type",e.captchaType)("loadOnInit",!0)("nlpCaptchaPrmtrDTO",e.nlpCaptchaPrmtrDTO)}}function gl(e,t){if(1&e&&(o.ac(0,"div",10),o.Rc(1,cl,2,4,"div",87),o.Rc(2,ul,2,3,"div",40),o.Vb(3,"app-control-messages",88),o.Zb()),2&e){const e=o.mc(2);o.Cb(1),o.tc("ngIf",!e.showNlpCaptcha),o.Cb(1),o.tc("ngIf",e.showNlpCaptcha&&!e.hideNlpCaptcha),o.Cb(1),o.tc("control",e.captchaInputForm.controls.captcha)}}function pl(e,t){if(1&e){const e=o.bc();o.ac(0,"div",92),o.ac(1,"div",93),o.ac(2,"label",94),o.Tc(3),o.ac(4,"span",95),o.Tc(5,"*"),o.Zb(),o.Zb(),o.ac(6,"input",96),o.ic("ngModelChange",(function(t){return o.Kc(e),o.mc(2).bookingOTP=t})),o.Zb(),o.ac(7,"label",97),o.ic("click",(function(){return o.Kc(e),o.mc(2).onclickResendOTP()}))("keydown.enter",(function(){return o.Kc(e),o.mc(2).onclickResendOTP()})),o.ac(8,"p"),o.Tc(9),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.mc(2);o.Cb(1),o.tc("formGroup",e.captchaInputForm),o.Cb(2),o.Vc("",null==e.langService.lang?null:e.langService.lang.otpForBooking," "),o.Cb(3),o.uc("placeholder",null==e.langService.lang?null:e.langService.lang.bookingOTP),o.tc("ngModel",e.bookingOTP),o.Cb(3),o.Vc("",null==e.langService.lang?null:e.langService.lang.resendOtp," ")}}function dl(e,t){if(1&e&&(o.ac(0,"div",84),o.Rc(1,gl,4,3,"div",85),o.Rc(2,pl,10,5,"div",86),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngIf",!e.otpBooking&&!e.isCaptchaVerified),o.Cb(1),o.tc("ngIf",e.otpBooking&&!e.isCaptchaVerified)}}function hl(e,t){if(1&e){const e=o.bc();o.ac(0,"button",113),o.ic("keydown.enter",(function(){return o.Kc(e),o.mc(3).generateAadhaarOtp()}))("click",(function(){return o.Kc(e),o.mc(3).generateAadhaarOtp()})),o.Tc(1),o.Zb()}if(2&e){const e=o.mc(3);o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.generateOTP)}}function bl(e,t){if(1&e){const e=o.bc();o.ac(0,"input",114),o.ic("keydown",(function(n){o.Kc(e);const i=t.index;return o.mc(3).onKeyDown(n,i)}))("input",(function(n){o.Kc(e);const i=t.index;return o.mc(3).onInput(n,i)})),o.Zb()}if(2&e){const e=t.index,n=o.mc(3);o.tc("id","otp-"+e)("disabled",!n.aadhaarOtpGenerated)}}function ml(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"button",115),o.ic("keydown.enter",(function(){return o.Kc(e),o.mc(3).generateAadhaarOtp()}))("click",(function(){return o.Kc(e),o.mc(3).generateAadhaarOtp()})),o.Tc(2),o.Zb(),o.Zb()}if(2&e){const e=o.mc(3);o.Cb(1),o.tc("disabled",e.subscribeTimer>0),o.Cb(1),o.Uc(null==e.langService.lang?null:e.langService.lang.resendOtp)}}function fl(e,t){if(1&e&&(o.ac(0,"div",116),o.lc(),o.ac(1,"svg",117),o.Vb(2,"circle",118),o.Zb(),o.kc(),o.ac(3,"div",119),o.Tc(4),o.Zb(),o.Zb()),2&e){const e=o.mc(3);o.tc("pTooltip","Resend OTP in "+e.subscribeTimer+" sec"),o.Cb(1),o.Db("width",60)("height",60),o.Cb(1),o.Db("stroke-dasharray",e.circumference)("stroke-dashoffset",e.dashOffset)("r",20)("cx",25)("cy",25),o.Cb(2),o.Vc("",e.subscribeTimer,"s")}}const vl=function(){return{"margin-bottom":"10px"}};function yl(e,t){if(1&e&&(o.ac(0,"p-panel",100),o.ac(1,"p-header",101),o.ac(2,"div",102),o.ac(3,"div"),o.Vb(4,"span",103),o.Zb(),o.ac(5,"div"),o.Vb(6,"span",66),o.Zb(),o.Zb(),o.Zb(),o.ac(7,"div",104),o.ac(8,"div",105),o.ac(9,"span"),o.Vb(10,"input",106),o.Zb(),o.ac(11,"span",107),o.Tc(12),o.Zb(),o.Zb(),o.ac(13,"div",108),o.Rc(14,hl,2,1,"button",109),o.ac(15,"div",110),o.Rc(16,bl,1,2,"input",111),o.Zb(),o.Rc(17,ml,3,2,"div",40),o.Rc(18,fl,5,9,"div",112),o.Zb(),o.Zb(),o.Zb()),2&e){const e=o.mc(2);o.Pc(o.yc(10,vl)),o.tc("toggleable",!1),o.Cb(6),o.tc("innerHTML",null==e.langService.lang?null:e.langService.lang.getAadhaarOTPHeader,o.Lc),o.Cb(6),o.Uc(null==e.langService.lang?null:e.langService.lang.aadhaarMsg),o.Cb(2),o.tc("ngIf",!e.aadhaarOtpGenerated),o.Cb(1),o.tc("pTooltip",e.aadhaarOtpGenerated?"":null==e.langService.lang?null:e.langService.lang.getAadhaarOTP),o.Cb(1),o.tc("ngForOf",e.otpTemp),o.Cb(1),o.tc("ngIf",e.aadhaarOtpGenerated&&e.resend_otp),o.Cb(1),o.tc("ngIf",e.aadhaarOtpGenerated&&e.resend_otp&&e.subscribeTimer>0)}}function Cl(e,t){if(1&e&&(o.ac(0,"div",98),o.Vb(1,"div",5),o.Rc(2,yl,19,11,"p-panel",99),o.Zb()),2&e){const e=o.mc();o.Cb(2),o.tc("ngIf",e.aadhaarOtpRequired)}}function Sl(e,t){if(1&e&&(o.ac(0,"p"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc("*",e.dpQuotaWlMsg,"")}}function Dl(e,t){if(1&e&&(o.ac(0,"p"),o.Tc(1),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.Vc("*",e.dpQuotaRegretMsg,"")}}function Tl(e,t){if(1&e&&(o.ac(0,"span"),o.Tc(1),o.Zb()),2&e){const e=o.mc().$implicit;o.Cb(1),o.Vc(" Train ",e.trainNo,"")}}function kl(e,t){if(1&e&&(o.ac(0,"div",122),o.ac(1,"p-panel",79),o.ac(2,"p-header",80),o.ac(3,"span",123),o.Tc(4),o.nc(5,"titlecase"),o.Rc(6,Tl,2,1,"span",40),o.Zb(),o.Zb(),o.ac(7,"div",124),o.Vb(8,"app-meal-opted",125),o.Zb(),o.Zb(),o.Vb(9,"div",5),o.Zb()),2&e){const e=t.$implicit,n=o.mc(2);o.Cb(1),o.tc("toggleable",n.journeyDetails.multilapBooking),o.Cb(3),o.Vc(" ",o.oc(5,6,null==n.langService.lang?null:n.langService.lang.mealOpted)," "),o.Cb(2),o.tc("ngIf",n.journeyDetails.multilapBooking),o.Cb(2),o.tc("selectedMeal",e.mealDtlsArr)("totalAmount",e.totalAmount)("multiLap",n.journeyDetails.multilapBooking)}}function Il(e,t){if(1&e&&(o.ac(0,"div",120),o.Rc(1,kl,10,8,"div",121),o.Zb()),2&e){const e=o.mc();o.Cb(1),o.tc("ngForOf",e.mealDtlsArr)}}const Ol=function(){return{height:"600px","min-width":"320px"}};function xl(e,t){if(1&e){const e=o.bc();o.ac(0,"p-dialog",126),o.ic("visibleChange",(function(t){return o.Kc(e),o.mc().showSchedule=t})),o.Vb(1,"app-check-train-schedule",127),o.Zb()}if(2&e){const e=o.mc();o.tc("contentStyle",o.yc(9,Ol))("visible",e.showSchedule),o.Cb(1),o.tc("trainNumberInput",e.journeyDetails.trainNumber)("trainJourneyDate",e.journeyDetails.journeyDate)("fromStation",e.singleDayAvlEnqDtls.from)("showTrainNumberInput",!1)("showHeader",!1)("showAds",!1)("showSchedule",!0)}}const Al=function(){return{height:"0px"}},Ml=function(){return{width:"600px"}};let Zl=(()=>{class e{constructor(e,t,n,i,a,s,r,l,o,c,u,g){this.router=e,this.userService=t,this.langService=n,this.commonService=i,this.store=a,this.bookingService=s,this.fb=r,this.quotaCodePipe=l,this.messageService=o,this.confirmationService=c,this._location=u,this.restService=g,this.reReq=!1,this.reTryBooking=!1,this.error=!1,this.errorMessage="",this.userResponse=null,this.captchaType="BOOKINGWS",this.nlpCaptchaVarsDTO=null,this.loadCaptcaOnInit=!1,this.otpBooking=!1,this.isCaptchaVerified=!1,this.reCaptcha=!1,this.jrnyDetailSidebar=!1,this.page=null,this.dpQuotaWlMsg=null,this.dpQuotaRegretMsg=null,this.disableContinue=!1,this.adIdRT="div-gpt-ad-1548235367705-0",this.adIdRB="div-gpt-ad-1548235605468-0",this.adIdRM="div-gpt-ad-1595847066933-0",this.showMealDetails=!1,this.totalAmount=0,this.aadhaarOtpRequired=!1,this.aadhaarOtpGenerated=!1,this.subscribeTimer=0,this.resend_otp=!1,this.otp=new Array(6).fill(""),this.otpTemp=new Array(6).fill(""),this.adIdRT=this.userService.getAdsRandomId(),this.adIdRB=this.userService.getAdsRandomId(),this.adIdRM=this.userService.getAdsRandomId()}ngOnInit(){this.reCaptchaV2Key=_i.a.siteKeyV2,this.langService.loader=!1,this.jdSub=this.store.select(r.j).subscribe(e=>{null!=e&&(this.journeyDetails=e)}),this.singleDayAvlEnqDtls=this.commonService.singleDayAvlEnqDtls,this.captchaDto=this.singleDayAvlEnqDtls.captchaDto,this.userResponse=this.userService.userResponse,this.aadhaarOtpRequired=21==this.captchaDto.captcha,this.otpBooking=(4==this.userResponse.otpLogin||20==this.captchaDto.captcha)&&!this.aadhaarOtpRequired,this.commonService.reviewPage&&(this.commonService.reviewPage=!1,this.loadCaptcaOnInit=!0,this.otpBooking&&this.generateOTP()),this.captchaInputForm=this.fb.group({captcha:[null,null],bookingOTP:["",null],aadhaarConsent:[!1,null]}),this.isCaptchaVerified=!1,this.initCaptcha(),Object(s.a)(300).subscribe(()=>{window.scrollTo(0,0)}),this.userService.getObservable("showNlpCaptcha").subscribe(e=>{this.showNlpCaptcha=e}),this.userService.getObservable("hideNlpCaptcha").subscribe(e=>{this.hideNlpCaptcha=e}),null!=this.commonService.selectedMealDetails&&this.commonService.selectedMealDetails.length>0&&(this.mealDtlsArr=[],this.commonService.selectedMealDetails.forEach(e=>{this.mealDetails=e.mealDtlsArr,null!=this.mealDetails&&this.mealDetails.length>0&&(this.showMealDetails=!0,this.totalAmount=0,e.mealDtlsArr=this.chooseSelectedMeal(),e.totalAmount=this.totalAmount,e.mealDtlsArr.length>0&&this.mealDtlsArr.push(e))}));let e="",t="";this.journeyDetails.lapDetails.forEach(n=>{n.avl.availablityStatus.indexOf("REGRET/DPWL")>=0?(this.disableContinue=!0,this.dpQuotaRegretMsg=this.langService.lang.dpQuotaRegret,""==t?t=n.avlDetails.trainNo.toString():t+=" & "+n.avlDetails.trainNo.toString(),this.dpQuotaRegretMsg=this.dpQuotaRegretMsg.replace("{{1}}",t)):n.avl.availablityStatus.indexOf("DPWL")>=0&&(this.dpQuotaWlMsg=this.langService.lang.dpQuotaWl,""==e?e=n.avlDetails.trainNo.toString():e+=" & "+n.avlDetails.trainNo.toString(),this.dpQuotaWlMsg=this.dpQuotaWlMsg.replace("{{1}}",e))}),this.singleDayAvlEnqDtls.avlFareResponseDTO.forEach(e=>{e.informationMessage.forEach(e=>{var t;"REVIEW_MSG_INIT"===e.paramName&&"true"==e.popup&&this.confirmationService.confirm({message:e.message,header:null===(t=this.langService.lang)||void 0===t?void 0:t.confirmation,acceptLabel:e.acceptButton,rejectLabel:e.rejectButton,accept:()=>{},reject:()=>{this.router.navigate(["/train-search"])}})})}),this.aadhaarOtpRequired&&(this.disableContinue=!0,this.captchaInputForm.get("captcha").reset({value:"",disabled:!0}))}ngAfterViewInit(){this.commonService.initialPassengers=this.journeyDetails.adult,this.commonService.backToPsgnInput=!0,this.page="review-psgn",this.langService.isAdsEnable&&(this.adsDTO=this.userService.getPsgnDetailForAds(this.journeyDetails.adult[0]),this.displayAds("/37179215/GPT_NWEB_REVIEW_BOOKING_TOP","/37179215/GPT_NWEB_REVIEW_BOOKING_BOTTOM","/37179215/GPT_NWEB_REVIEW_BOOKING_RIGHT")),window.scroll({top:0,left:0,behavior:"smooth"})}ngOnDestroy(){this.langService.isAdsEnable&&googletag.destroySlots(),this.jdSub.unsubscribe()}chooseSelectedMeal(){for(var e,t,n,i=new Array,a=0;a<this.mealDetails.length;a++){t=new Gr.a,n=new Array;for(var s=0,r=0;r<this.mealDetails[a].mealDetailList.length;r++)this.mealDetails[a].mealDetailList[r].quantity>0&&((e=new Xi.a).mealId=this.mealDetails[a].mealDetailList[r].mealId,e.mealTypeId=this.mealDetails[a].mealDetailList[r].mealTypeId,e.quantity=this.mealDetails[a].mealDetailList[r].quantity,e.mealCode=this.mealDetails[a].mealDetailList[r].mealCode,e.mealType=this.mealDetails[a].mealDetailList[r].mealType,e.mealName=this.mealDetails[a].mealDetailList[r].mealName,e.mealDetails=this.mealDetails[a].mealDetailList[r].mealDetails,e.mealRate=this.mealDetails[a].mealDetailList[r].mealRate,e.totalAmt=this.mealDetails[a].mealDetailList[r].quantity*this.mealDetails[a].mealDetailList[r].mealRate,n.push(e),s+=e.totalAmt);null!=n&&null!=n&&n.length>0&&(t.mealDetailList=n,t.mealType=this.mealDetails[a].mealType,this.totalAmount=this.totalAmount+s,i.push(t))}return i}proceedToPay(){console.log("proceed to pay...................."+JSON.stringify(this.singleDayAvlEnqDtls.bankDetailDTO)),null!=this.singleDayAvlEnqDtls.zeroFareBooking&&null!=this.singleDayAvlEnqDtls.zeroFareBooking&&"true"==this.singleDayAvlEnqDtls.zeroFareBooking&&0==this.singleDayAvlEnqDtls.totalCollectibleAmount?(this.reReq=!0,this.initZeroValuedPayment()):this.router.navigate(["payment/bkgPaymentOptions"])}showScheduleDialog(){this.showSchedule=!0}goBack(){this.router.navigate(["booking/psgninput"],{replaceUrl:!0})}replanBooking(){this.router.navigate(["train-search"],{replaceUrl:!0})}initZeroValuedPayment(){this.langService.loader=!0,console.log("makePayment()RB-----\x3e "+JSON.stringify(void 0));const e=Object.assign({},void 0,{amount:this.singleDayAvlEnqDtls.totalCollectibleAmount,transationId:0,txnStatus:1});e.bankId=-1,this.bankData=e,this.bookingService.bookingInitPayment(this.journeyDetails.clientTxnId,"",e).subscribe(e=>{console.log("BookingInitPayment.....RB "+JSON.stringify(e)),null!=e.errorMsg?(this.langService.loader=!1,this.errorMessage=e.errorMsg.split("-")[0],this.error=!0,this.reTryBooking=!1):"12"===e.txnStatus&&(this.langService.segregateBookingEnquiryFlag(e.paramList),Object(s.a)(this.langService.minPaymentDuration).subscribe(()=>{this.reReq=!1,this.bookTicket()}))},e=>{console.error("BookingInitPayment Error..... "+JSON.stringify(e)),this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.message})},()=>{console.log("BookingInitPayment finished....")})}bookTicket(){this.langService.loader=!0,this.reTryBooking=!1,console.log("Booking Ticket Now...RB "),this.bankData.paramList=[{key:"Success",value:"000"},{key:"Message",value:"Success"}],console.log(JSON.stringify(this.bankData)),this.bookingService.verifyPayment(this.journeyDetails.clientTxnId,this.bankData).subscribe(e=>{this.langService.loader=!1,e.bookingResponseDTO=Array.isArray(e.bookingResponseDTO)?e.bookingResponseDTO:Array.of(e.bookingResponseDTO);let t=0,n=!0,i=JSON.parse(JSON.stringify(this.journeyDetails));for(let a of e.bookingResponseDTO)null!=a.pnrNumber&&""!=a.pnrNumber&&(n=!1,a.psgnDtlList=Array.isArray(a.psgnDtlList)?a.psgnDtlList:Array.of(a.psgnDtlList),i.lapDetails[t].journeyQuota=this.quotaCodePipe.transform(a.bookedQuota)),t++;if(this.bookingService.bookingResponse=e,n){if(null==e.errorMessage||""==e.errorMessage)for(let t of e.bookingResponseDTO)if(null!=t.errorMessage&&null!=t.errorMessage){e.errorMessage=t.errorMessage;break}this.errorMessage=e.errorMessage.split("-")[0],null!=e.retryBooking&&"true"==e.retryBooking?(this.reTryBooking=!0,this.error=!1):(this.error=!0,this.reTryBooking=!1)}else this.bookingService.bookingResponse=e,this.store.dispatch(new l.l(i)),this.reTryBooking=!1,this.error=!1,this.router.navigate(["booking/zero-fare-booking"]);null!=this.bookingService.bookingResponse.userDetail&&this.store.dispatch(new qi.f({token:this.restService.token,user:this.bookingService.bookingResponse.userDetail}))})}redirect(){console.log("Booking Ticket canceled.... without choice.... "),this.router.navigate(["home"])}displayAds(e,t,n){let i=window.googletag||{cmd:[]};i.cmd.push(()=>{var t=googletag.sizeMapping().addSize([1280,0],[970,90]).addSize([980,0],[970,90]).addSize([768,0],[320,50]).addSize([320,0],[320,50]).build();googletag.defineSlot(e,[[320,50],[970,90]],this.adIdRT).setTargeting("Destination",[this.journeyDetails.lapDetails[0].toStnCode]).setTargeting("Quota",[this.journeyDetails.lapDetails[0].quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].departureDateTime)]).setTargeting("Meal",[this.adsDTO.meal]).setTargeting("Gender",[this.adsDTO.gender]).setTargeting("TrainType",this.journeyDetails.lapDetails[0].trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].arrivalDateTime)]).setTargeting("Age",[this.adsDTO.age]).setTargeting("Source",[this.journeyDetails.lapDetails[0].fromStnCode]).setTargeting("Classes",[this.journeyDetails.lapDetails[0].classCode]).defineSizeMapping(t).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),i.cmd.push(()=>{var e=googletag.sizeMapping().addSize([1024,0],[728,90]).addSize([320,0],[320,50]).build();googletag.defineSlot(t,[[728,90],[320,50]],this.adIdRB).setTargeting("Destination",[this.journeyDetails.lapDetails[0].toStnCode]).setTargeting("Quota",[this.journeyDetails.lapDetails[0].quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].departureDateTime)]).setTargeting("Meal",[this.adsDTO.meal]).setTargeting("Gender",[this.adsDTO.gender]).setTargeting("TrainType",this.journeyDetails.lapDetails[0].trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].arrivalDateTime)]).setTargeting("Age",[this.adsDTO.age]).setTargeting("Source",[this.journeyDetails.lapDetails[0].fromStnCode]).setTargeting("Classes",[this.journeyDetails.lapDetails[0].classCode]).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),i.cmd.push(()=>{var e=googletag.sizeMapping().addSize([320,50]).build();googletag.defineSlot(n,[[300,600],[300,250],[160,600],[120,600]],this.adIdRM).setTargeting("Destination",[this.journeyDetails.lapDetails[0].toStnCode]).setTargeting("Quota",[this.journeyDetails.lapDetails[0].quotaCode]).setTargeting("Departure",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].departureDateTime)]).setTargeting("Meal",[this.adsDTO.meal]).setTargeting("Gender",[this.adsDTO.gender]).setTargeting("TrainType",this.journeyDetails.lapDetails[0].trainType).setTargeting("Arrival",[this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].arrivalDateTime)]).setTargeting("Age",[this.adsDTO.age]).setTargeting("Source",[this.journeyDetails.lapDetails[0].fromStnCode]).setTargeting("Classes",[this.journeyDetails.lapDetails[0].classCode]).defineSizeMapping(e).setCollapseEmptyDiv(!0).addService(googletag.pubads()),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),googletag.display(this.adIdRT)}initCaptcha(){if(null==this.captchaDto||null==this.captchaDto)this.bookingService.captchaGenerateTime=new Date;else{const e=this.captchaInputForm.controls.captcha;null!=e&&e.setValue(null);let t="true"==this.captchaDto.nlpcaptchEnabled;this.userService.changeValueOfObservable("showNlpCaptcha",t),this.bookingService.captchaGenerateTime=new Date,this.userService.nlpcaptchaTokenForValidate=this.captchaDto.nlpKeyValue,t&&(this.userService.changeValueOfObservable("hideNlpCaptcha",!1),this.initNlpPsgnDetails(),this.loadCaptcaOnInit=!0)}}getCaptchaAns(){this.showNlpCaptcha&&null!=document.getElementById("nlpIdentifier")?(this.nlpCaptchaVarsDTO=new qr.a,this.nlpCaptchaVarsDTO.nlpIdentifier=document.getElementById("nlpIdentifier").value,this.nlpCaptchaVarsDTO.nlpAnswer=document.getElementById("nlpAnswer").value,this.nlpCaptchaVarsDTO.nlpToken=this.userService.nlpcaptchaTokenForValidate,this.nlpCaptchaVarsDTO.nlpType="BOOKING"):this.nlpCaptchaVarsDTO=null}initNlpPsgnDetails(){null!=this.nlpCaptchaPrmtrDTO&&null!=this.nlpCaptchaPrmtrDTO||(this.nlpCaptchaPrmtrDTO=new Ur.a),this.nlpCaptchaPrmtrDTO.irctc_class_code=this.journeyDetails.lapDetails[0].classCode,this.nlpCaptchaPrmtrDTO.irctc_arrival_date=this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].arrivalDateTime),this.nlpCaptchaPrmtrDTO.irctc_journey_date=this.userService.formatDateYYYYMMDD(this.journeyDetails.lapDetails[0].departureDateTime),this.nlpCaptchaPrmtrDTO.irctc_from_station_code=this.journeyDetails.lapDetails[0].fromStnCode,this.nlpCaptchaPrmtrDTO.irctc_quota=this.journeyDetails.lapDetails[0].quotaCode,this.nlpCaptchaPrmtrDTO.irctc_to_station=this.journeyDetails.lapDetails[0].toStnCode,this.nlpCaptchaPrmtrDTO.irctc_train_type=this.journeyDetails.lapDetails[0].trainType,this.nlpCaptchaPrmtrDTO.irctc_age=this.userService.getAge(),this.nlpCaptchaPrmtrDTO.irctc_gender=this.userService.getGender()}generateOTP(){this.langService.loader=!0,console.log("generateOTP"),this.userService.generateOTP("BOOKING").subscribe(e=>{console.log("Response DTO:"+JSON.stringify(e)),this.langService.loader=!1,this.messageService.add(null==e.status?{life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:e.error}:{life:this.langService.life,severity:"success",summary:this.langService.errorMsg.successHeader,detail:e.status})})}onclickResendOTP(){this.langService.loader=!0,console.log("onclickResendOTP"),this.userService.resendOTP("BOOKING").subscribe(e=>{console.log("Response DTO:"+JSON.stringify(e)),this.langService.loader=!1,this.messageService.add(null==e.status?{life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:e.error}:{life:this.langService.life,severity:"success",summary:this.langService.errorMsg.successHeader,detail:e.status})})}verifyCaptcha(){if(this.isCaptchaVerified)this.proceedToPay();else{let e="",t=!1;if(this.reCaptcha?(t=null==this.nlpCaptchaVarsDTO||null==this.nlpCaptchaVarsDTO.nlpAnswer,e=this.nlpCaptchaVarsDTO.nlpAnswer):(this.getCaptchaAns(),null!=this.nlpCaptchaVarsDTO?e=this.nlpCaptchaVarsDTO.nlpAnswer:this.otpBooking?e=this.captchaInputForm.controls.bookingOTP.value:(this.aadhaarOtpRequired&&this.updateOtpControl(),e=this.captchaInputForm.controls.captcha.value),t=null==e||null==e||""==e),t)return void this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:this.otpBooking||this.aadhaarOtpRequired?this.langService.lang.enterOtpToLogin:this.langService.lang.captchaMandatory});this.timeCheck(e)}}proceedToVerifyCaptcha(e){this.userService.changeValueOfObservable("hideNlpCaptcha",!0),this.isCaptchaVerified=!0,this.langService.loader=!0;let t=new _r;t.captchaAns=e,t.captchaType=this.captchaType,t.clientTxnId=this.journeyDetails.clientTxnId,t.paymentType=2,t.addonLapServices=[];let n=new Jr;n.travelInsuranceOpted=!0,t.addonLapServices.push(n),(this.aadhaarOtpRequired?this.bookingService.verifyAuthentication(t):this.bookingService.addonServices(t)).subscribe(e=>{console.log("addonServices Verification Response: "+e),this.langService.loader=!1,null==e.errorMessage?this.proceedToPay():(this.userService.changeValueOfObservable("hideNlpCaptcha",!1),this.loadCaptcaOnInit=!1,this.bookingService.captchaGenerateTime=new Date,this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:e.errorMessage}),this.otpBooking||(this.captchaDto=e.captchaDto,this.initCaptcha()),this.isCaptchaVerified=!1)})}timeCheck(e){let t=this.userResponse.mobileAppConfigDTO.formFillCheckEnable,n=this.userResponse.mobileAppConfigDTO.captchaFillCheckStartTime,i=this.userResponse.mobileAppConfigDTO.captchaFillCheckEndTime,a=this.userResponse.mobileAppConfigDTO.minmCaptchaInputTime,r=new Date,l=60*r.getHours()+r.getMinutes(),o=1==t;(l<n||l>=i||a<=0)&&(o=!1);let c=r.getTime()-this.bookingService.captchaGenerateTime.getTime();o&&c<a?Object(s.a)(a-c).subscribe(()=>{this.proceedToVerifyCaptcha(e)}):this.proceedToVerifyCaptcha(e)}reCaptchaResponse(e){console.log(e),this.reCaptcha=e.enable,this.reCaptcha?(this.nlpCaptchaVarsDTO=new qr.a,this.nlpCaptchaVarsDTO.nlpAnswer=e.response):this.nlpCaptchaVarsDTO=null}generateAadhaarOtp(){console.log("send Aadhaar otp");let e=this.captchaInputForm.get("aadhaarConsent").value;if(e){this.langService.loader=!0,this.resend_otp=!1;let t=new _r;t.clientTxnId=this.journeyDetails.clientTxnId,t.aadhaarConsent=e,this.bookingService.generateAuthentication(t).subscribe(t=>{console.log("generateAuthentication called "+JSON.stringify(t)),this.langService.loader=!1,null==t.status?this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:t.error}):(this.messageService.add({life:this.langService.life,severity:"success",summary:this.langService.errorMsg.successHeader,detail:t.status}),this.captchaInputForm.get("aadhaarConsent").reset({value:e,disabled:!0}),this.aadhaarOtpGenerated=!0,this.disableContinue=!1,this.captchaInputForm.get("captcha").enable(),Object(s.a)(300).subscribe(()=>{const e=document.getElementById("otp-0");null==e||e.focus()}),null!=t.resend_OTP_Left&&0!=t.resend_OTP_Left&&(this.resend_otp=t.resend_OTP_Left>0,this.Countdown(t.resendOTPTime)))},e=>{console.error("generateAuthentication Error..... "+JSON.stringify(e)),this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+e.message})},()=>{console.log("generateAuthentication finished....")})}else this.messageService.add({life:this.langService.life,severity:"error",summary:this.langService.errorMsg.errorHeader,detail:""+this.langService.errorMsg.aadhaarKycCheckBoxErr})}Countdown(e){this.subscribeTimer=e,this.totalTime=this.subscribeTimer;let t=Object(s.a)(0,1e3).subscribe(()=>{this.subscribeTimer>0?(this.subscribeTimer--,this.circumference=2*Math.PI*20,this.dashOffset=this.circumference*(1-this.subscribeTimer/this.totalTime)):t.unsubscribe()})}onKeyDown(e,t){const n=e.target,i=document.getElementById("otp-"+(t-1)),a=document.getElementById("otp-"+(t+1)),s=e.key;if("Backspace"===s)return e.preventDefault(),""!==n.value&&(this.otpTemp[t]="",n.value=""),void(t>0&&(this.otpTemp[t-1]="",null==i||i.focus()));/^\d$/.test(s)?""!==n.value&&t<this.otpTemp.length-1&&(null==a||a.focus()):e.preventDefault()}onInput(e,t){const n=e.target,i=n.value,a=document.getElementById("otp-"+(t+1));i.length>0&&(this.otp[t]=i.charAt(0)),""!==n.value&&t<this.otpTemp.length-1&&(null==a||a.focus())}updateOtpControl(){var e;const t=this.otp.join("");null===(e=this.captchaInputForm.get("captcha"))||void 0===e||e.setValue(t)}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(i.c),o.Ub(u.a),o.Ub(c.a),o.Ub(f.a),o.Ub(g.b),o.Ub(En.a),o.Ub(S.d),o.Ub(zr.a),o.Ub(d.d),o.Ub(d.a),o.Ub(p.k),o.Ub(Kr.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-review-booking"]],viewQuery:function(e,t){var n;1&e&&(o.bd(Xr,!0),o.bd(el,!0)),2&e&&(o.Hc(n=o.jc())&&(t.firstInput=n.first),o.Hc(n=o.jc())&&(t.aadhaarOtpInput=n.first))},decls:133,vars:87,consts:[[1,"top-header","hidden-lg","hidden-md","hidden-sm"],[1,"top-header-content","col-xs-12"],[1,"fa","fa-long-arrow-left",2,"width","10%","margin-top","12px",3,"click"],[1,"pull-right",2,"width","90%"],[1,"t_2",2,"color","#fff"],[1,"clearfix"],[1,"text-center","ad-min-height",2,"width","100%","margin-left","-10px","text-align","center"],[1,"text-center",2,"margin-left","23px",3,"id"],[3,"header","closable"],["cd",""],[1,"text-center"],["type","button","pButton","","icon","pi pi-times","style","margin-right: 20px;",3,"label","click",4,"ngIf"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[1,"col-xs-12","hidden-xs",2,"padding","30px 0 60px 0"],[1,"col-xs-push-2","col-xs-8"],[1,"text-center",2,"margin-top","-42px"],[1,"col-xs-4",2,"padding","0px"],[1,"progress-active","progress-step"],[1,"progress-val"],[1,"pull-left","progress-text",2,"margin-left","-36px"],[1,"col-xs-push-6","progress-active","progress-step"],[1,"col-xs-push-5","progress-text"],[1,"pull-right"],[1,"progress-step"],[1,"progress-text"],["id","app-journey-details","position","bottom",3,"visible","visibleChange"],[3,"avlY","journeyDetails"],["type","button",1,"search_btn",3,"click"],[1,""],["id","review",1,"col-xs-12",2,"padding","0px"],[1,"col-lg-9","col-md-9","col-sm-12","remove-padding"],["class","form-group col-xs-12 border-all zeroPadding",4,"ngIf"],[1,"col-xs-12","margin"],[1,"form-group","col-xs-12","border-all","mobileMeal",2,"padding","0px"],[4,"ngFor","ngForOf"],["class","hidden-lg hidden-md hidden-sm col-xs-12 margin",4,"ngIf"],["class","form-group hidden-lg hidden-md hidden-sm col-xs-12 border-all mobileMeal","style","padding: 0px;margin-bottom: 10px",4,"ngIf"],[1,"form-group","col-xs-12","dull-back","border-all"],[2,"padding","10px 0px"],[1,"hidden-lg","hidden-md","hidden-sm"],[4,"ngIf"],[1,"form-group","col-xs-12","margin","link"],["href","http://contents.irctc.co.in/en/Refundrule2015.pdf","target","_blank","rel","noopener noreferrer"],[3,"formGroup"],["class","col-xs-12","style","padding: 0px;",4,"ngIf","ngIfElse"],["aadhaarOTPBookingInput",""],[1,"WL",2,"font-size","small"],[1,"form-group","col-xs-12","hidden-xs"],["type","button",1,"btnDefault",3,"click"],["type","submit",3,"pTooltip","disabled","click"],[1,"form-group","col-xs-12",2,"padding-bottom","35px"],[1,"text-center",3,"id"],["position","bottom",1,"col-xs-12","hidden-lg","hidden-md","hidden-sm",3,"modal","visible","ngStyle"],[1,"pull-left",2,"width","49.9%"],["type","button",1,"mob-bot-btn","search_btn",3,"click"],[1,"pull-right",2,"width","49.9%"],["type","submit",2,"background","#fb792b",3,"disabled","click"],[1,"col-lg-3","col-md-3","col-sm-12","hidden-xs"],["id","meal-summary","class","col-xs-12 border-all mealpanel zeroPadding",4,"ngIf"],[1,"row","text-center"],[3,"id"],["draggable","false","header","Train Schedule",3,"contentStyle","visible","visibleChange",4,"ngIf"],["modal","true","header","Retry Booking Confirmation",3,"visible","responsive","closable","closeOnEscape","visibleChange"],[1,"pnr-detail"],[1,"col-md-12","col-sm-12","col-xs-12","text-center",2,"padding-top","10px"],[1,"text-center",2,"font-size","1.5rem","color","red"],[3,"innerHTML"],[1,"text-center","col-md-12","col-sm-12","col-xs-12",2,"padding-top","15px"],["type","submit",1,"loginButton","col-md-5","col-sm-5","col-xs-5","pull-right",3,"click"],[1,"loginButton","col-md-5","col-sm-5","col-xs-5","pull-left",3,"click"],["modal","true","header","ERROR!!!",3,"visible","responsive","closable","closeOnEscape","visibleChange"],[1,"col-md-3","col-sm-3","col-xs-3"],[1,"loginButton","col-md-6","col-sm-6","col-xs-6",3,"click"],["type","button","pButton","","icon","pi pi-times",2,"margin-right","20px",3,"label","click"],[1,"form-group","col-xs-12","border-all","zeroPadding"],[3,"page","changeBoardingStn"],[3,"psgnDtlList","bookingConfigurables","page","lap"],[1,"hidden-lg","hidden-md","hidden-sm","col-xs-12","margin"],[1,"form-group","hidden-lg","hidden-md","hidden-sm","col-xs-12","border-all","mobileMeal",2,"padding","0px","margin-bottom","10px"],["expandIcon","fa fa-angle-down","collapseIcon","fa fa-angle-up",3,"toggleable"],[1,"col-xs-11",2,"padding","0px 0px"],[1,"ui-helper-clearfix"],[1,"ui-panel-title","p-heading"],[3,"selectedMeal","totalAmount"],[1,"col-xs-12",2,"padding","0px"],["class","text-center",4,"ngIf"],["class","col-xs-12 text-center",4,"ngIf"],["style","max-width: max-content; min-width: 230px; margin: 0 auto;",4,"ngIf"],[3,"control"],[2,"max-width","max-content","min-width","230px","margin","0 auto"],[3,"captcha","captchaInputForm","type","loadOnInit","reCaptchaResponse"],[3,"type","loadOnInit","nlpCaptchaPrmtrDTO"],[1,"col-xs-12","text-center"],[1,"col-xs-12",2,"max-width","250px","min-width","230px","margin","0 auto","float","none",3,"formGroup"],["for","bookingOTP"],[1,"mandatry"],["type","text","formControlName","bookingOTP","id","bookingOTP","name","bookingOTP","autocomplete","off",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["tabindex","0",1,"green-text","text-center",2,"cursor","pointer","float","right",3,"click","keydown.enter"],[1,"col-xs-12","border-all","zeroPadding",2,"margin-bottom","10px"],[3,"toggleable","style",4,"ngIf"],[3,"toggleable"],[2,"padding","0px 0px"],[1,"ui-panel-title",2,"display","flex"],[1,"fa","fa-unlock","fa-lg",2,"font-weight","bold"],[1,"col-xs-12",2,"margin-bottom","5px"],[1,"flex-15",2,"padding-bottom","5px"],["type","checkbox","name","aadhaarConsent","formControlName","aadhaarConsent",2,"zoom","1.5"],[2,"text-align","justify"],[1,"flex-15",2,"height","60px"],["type","button","class","search_btn review_page_button",3,"keydown.enter","click",4,"ngIf"],[2,"display","flex","gap","5px",3,"pTooltip"],["type","text","maxlength","1","class","form-control text-center otp-input zeroPadding","autocomplete","off",3,"id","disabled","keydown","input",4,"ngFor","ngForOf"],["class","circle-timer-container",3,"pTooltip",4,"ngIf"],["type","button",1,"search_btn","review_page_button",3,"keydown.enter","click"],["type","text","maxlength","1","autocomplete","off",1,"form-control","text-center","otp-input","zeroPadding",3,"id","disabled","keydown","input"],["type","button",1,"search_btn","review_page_button",3,"disabled","keydown.enter","click"],[1,"circle-timer-container",3,"pTooltip"],[1,"progress-ring"],[1,"progress-ring__circle","text-green"],[1,"circle-timer-text"],["id","meal-summary",1,"col-xs-12","border-all","mealpanel","zeroPadding"],["class","reviewMeal",4,"ngFor","ngForOf"],[1,"reviewMeal"],[1,"ui-panel-title","p-heading",2,"font-size","1.5rem"],[1,"col-xs-12","zeroPadding"],[3,"selectedMeal","totalAmount","multiLap"],["draggable","false","header","Train Schedule",3,"contentStyle","visible","visibleChange"],[3,"trainNumberInput","trainJourneyDate","fromStation","showTrainNumberInput","showHeader","showAds","showSchedule"]],template:function(e,t){if(1&e){const e=o.bc();o.Vb(0,"p-toast"),o.ac(1,"div",0),o.ac(2,"div",1),o.ac(3,"div",2),o.ic("click",(function(){return t.goBack()})),o.Zb(),o.ac(4,"div",3),o.ac(5,"strong"),o.Tc(6),o.Zb(),o.Vb(7,"br"),o.ac(8,"span",4),o.Tc(9),o.nc(10,"stationName"),o.nc(11,"stationName"),o.nc(12,"date"),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Vb(13,"div",5),o.ac(14,"div",6),o.Vb(15,"div",7),o.Zb(),o.ac(16,"p-confirmDialog",8,9),o.ac(18,"p-footer"),o.ac(19,"div",10),o.Rc(20,tl,1,1,"button",11),o.ac(21,"button",12),o.ic("click",(function(){return o.Kc(e),o.Ic(17).accept()})),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(22,"div",13),o.ac(23,"div",14),o.Vb(24,"hr"),o.ac(25,"div",15),o.ac(26,"div",16),o.ac(27,"div",17),o.ac(28,"div",18),o.Tc(29,"1"),o.Zb(),o.Zb(),o.ac(30,"div",19),o.Tc(31),o.Zb(),o.Zb(),o.ac(32,"div",16),o.ac(33,"div",20),o.ac(34,"div",18),o.Tc(35,"2"),o.Zb(),o.Zb(),o.ac(36,"div",21),o.Tc(37),o.Zb(),o.Zb(),o.ac(38,"div",16),o.ac(39,"div",22),o.ac(40,"div",23),o.ac(41,"div",18),o.Tc(42,"3"),o.Zb(),o.Zb(),o.ac(43,"div",24),o.Tc(44),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(45,"p-sidebar",25),o.ic("visibleChange",(function(e){return t.jrnyDetailSidebar=e})),o.Vb(46,"app-fare-summary",26),o.ac(47,"div",10),o.ac(48,"button",27),o.ic("click",(function(){return t.jrnyDetailSidebar=!t.jrnyDetailSidebar})),o.Tc(49),o.Zb(),o.Zb(),o.Zb(),o.ac(50,"div",28),o.ac(51,"div",29),o.ac(52,"div",30),o.Rc(53,nl,2,1,"div",31),o.Vb(54,"div",32),o.ac(55,"div",33),o.Rc(56,il,3,4,"div",34),o.Zb(),o.Rc(57,al,1,0,"div",35),o.Rc(58,ll,2,1,"div",36),o.Vb(59,"div",32),o.ac(60,"div",37),o.ac(61,"div",38),o.Tc(62),o.ac(63,"span",39),o.Vb(64,"br"),o.Zb(),o.ac(65,"strong"),o.Tc(66),o.nc(67,"mask"),o.Rc(68,ol,3,5,"span",40),o.Zb(),o.Zb(),o.Zb(),o.ac(69,"div",41),o.ac(70,"div",22),o.ac(71,"a",42),o.Tc(72),o.Zb(),o.Zb(),o.Zb(),o.Vb(73,"div",32),o.ac(74,"form",43),o.Rc(75,dl,3,2,"div",44),o.Rc(76,Cl,3,1,"ng-template",null,45,o.Sc),o.ac(78,"div",46),o.Rc(79,Sl,2,1,"p",40),o.Rc(80,Dl,2,1,"p",40),o.Zb(),o.ac(81,"div",47),o.ac(82,"div",28),o.ac(83,"button",48),o.ic("click",(function(){return t.goBack()})),o.Tc(84),o.Zb(),o.ac(85,"button",49),o.ic("click",(function(){return t.verifyCaptcha()})),o.Tc(86),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(87,"div",50),o.Vb(88,"div",51),o.Zb(),o.ac(89,"p-sidebar",52),o.ac(90,"div",10),o.ac(91,"div",53),o.ac(92,"button",54),o.ic("click",(function(){return t.jrnyDetailSidebar=!t.jrnyDetailSidebar})),o.Tc(93),o.Zb(),o.Zb(),o.ac(94,"div",55),o.ac(95,"button",56),o.ic("click",(function(){return t.verifyCaptcha()})),o.Tc(96),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(97,"div",57),o.Vb(98,"app-fare-summary",26),o.Rc(99,Il,2,1,"div",58),o.ac(100,"div",59),o.Vb(101,"div",60),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Rc(102,xl,2,10,"p-dialog",61),o.ac(103,"p-dialog",62),o.ic("visibleChange",(function(e){return t.reTryBooking=e})),o.ac(104,"div",63),o.ac(105,"div"),o.ac(106,"div",64),o.ac(107,"b"),o.ac(108,"div",65),o.ac(109,"p"),o.Vb(110,"span",66),o.Zb(),o.ac(111,"p"),o.ac(112,"span"),o.Tc(113),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(114,"div",67),o.ac(115,"button",68),o.ic("click",(function(){return t.bookTicket()})),o.Tc(116),o.Zb(),o.ac(117,"button",69),o.ic("click",(function(){return t.redirect()})),o.Tc(118),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(119,"p-dialog",70),o.ic("visibleChange",(function(e){return t.error=e})),o.ac(120,"div",63),o.ac(121,"div"),o.ac(122,"div",64),o.ac(123,"b"),o.ac(124,"div",65),o.ac(125,"p"),o.ac(126,"span"),o.Tc(127),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.Zb(),o.ac(128,"div",67),o.Vb(129,"div",71),o.ac(130,"button",72),o.ic("click",(function(){return t.redirect()})),o.Tc(131),o.Zb(),o.Vb(132,"div",71),o.Zb(),o.Zb(),o.Zb(),o.Zb()}if(2&e){const e=o.Ic(17),n=o.Ic(77);o.Cb(6),o.Uc(null==t.langService.lang?null:t.langService.lang.reviewBooking),o.Cb(3),o.Xc(" ",o.qc(10,69,t.journeyDetails.fromStation,"",t.langService.langChoice)," to ",o.qc(11,73,t.journeyDetails.upToStation,"",t.langService.langChoice)," | ",o.pc(12,77,t.journeyDetails.lapDetails[0].avlDetails.journeyDate,"EEE, dd MMM")," "),o.Cb(6),o.tc("id",t.adIdRT),o.Cb(1),o.uc("header",null==t.langService.lang?null:t.langService.lang.confirmation),o.tc("closable",!1),o.Cb(4),o.tc("ngIf",e.rejectVisible),o.Cb(1),o.uc("label",null!=e.acceptLabel?e.acceptLabel:null==t.langService.lang?null:t.langService.lang.ok),o.Cb(10),o.Uc(null==t.langService.lang?null:t.langService.lang.passengerDetails),o.Cb(6),o.Uc(null==t.langService.lang?null:t.langService.lang.reviewBooking),o.Cb(7),o.Uc(null==t.langService.lang?null:t.langService.lang.payment),o.Cb(1),o.tc("visible",t.jrnyDetailSidebar),o.Cb(1),o.tc("avlY",!0)("journeyDetails",t.journeyDetails),o.Cb(3),o.Vc(" ",null==t.langService.lang?null:t.langService.lang.ok," "),o.Cb(4),o.tc("ngIf",null!=t.page),o.Cb(3),o.tc("ngForOf",t.journeyDetails.lapDetails),o.Cb(1),o.tc("ngIf",t.showMealDetails),o.Cb(1),o.tc("ngIf",t.showMealDetails),o.Cb(4),o.Vc("",null==t.langService.lang?null:t.langService.lang.tktDetailsSent," "),o.Cb(4),o.Vc("",o.qc(67,80,t.userResponse.email,2,t.userResponse.email.indexOf("@"))," "),o.Cb(2),o.tc("ngIf",t.userResponse.mobile&&t.userResponse.mobile.length>4),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.canPolicy),o.Cb(2),o.tc("formGroup",t.captchaInputForm),o.Cb(1),o.tc("ngIf",!t.aadhaarOtpRequired)("ngIfElse",n),o.Cb(4),o.tc("ngIf",""!=t.dpQuotaWlMsg&&null!=t.dpQuotaWlMsg),o.Cb(1),o.tc("ngIf",""!=t.dpQuotaRegretMsg&&null!=t.dpQuotaRegretMsg),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.back),o.Cb(1),o.Kb("",t.disableContinue?"disable-book":""," train_Search btnDefault"),o.tc("pTooltip",t.aadhaarOtpRequired&&!t.aadhaarOtpGenerated?null==t.langService.lang?null:t.langService.lang.getAadhaarOTP:"")("disabled",t.disableContinue),o.Cb(1),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22," "),o.Cb(2),o.tc("id",t.adIdRB),o.Cb(1),o.tc("modal",!1)("visible",!0)("ngStyle",o.yc(84,Al)),o.Cb(4),o.Vc(" \u20b9 ",t.singleDayAvlEnqDtls.totalCollectibleAmount," "),o.Cb(2),o.Kb("",t.disableContinue?"disable-book":""," mob-bot-btn search_btn"),o.tc("disabled",t.disableContinue),o.Cb(1),o.Vc("",null==t.langService.lang?null:t.langService.lang.psgnInputpageMsg22," "),o.Cb(2),o.tc("avlY",!0)("journeyDetails",t.journeyDetails),o.Cb(1),o.tc("ngIf",t.showMealDetails),o.Cb(2),o.tc("id",t.adIdRM),o.Cb(1),o.tc("ngIf",t.showSchedule),o.Cb(1),o.Pc(o.yc(85,Ml)),o.tc("visible",t.reTryBooking)("responsive",!0)("closable",!1)("closeOnEscape",!1),o.Cb(7),o.tc("innerHTML",t.errorMessage,o.Lc),o.Cb(3),o.Uc(null==t.langService.errorMsg?null:t.langService.errorMsg.reviewBookingAlert1),o.Cb(3),o.Uc(null==t.langService.lang?null:t.langService.lang.yes),o.Cb(2),o.Uc(null==t.langService.lang?null:t.langService.lang.no),o.Cb(1),o.Pc(o.yc(86,Ml)),o.tc("visible",t.error)("responsive",!0)("closable",!1)("closeOnEscape",!1),o.Cb(8),o.Uc(t.errorMessage),o.Cb(4),o.Uc(null==t.langService.lang?null:t.langService.lang.ok)}},directives:[v.a,y.a,d.b,p.o,na.a,C.a,ta.a,p.n,S.z,S.o,S.i,Hr.a,p.p,rn.a,ia.a,Qr.a,Ce.a,d.c,$r.a,sa,Yr.a,Wr.a,S.b,S.n,S.g,S.a,ln.a],pipes:[k.a,p.f,Zs.a,p.u],styles:[""]}),e})();var wl=n("Kk/z");const Ll=[{path:"train-list",component:Nn},{path:"fetch-loyalty-psgn",component:ei},{path:"pnr-input",component:gi},{path:"mp-pass-passenger",component:Vi},{path:"psgninput",component:Vr},{path:"reviewBooking",component:Zl},{path:"check-train-schedule",component:ln.a},{path:"zero-fare-booking",component:(()=>{class e{constructor(e){this.bookingService=e}ngOnInit(){this.bkgRespDto=this.bookingService.bookingResponse}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(En.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-zero-fare-booking"]],decls:1,vars:1,consts:[[3,"bkgResponse"]],template:function(e,t){1&e&&o.Vb(0,"app-booking-confirmation",0),2&e&&o.tc("bkgResponse",t.bkgRespDto)},directives:[wl.a],styles:[""]}),e})()}];let Nl=(()=>{class e{}return e.\u0275mod=o.Sb({type:e}),e.\u0275inj=o.Rb({factory:function(t){return new(t||e)},providers:[],imports:[[i.g.forChild(Ll),a.a.forRoot(),ye.b,ve,Ge.b],i.g]}),e})()}}]);